<html>
    <head>
        <title>Fallout 76 Weapon damage calculator</title>
        <style>
            * {
                font-family: sans-serif;
                font-size: 20px;
            }
            td {
                padding: 1px;
            }
            
            table.infoTable {
               border: 1px solid black;
               border-collapse: collapse;
            }
            table.infoTable td {
               border: 1px solid black;
            }
            .halfopaque {
                opacity: 0.3;
                font-weight: bold; 
                font-size: 26px;
            }
        </style>
        <meta name="keywords" content="Fallout,Fallout 76,Weapons,Damage,Calculation,Comparison,Comparator">
    </head>
    <body style="height: 90%">
        <center>
            <span style="font-size: 36px; font-weight: bold;">Fallout 76 Weapon Damage Calculator (v3.10.5)</span>
            <br/>
            <i>(Patch 38 [The Pitt] update in progress.)</i>
        <br/>
        <br/>
        <table id="parent">
            <tr>
                <td style='vertical-align: top;'>
                        <table id="table1" style="border: 1px solid black;">
                                <tr>
                                    <td>Weapon type</td>
                                    <td>
                                        <input type="radio" id="wtMelee1" name="weaponType1" value="Melee"/><span id="spMelee1" style="cursor: pointer;"> Melee</span>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type="radio" id="wtRanged1" name="weaponType1" value="Ranged"/><span id="spRanged1" style="cursor: pointer;"> Ranged</span>
                                    </td>
                                </tr>
                
                            </table>            
                </td>
                <td style="padding-left: 20px; padding-right:20px; text-align: center; vertical-align: top; width: 100px;">
                    <button id="copyright" title="Copy Right">&gt;&gt;</button>
                    <br/>
                    <button id="copyleft" title="Copy left">&lt;&lt;</button>
                    <br/>
                    <br/>
                    <br/>
                    <a id='linkleftleft' href="#" title='Link to the left weapon' target='_blank'>&lt; Link</a>
                    <br/>
                    <br/>
                    <a id='linkrightright' href="#" title='Link to the right weapon' target='_blank'>Link &gt;</a>
                    <br/>
                    <br/>
                    <a id='linkboth' href="#" title='Link to both weapons' target='_blank'>&lt; Link &gt;</a>
                    <br/>
                    <br/>
                    <button id="clear" title="Clear" onclick='document.location.search=""; return false;'>Clear</button>
                </td>
                <td style='vertical-align: top;'>
                    <table id="table2" style="border: 1px solid black;">
                        <tr>
                            <td>Weapon type</td>
                            <td>
                                <input type="radio" id="wtMelee2" name="weaponType2" value="Melee"/><span id="spMelee2" style="cursor: pointer;"> Melee</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;
                                <input type="radio" id="wtRanged2" name="weaponType2" value="Ranged"/><span id="spRanged2" style="cursor: pointer;"> Ranged</span>
                            </td>
                        </tr>
        
                    </table>            
                </td>
            </tr>
            <tr>
                <td colspan="3" align='center'>
                    <br/>
                    <h2>Comparison</h2>
                    <div>
                        <label style='cursor: pointer;'><input type='radio' name='comparemode' id='damagemode' checked='checked'/> Single hit damage</label>&nbsp;&nbsp;&nbsp;&nbsp;
                        <label style='cursor: pointer;'><input type='radio' name='comparemode' id='dpsmode'/> Damage per second</label>&nbsp;&nbsp;&nbsp;&nbsp;
                        <label style='cursor: pointer;'><input type='radio' name='comparemode' id='dpsreloadmode'/> DPS with reload</label>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <input type='checkbox' id='comparesortdesc' checked/><label for='comparesortdesc' style='cursor: pointer;'> Toughest enemies first</label>
                    </div>
                    <br/>
                    
                    <table id="table3" style="border: 1px solid black; border-collapse: collapse;">
                        <tr>
                            <td colspan='6' style="border: 1px solid black;">Enemy</td>
                            <td colspan="8" style="border: 1px solid black;">Left weapon</td>
                            <td colspan="8" style="border: 1px solid black;">Right weapon</td>
                        </tr>
                        <tr>
                            <td colspan='6' style="border: 1px solid black;">Resistances</td>
                            <td colspan='6' style="border: 1px solid black;">Actual</td>
                            <td rowspan='2' style="border: 1px solid black;">Damage</td>
                            <td rowspan='2'  style="border: 1px solid black;">Compare<br>Right</td>
                            <td colspan='6' style="border: 1px solid black;">Actual</td>
                            <td rowspan='2'  style="border: 1px solid black;">Damage</td>
                            <td rowspan='2'  style="border: 1px solid black;">Compare<br>Left</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black;" title='Ballistic Resistance'>DR</td>
                            <td style="border: 1px solid black;" title='Energy Resistance'>ER</td>
                            <td style="border: 1px solid black;" title='Radiation Resistance'>RR</td>
                            <td style="border: 1px solid black;" title='Fire Resistance'>FR</td>
                            <td style="border: 1px solid black;" title='Cryo Resistance'>CR</td>
                            <td style="border: 1px solid black;" title='Poison Resistance'>PR</td>
                            <td style="border: 1px solid black;" id='ActualDRLeft'>DR</td>
                            <td style="border: 1px solid black;" id='ActualERLeft'>ER</td>
                            <td style="border: 1px solid black;" id='ActualRRLeft'>RR</td>
                            <td style="border: 1px solid black;" id='ActualFRLeft'>FR</td>
                            <td style="border: 1px solid black;" id='ActualCRLeft'>CR</td>
                            <td style="border: 1px solid black;" id='ActualPRLeft'>PR</td>
                            <td style="border: 1px solid black;" id='ActualDRRight'>DR</td>
                            <td style="border: 1px solid black;" id='ActualERRight'>ER</td>
                            <td style="border: 1px solid black;" id='ActualRRRight'>RR</td>
                            <td style="border: 1px solid black;" id='ActualFRRight'>FR</td>
                            <td style="border: 1px solid black;" id='ActualCRRight'>CR</td>
                            <td style="border: 1px solid black;" id='ActualPRRight'>PR</td>
                        </tr>
                    </table> 
                </td>
            </tr>
        </table>
        </center>
        <script>
            var allWeapons = new Map();
            var allEffects = new Map();
            var enemyCategories = [];

            var damages = [0, 0, 0];
            var damagesEnergy = [0, 0, 0];
            var damagesRadiation = [0, 0, 0];
            var damagesFire = [0, 0, 0];
            var damagesCold = [0, 0, 0];
            var damagesPoison = [0, 0, 0];

            var ignores = [0, 0, 0];
            var armorDr = [0, 0, 0];
            var speeds = [1, 1, 1];
            var enemySelection = [ null, null, null ];
            var enemySelectionName = [ null, null, null ];
            var enemySelectionLevel = [ null, null, null ];
            var calcModes = [ null, null, null ];

            var baseDamagesBallistic = [0, 0, 0];
            var baseDamagesEnergy = [0, 0, 0];
            var baseDamagesRadiation = [0, 0, 0];
            var baseDamagesFire = [0, 0, 0];
            var baseDamagesCold = [0, 0, 0];
            var baseDamagesPoison = [0, 0, 0];
            var enemyDamageResistances = [0, 0, 0];

            var speedsWithReload = [0, 0, 0];

            // -------------------------------------------------------------------------------
            // Setup weapon data
            // -------------------------------------------------------------------------------

            var speedSlow = 0.55;
            var speedMedium = 0.88;
            var speedFast = 1.26;
            var speedVFast = 4.2;
            
            allWeapons.set("Melee", [
                {
                    name: "Board",
                    category: "One-handed",
                    speed: speedSlow,
                    level:  [ 1,  5, 15, 25, 35, 45],
                    damage: [25, 30, 35, 40, 45, 50],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 15,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Puncturing",
                                    damageMultPercent: 20,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Bladed",
                                    damageMultPercent: 25
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Deathclaw Gauntlet",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [30, 40, 50],
                    damage: [45, 50, 55],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Extra claw",
                                    damageMultPercent: 20,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Unstoppable Monster",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    special: true,
                    info: "WeaponUnstoppableMonster",
                    level: [30, 40, 50],
                    damage: [45, 50, 55],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Extra claw",
                                    damageMultPercent: 20,
                                    preinstalled: true
                                }
                            ]
                        }
                    ],
                    legendaryPrefix: "Bloodied",
                    legendaryMajor: "40% power attack damage",
                    // legendaryMinor: "40% less damage while power attacking"
                },
                {
                    name: "Super Sledge",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [30, 40, 50],
                    damage: [65, 75, 85],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Heating coil",
                                    addDamageFireLeveled: [5, 7.5, 10]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Tenderizer",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [10, 20, 30, 40, 50],
                    damage: [35, 45, 55, 67, 75],
                    mods: [
                    {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Peppered",
                                    damageMultPercent: 16
                                },
                                {
                                    name: "Salty",
                                    damageMultPercent: 5
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Sheepsquatch Staff",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [10, 20, 30, 40, 50],
                    damage: [35, 45, 55, 65, 75],
                    mods: [
                    {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                }
                            ]
                        }
                    ]
                },{
                    name: "Sheepsquatch Club",
                    category: "One-handed",
                    speed: speedSlow,
                    level: [10, 20, 30, 40, 50],
                    damage: [20, 30, 40, 50, 60],
                    mods: [
                    {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                }
                            ]
                        }
                    ]
                },{
                    name: "Power Fist",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [30, 40, 50],
                    damage: [48, 53, 58],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Puncturing",
                                    ignoreDRPercent: 20,
                                },
                                {
                                    name: "Heated",
                                    addDamageEnergyLeveled: [6.7, 8.4, 10]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Mole Miner Gauntlet",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [20, 30, 40, 50],
                    damage: [30, 35, 40, 45],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Third Blade",
                                    damageMultPercent: 15,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Death Tambo",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [15, 25, 35, 45],
                    damage: [30, 35, 40, 45],
                    mods: []
                },
                {
                    name: "Machete",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [15, 17, 20, 25, 30, 35, 40],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Serrated",
                                    damageMultPercent: 20,
                                },
                                {
                                    name: "Sacrificial",
                                    damageMultPercent: 15,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Bowie Knife",
                    category: "One-handed",
                    kind: "knife",
                    speed: speedFast,
                    level: [10, 15, 25, 35, 45],
                    damage: [10, 15, 20, 25, 30],
                    mods: []
                },
                {
                    name: "Boxing Glove",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [5, 15, 25, 35, 45],
                    damage: [13, 18, 23, 28, 34],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Lead Lining",
                                    damageMultPercent: 20,
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 10,
                                },
                                {
                                    name: "Puncturing",
                                    ignoreDRPercent: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Cultist Blade",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [10, 20, 30, 40, 50],
                    damage: [21, 26, 31, 36, 41],
                    mods: []
                },
                {
                    name: "Cultist Dagger",
                    category: "One-handed",
                    kind: "knife",
                    speed: speedFast,
                    level: [15, 25, 35, 45],
                    damage: [20, 25, 28, 32],
                    mods: []
                },
                {
                    name: "Multi-purpose Axe",
                    category: "One-handed",
                    speed: speedSlow,
                    level: [1, 5, 15, 25, 35, 45],
                    damage: [26, 32, 42, 52, 62, 69],
                    mods: []
                },
                {
                    name: "Combat Knife",
                    category: "One-handed",
                    kind: "knife",
                    speed: speedFast,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [9, 13, 17, 21, 25, 29, 33],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Serrated",
                                    damageMultPercent: 10,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Hatchet",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [15, 17, 20, 25, 30, 35, 40],
                    mods: []
                },
                {
                    name: "Pickaxe",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [5, 15, 25, 35, 45],
                    damage: [32, 41, 48, 55, 60],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Cursed Pickaxe",
                    category: "Two-handed",
                    info: "WeaponCursedPickaxe",
                    speed: speedSlow * 1.2,
                    level: [5, 15, 25, 35, 45],
                    damage: [32 * 1.15, 41 * 1.15, 48 * 1.15, 55 * 1.15, 60 * 1.15],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 15
                                }
                            ]
                        }
                    ],
                    legendaryPrefix: "Bloodied",
                    legendaryMajor: "40% power attack damage",
                    // legendaryMinor: "90% reduced weight"
                },
                {
                    name: "Ski Sword",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [15, 25, 35, 45],
                    damage: [35, 40, 45, 50],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Metal Shards",
                                    damageMultPercent: 16,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Skate",
                                    damageMultPercent: 15,
                                    ignoreDRPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Rolling pin",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [9, 12, 15, 19, 22, 25, 28],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 10,
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 25,
                                    ignoreDRPercent: 15
                                },
                            ]
                        },
                        {
                            slot: "Material",
                            options: [
                                {
                                    name: "Wood"
                                },
                                {
                                    name: "Chef's",
                                    damageMultPercent: 20,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Knuckles",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [8, 10, 15, 20, 25, 30, 35],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 10
                                },
                                {
                                    name: "Bladed",
                                    damageMultPercent: 10,
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 10,
                                    ignoreDRPercent: 15,
                                },
                                {
                                    name: "Puncturing",
                                    damageMultPercent: 10,
                                    ignoreDRPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Lead Pipe",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [14, 16, 19, 24, 29, 34, 39],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 10,
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 10,
                                    ignoreDRPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Tire Iron",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [12, 14, 17, 20, 23, 26, 29],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Bladed",
                                    damageMultPercent: 10,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Blade of Bastet",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [25, 35, 45],
                    damage: [42, 46, 52],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Serrated",
                                    damageMultPercent: 20,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Fire Axe",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [5, 15, 25, 35, 45],
                    damage: [35, 45, 55, 65, 72],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Spikes",
                                    ignoreDRPercent: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Guitar Sword",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [15, 25, 35, 45],
                    damage: [35, 40, 45, 50],
                    mods: []
                },
                {
                    name: "Assaultron Blade",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [25, 35, 45],
                    damage: [28, 33, 40],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyLeveled: [12.3, 15.4, 18.5]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Pitchfork",
                    category: "Two-handed",
                    speed: speedMedium,
                    level: [1, 5, 15, 25, 35, 45],
                    damage: [22, 27, 32, 37, 42, 47],
                    mods: [
                        {
                            slot: "Forks",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Barbed",
                                    damageMultPercent: 15
                                },
                                {
                                    name: "Flaming",
                                    damageMultPercent: 15,
                                    addDamageFireLeveled: [2, 3.5, 5, 6.5, 8, 9.5]
                                },
                                {
                                    name: "Barbed Flaming",
                                    damageMultPercent: 15,
                                    addDamageFireLeveled: [2, 3.5, 5, 6.5, 8, 9.5]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Revolutionary Sword",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [10, 20, 30, 40, 50],
                    damage: [24, 29, 34, 39, 44],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Serrated",
                                    damageMultPercent: 10
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyPercentLeveled: [10, 15, 20, 25, 30]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "War Drum",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [15, 25, 35, 45],
                    damage: [48, 58, 68, 78],
                    mods: []
                },
                {
                    name: "Walking Cane",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [17, 19, 22, 27, 32, 37, 42],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Barbed",
                                    damageMultPercent: 16,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Security Baton",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [5, 15, 25, 35, 45],
                    damage: [15, 25, 30, 35, 40],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyLeveled: [6.2, 9.3, 12.3, 15.4, 18.5]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Baton",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [5, 15, 25, 35, 45],
                    damage: [15, 25, 30, 35, 40],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyLeveled: [6.2, 9.3, 12.3, 15.4, 18.5]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Meat Hook",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    level: [5, 15, 25, 35, 45],
                    damage: [14, 19, 24, 29, 34],
                    mods: [
                        {
                            slot: "Hooks",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Extra",
                                    damageMultPercent: 20,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Pipe Wrench",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [13, 15, 18, 21, 24, 27, 30],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hooked",
                                    damageMultPercent: 10
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 15,
                                },
                                {
                                    name: "Extra Heavy",
                                    damageMultPercent: 25,
                                },
                                {
                                    name: "Puncturing",
                                    damageMultPercent: 10,
                                    ignoreDRPercent: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Ripper",
                    category: "One-handed",
                    speed: speedVFast,
                    level: [40],
                    damage: [2],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Extended",
                                    damageMultPercent: 100,
                                    addDamageBallisticLeveledAfter: [2 / speedVFast]
                                },
                                {
                                    name: "Curved",
                                    damageMultPercent: 50,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Mr. Handy Buzz Blade",
                    category: "One-handed",
                    speed: speedVFast,
                    level: [15, 25, 35, 45],
                    damage: [2, 4, 6, 8],
                    mods: [ {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyPercentLeveled: [10, 15, 20, 25]
                                }
                            ]
                        }]
                },
                {
                    name: "Chinese Officer Sword",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [5, 15, 25, 35, 45],
                    damage: [16, 21, 26, 31, 36],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Serrated",
                                    damageMultPercent: 10,
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyPercentLeveled: [5, 10, 15, 20, 25]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Grognak's Axe",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [30, 40, 50],
                    damage: [65, 75, 85],
                    mods: []
                },
                {
                    name: "Shishkebab",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [35, 45],
                    damage: [22, 27],
                    damageFire: [22, 27],
                    mods: [
                    {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Extra Flame Jets",
                                    addDamageFireLeveled: [8, 9.5]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Sledgehammer",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [10, 20, 30, 40, 50],
                    damage: [43, 50, 57, 65, 71],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 15,
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 20,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Heavy Rocket",
                                    damageMultPercent: 25,
                                },
                                {
                                    name: "Heavy Spiked",
                                    damageMultPercent: 25,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Heavy Sharp",
                                    damageMultPercent: 25,
                                },
                                {
                                    name: "Heavy Shearing Sharp Rocket",
                                    damageMultPercent: 15,
                                    addDamageEnergyLeveled: [3, 4.5, 7, 8.5, 10]
                                },
                                {
                                    name: "Puncturing",
                                    damageMultPercent: 10
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Baseball Bat",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [1, 5, 15, 25, 35, 45],
                    damage: [28, 35, 40, 45, 50, 55],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Barbed Wire",
                                    damageMultPercent: 20,
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Nails",
                                    damageMultPercent: 25,
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Razors",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Chains",
                                    damageMultPercent: 50
                                },
                                {
                                    name: "Saw Blades",
                                    damageMultPercent: 75
                                },
                                {
                                    name: "Bladed Rocket",
                                    damageMultPercent: 75
                                },
                                {
                                    name: "Heated Rocket",
                                    damageMultPercent: 20
                                },
                                {
                                    name: "Spiked Rocket",
                                    damageMultPercent: 25,
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Puncturing Rocket",
                                    damageMultPercent: 25,
                                    ignoreDRPercent: 20
                                }
                            ]
                        },
                        {
                            slot: "Material",
                            options: [
                                {
                                    name: "Wood"
                                },
                                {
                                    name: "All Star",
                                    damageMultPercent: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Drill",
                    category: "One-handed",
                    speed: speedVFast,
                    level: [20],
                    damage: [1],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Piercing",
                                    addDamageBallisticLeveledAfter: [2],
                                    ignoreDRPercent: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Spear",
                    category: "Two-handed",
                    speed: speedMedium,
                    level: [15, 25, 35, 45],
                    damage: [43, 48, 53, 58],
                    mods: [
                    ]
                },
                {
                    name: "Pole Hook",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [10, 20, 30, 40, 50],
                    damage: [43, 50, 57, 65, 71],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Multihook",
                                    damageMultPercent: 50,
                                    ignoreDRPercent: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Sheperd's Crook",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [10, 20, 30, 40, 50],
                    damage: [10, 20, 30, 40, 50],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 10,
                                    ignoreDRPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Bone Club",
                    category: "One-handed",
                    speed: speedMedium,
                    level: [15, 25, 35, 45],
                    damage: [21, 31, 41, 51],
                    mods: []
                },
                {
                    name: "Bone Hammer",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [15, 25, 35, 45],
                    damage: [50, 60, 70, 80],
                    mods: []
                },
                {
                    name: "Bear Arm",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedSlow,
                    level: [20, 30, 40, 50],
                    damage: [35, 40, 45, 50],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 10,
                                },
                                {
                                    name: "Puncturing",
                                    ignoreDRPercent: 15
                                }
                            ]
                        }]
                },
                {
                    name: "Cattle Prod",
                    category: "One-handed",
                    speed: speedMedium,
                    level:  [ 5,10,15,20,25,30,35,40,45,50],
                    damage: [18,22,30,33,36,39,42,45,48,54],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Electrified",
                                    addDamageEnergyLeveled: [20,20,20,20,20,20,20,20,20,20]
                                }
                            ]
                        }
                    ]
                },
                /*
                {
                    name: "Auto-axe",
                    category: "One-handed",
                    speed: speedVFast,
                    level: [30,40,50],
                    damage: [10,18,26],
                    mods: []
                },
                */
                {
                    name: "Gauntlet",
                    category: "Unarmed",
                    speed: speedMedium,
                    level: [40,50],
                    damage: [45,50],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Bladed",
                                    damageMultPercent: 15
                                },
                                {
                                    name: "Shock Pads",
                                    damageMultPercent: 15,
                                    addDamageEnergyLeveled: [20, 20]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Shovel",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [1,5,15,25,35,45],
                    damage: [15,20,25,30,35,40],
                    mods: []
                },
                {
                    name: "Cursed Shovel",
                    category: "Two-handed",
                    info: "WeaponCursedShovel",
                    speed: speedSlow * 1.2,
                    level: [1,5,15,25,35,45],
                    damage: [15 * 1.15, 20 * 1.15, 25 * 1.15, 30 * 1.15, 35 * 1.15, 40 * 1.15],
                    mods: [],
                    legendaryPrefix: "Executioner's",
                    legendaryMajor: "40% increased swing speed",
                    // legendaryMinor: "90% reduced weight"
                },
                {
                    name: "War Glaive",
                    category: "Two-handed",
                    speed: speedSlow,
                    level: [30, 40, 50],
                    damage: [62, 72, 82],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Cryo Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageColdLeveled: [62, 72, 82]
                                },
                                {
                                    name: "Flaming Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageFireLeveled: [62, 72, 82]
                                },
                                {
                                    name: "Plasma Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageEnergyLeveled: [62, 72, 82]
                                },
                                {
                                    name: "Shocking Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageEnergyLeveled: [62, 72, 82]
                                },
                            ]
                        }
                    ]
                },
                {
                    name: "Oathbreaker",
                    category: "Two-handed",
                    speed: speedSlow,
                    special: true,
                    info: "WeaponOathbreaker",
                    level: [30, 40, 50],
                    damage: [62, 72, 82],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Cryo Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageColdLeveled: [62, 72, 82]
                                },
                                {
                                    name: "Flaming Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageFireLeveled: [62, 72, 82]
                                },
                                {
                                    name: "Plasma Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageEnergyLeveled: [62, 72, 82],
                                    preinstalled: true
                                },
                                {
                                    name: "Shocking Blade",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageEnergyLeveled: [62, 72, 82]
                                },
                            ]
                        }
                    ],
                    legendaryMajor: "40% power attack damage"
                },
                {
                    name: "Chainsaw",
                    category: "One-handed",
                    speed: speedVFast,
                    damage: [1],
                    level: [20],
                    mods: [
                        {
                            slot: "Bar",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Dual",
                                    damageMultPercent: 50
                                },
                                {
                                    name: "Bow",
                                    damageMultPercent: 25,
                                    ignoreDRPercent: 10
                                },
                                {
                                    name: "Long Bow"
                                }
                            ]
                        },
                        {
                            slot: "Scope",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Flame",
                                    damageBallisticMultPercent: 20,
                                    debuffViaMultiply: true,
                                    addDamageFireLeveled: [ 10 ]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Commie Whacker",
                    category: "One-handed",
                    speed: speedMedium,
                    damage: [5],
                    level: [1],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Bladed",
                                    damageMultPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Golf Club",
                    category: "Two-handed",
                    speed: speedSlow,
                    level:  [ 1],
                    damage: [24],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Puncturing",
                                    damageMultPercent: 10,
                                    ignoreDRPercent: 15
                                },
                                {
                                    name: "Bladed",
                                    damageMultPercent: 15,
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 15,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Pool Cue",
                    category: "Two-handed",
                    speed: speedSlow,
                    level:  [ 1,  5, 15, 25, 35, 45],
                    damage: [21, 26, 31, 36, 41, 46],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Barbed",
                                    damageMultPercent: 15,
                                    ignoreDRPercent: 15,
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Sickle",
                    category: "One-handed",
                    speed: speedMedium,
                    level:  [ 1,  5, 10, 20, 30, 40, 50],
                    damage: [14, 16, 20, 24, 28, 32, 36],
                    mods: []
                },
                {
                    name: "Switchblade",
                    category: "One-handed",
                    speed: speedFast,
                    level:  [10, 20, 30, 40, 50],
                    damage: [14, 18, 22, 26, 30],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Serrated",
                                    damageMultPercent: 15
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Paddle Ball",
                    category: "One-handed",
                    kind: "ballistic",
                    speed: 2.5,
                    level: [1],
                    damage: [1]
                },
                {
                    name: "Plasma Cutter",
                    category: "One-handed",
                    speed: speedMedium,
                    meleeFactor: 0,
                    level: [30, 40, 50],
                    damage: [56, 65, 74],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard",
                                    damageBallisticMultPercent: -65,
                                    debuffViaMultiply: true,
                                    addDamageEnergyLeveled: [51, 59, 68]
                                },
                                {
                                    name: "Flaming",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageFireLeveled: [51, 59, 68]
                                },
                                {
                                    name: "Shocking",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageEnergyLeveled: [51, 59, 68]
                                },
                                {
                                    name: "Cryo",
                                    damageBallisticMultPercent: -50,
                                    debuffViaMultiply: true,
                                    addDamageColdLeveled: [51, 59, 68]
                                },
                            ]
                        }
                    ]
                },
                {
                    name: "Electro Enforcer",
                    category: "One-handed",
                    speed: speedMedium,
                    meleeFactor: 0,
                    formId: "00630C7D",
                    level: [20, 30, 40, 50],
                    damage: [20, 25, 30, 35],
                    mods: [
                        {
                            slot: "Tip",
                            options: [
                                {
                                    name: "Standard",
                                    addDamageEnergyLeveled: [35, 40, 45, 50]
                                },
                                {
                                    name: "Spiked",
                                    addDamageEnergyLeveled: [35, 40, 45, 50],
                                    ignoreDRPercent: 10
                                },
                                {
                                    name: "Poisoned",
                                    addDamagePoisonLeveled: [35, 40, 45, 50],
                                },
                                {
                                    name: "Freezing",
                                    addDamageColdLeveled: [35, 40, 45, 50],
                                },
                                {
                                    name: "Overcharged",
                                    addDamageEnergyLeveled: [43, 50, 56, 62]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Gulper Smacker",
                    category: "One-handed",
                    speed: speedMedium,
                    formId: "00633475",
                    special: true,
                    info: "WeaponGulperSmacker",
                    level:  [ 1, 5,10,15,20,25,30,35,40,45,50],
                    damage: [29,35,38,41,44,47,50,53,56,59,62],
                    mods: [
                        {
                            slot: "Blade",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Sharp",
                                    damageMultPercent: 15
                                },
                                {
                                    name: "Chain-wrapped",
                                    damageMultPercent: 50
                                }
                            ]
                        },
                        {
                            slot: "Shaft",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Acidic Gulper Hand",
                                    addDamagePoisonLeveled: [5,5,5,5,5,5,5,5,5,5,5]
                                },
                                {
                                    name: "Spiked",
                                    damageMultPercent: 16,
                                    ignoreDRPercent: 20
                                }
                            ]
                        },
                        {
                            slot: "Special",
                            options: [
                                {
                                    name: "Bonus vs Gulpers",
                                    versusMultPercent: 50,
                                    versus: ["Gulper"]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Tone Death",
                    category: "Unarmed",
                    kind: "unarmed",
                    speed: speedMedium,
                    formId: "006477EF",
                    special: true,
                    info: "WeaponToneDeath",
                    level: [15, 25, 35, 45],
                    damage: [30, 35, 40, 45],
                    mods: [],
                    //legendaryPrefix: "Suppressor's",
                    legendaryMajor: "40% increased swing speed",
                    legendaryMinor: "Strength"
                },
                {
                    name: "The Debilitator",
                    category: "Two-handed",
                    speed: speedSlow,
                    formId: "006477ED",
                    special: true,
                    info: "WeaponTheDebilitator",
                    level: [30, 40, 50],
                    damage: [65, 75, 85],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Heating coil",
                                    addDamageFireLeveled: [5, 7.5, 10]
                                }
                            ]
                        }
                    ],
                    legendaryPrefix: "Mutant slayer's",
                    legendaryMajor: "40% increased swing speed",
                    legendaryMinor: "Strength",
                },
                {
                    name: "Auto Axe",
                    category: "Two-handed",
                    speed: speedVFast,
                    level:  [20, 25, 30, 35, 40, 45, 50],
                    damage: [10, 11, 12, 14, 18, 22, 26],
                    mods: [
                        {
                            slot: "Main",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Burning",
                                    damageMultPercent: 20,
                                    addDamageFireLeveled: [8, 8, 8, 8, 8, 8, 8]
                                },
                                {
                                    name: "Electrified",
                                    damageMultPercent: 20,
                                    addDamageEnergyLeveled: [8, 8, 8, 8, 8, 8, 8]
                                },
                                {
                                    name: "Poisoned",
                                    damageMultPercent: 20,
                                    addDamagePoisonLeveled: [8, 8, 8, 8, 8, 8, 8]
                                },
                                {
                                    name: "Turbo",
                                    damageMultPercent: -33,
                                    speedAddPercent: 100
                                }
                            ]
                        }
                    ]
                },
            ]);

            // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

            // the default magazine selection for typical weapons
            var standardAPMagazines = {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                    ignoreDRPercent: 0
                                },
                                {
                                    name: "Stinging",
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Piercing",
                                    ignoreDRPercent: 20,
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40
                                },
                            ]
                        };
            
            var standardMuzzle = {
                slot: "Muzzle",
                options: [
                    {
                        name: "Standard",
                    },
                    {
                        name: "Suppressor",
                        silencer: true
                    }
                ]  
            };

            var standardArrows = {
                slot: "Arrow",
                options: [
                    {
                        name: "Standard"
                    },
                    {
                        name: "Plasma",
                        addDamageEnergyLeveled: [20,20,20,20,20,20,20,20,20,20,20]
                    },
                    {
                        name: "Cryo",
                        addDamageColdLeveled: [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
                    },
                    {
                        name: "Explosive",
                        addDamageExplosiveLeveled: [15,15,15,15,15,15,15,15,15,15,15],
                    },
                    {
                        name: "Flaming",
                        addDamageFireLeveled: [ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4]
                    },
                    {
                        name: "Poison",
                        addDamagePoisonLeveled: [ 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5]
                    },
                    {
                        name: "Ultracite",
                        damageMultPercent: 25,
                        versusMultPercent: 35,
                        versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"]
                    },
                ]
            };

            var primeMod = {
                name: "Prime",
                damageMultPercent: 25,
                versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                versusMultPercent: 35
            };
            var scorchKillerMod = {
                name: "Scorch killer's",
                damageMultPercent: -20,
                versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                versusAddPercent: 50
            };
            var viciousMod = {
                name: "Vicious",
                criticalDamageMultiply: 17,
                patchOverride: {
                    "P34": {
                        criticalDamageMultiply: 50
                    }
                }
            };
            var fierceMod = {
                name: "Fierce",
                speedAddPercent: 25,
                criticalDamageMultiply: 17,
                patchOverride: {
                    "P34": {
                        criticalDamageMultiply: 50
                    }
                }
            };
            var snappyMod = {
                name: "Snappy",
                speedAddPercent: 25,
                criticalDamageMultiply: 17,
                patchOverride: {
                    "P34": {
                        criticalDamageMultiply: 50
                    }
                }
            };
            var severeMod = {
                name: "Severe",
                criticalDamageMultiply: 17,
                damageMultPercent: 12.5,
                patchOverride: {
                    "P34": {
                        criticalDamageMultiply: 50
                    }
                }
            };
            var hairTriggerReloadMod = {
                name: "Hair trigger",
                reloadTime: -35,
                speedAddPercent: 55,
            };

            function createCombatRifleReceivers(isFixer) {
                return {
                    slot: "Receiver",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Automatic",
                            damageMultPercent: -10,
                            speedSet: 7.5,
                        },
                        {
                            name: "Powerful Automatic",
                            damageMultPercent: 11.11,
                            speedSet: 7.5,
                        },
                        {
                            name: "Hair Triggered",
                            speedSet: 5,
                        },
                        {
                            name: "Focused",
                            speedSet: 7.5,
                        },
                        {
                            name: "Hasty .38",
                            damageMultPercent: -25,
                            speedSet: 4,
                        },
                        {
                            name: "Refined .38",
                            damageMultPercent: -8.75,
                        },
                        {
                            name: "Critical .38",
                            criticalDamageMultiply: 17,
                            damageMultPercent: -25,
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 50
                                }
                            }
                        },
                        {
                            name: "Automatic .38",
                            damageMultPercent: -25,
                            speedSet: 7.5,
                        },
                        severeMod,
                        {
                            name: "Steadfast",
                            speedSet: 4,
                        },
                        {
                            name: "Tweaked Automatic",
                            speedSet: 7.5,
                            criticalDamageMultiply: 17,
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 50
                                }
                            }
                        },
                        snappyMod,
                        {
                            name: "True"
                        },
                        {
                            name: "Calibrated",
                            criticalDamageMultiply: 34,
                            preinstalled: isFixer,
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 100
                                }
                            }
                        },
                        severeMod,
                        viciousMod,
                        {
                            name: "Vigorous",
                            speedSet: 4,
                        },
                        {
                            name: "Hardened",
                            damageMultPercent: 25
                        },
                        scorchKillerMod,
                        primeMod,
                        {
                            name: "Prime Automatic",
                            damageMultPercent: 15,
                            speedSet: 7.5,
                            versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                            versusMultPercent: 35
                        }
                    ]
                };
            }

            function createPlasmaBarrels(isSlugBuster) {
                return {
                    slot: "Barrel",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Flamer",
                            damageMultPercent: 25,
                            automatic: true,
                            speedSet: 9.1,
                            clipSizeSet: 300
                        },
                        {
                            name: "Splitter",
                            damageMultPercent: 10
                        },
                        {
                            name: "Sniper",
                            damageMultPercent: 50,
                            preinstalled: isSlugBuster,
                            clipSizeAdd: -21 // -70%
                        },
                        {
                            name: "Automatic",
                            damageMultPercent: -15,
                            speedSet: 9.1
                        },
                    ]
                };
            }

            function createPlasmaCapacitors(isSlugBuster) {
                return {
                    slot: "Capacitor",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Calibrated",
                            criticalDamageMultiply: 34,
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 100
                                }
                            }
                        },
                        {
                            name: "Calibrated Beta Wave",
                            criticalDamageMultiply: 34,
                            addDamageFireLeveled: [3, 3, 3, 3],
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 100
                                }
                            }
                        },
                        {
                            name: "Vicious",
                            criticalDamageMultiply: 17,
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 50
                                }
                            }
                        },
                        {
                            name: "Refined Beta Wave",
                            preinstalled: isSlugBuster
                        },
                        {
                            name: "Pulse",
                            damageMultPercent: -15,
                            debuffViaMultiply: true
                        },
                        {
                            name: "Prime",
                            damageMultPercent: 25,
                            versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                            versusMultPercent: 35
                        }
                    ]
                };
            }

            function createStandardSights(weaponType, hasReflex, hasRecon) {
                var result = {
                    slot: "Sights",
                    options: [
                        {
                            name: "None"
                        }
                    ]
                };

                if (hasReflex) {
                    result.options.push({
                        name: "Reflex Sight",
                    });
                }

                result.options.push({
                    name: "Short Scope",
                    scope: true
                });
                result.options.push({
                    name: "Medium Scope",
                    scope: true
                });
                result.options.push({
                    name: "Long Scope",
                    scope: true
                });

                result.options.push({
                    name: "Short Night Vision Scope",
                    scope: true,
                });
                result.options.push({
                    name: "Medium Night Vision Scope",
                    scope: true,
                    preinstalled: weaponType === "Slug Buster"
                });
                result.options.push({
                    name: "Long Night Vision Scope",
                    scope: true,
                    preinstalled: weaponType === "Doctor's Orders"
                });

                if (hasRecon) {
                    result.options.push({
                        name: "Short Recon Scope",
                        scope: true
                    });
                    result.options.push({
                        name: "Long Recon Scope",
                        scope: true
                    });
                }

                return result;
            }

            function createLaserCapacitors() {
                return {
                    slot: "Capacitor",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Hair Trigger",
                            speedMultPercent: 33
                        },
                        snappyMod,
                        {
                            name: "Speedy",
                            speedMultPercent: 17
                        },
                        {
                            name: "Calibrated",
                            criticalDamageMultiply: 34
                        },
                        viciousMod,
                        {
                            name: "Severe Beta Wave",
                            criticalDamageMultiply: 17,
                            addDamageFireLeveled: [3, 3, 3, 3, 3, 3, 3]
                        },
                        primeMod,
                    ]
                };
            }

            function createLaserBarrels() {
                return {
                    slot: "Barrel",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Sniper",
                            damageMultPercent: 25
                        },
                        {
                            name: "Standard Automatic",
                            damageMultPercent: -10,
                            debuffViaMultiply: true,
                            speedSet: 7.5
                        },
                        {
                            name: "True Automatic",
                            damageMultPercent: -10,
                            debuffViaMultiply: true,
                            speedSet: 7.5
                        },
                        {
                            name: "Stabilized Automatic",
                            damageMultPercent: -10,
                            debuffViaMultiply: true,
                            speedSet: 7.5
                        },
                    ]
                };
            }

            function createMuzzleWithBeam(basedamages) {
                var splitter = [];
                var splitterbugged = [];
                for (var d of basedamages) {
                    splitter.push(d * 1.1);
                    splitterbugged.push(d * 4.4)
                }
                return {
                            slot: "Muzzle",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Beam Splitter",
                                    addDamageEnergyLeveled: splitter,
                                    speedMultPercent: -10,
                                },
                                {
                                    name: "Beam Splitter (bugged)",
                                    addDamageEnergyLeveled: splitterbugged,
                                    speedMultPercent: -10,
                                },
                                {
                                    name: "Beam Focuser"
                                }
                            ]
                        };

            }

            function createSMGReceiver(weaponName) {
                return {
                    slot: "Receiver",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Hardened",
                            damageMultPercent: 25
                        },
                        {
                            name: "Refined",
                            damageMultPercent: 12.5,
                            preinstalled: weaponName === "Old Guard's"
                        },
                        {
                            name: "Calibrated",
                            criticalDamageMultiply: 34,
                            patchOverride: {
                                "P34": {
                                    criticalDamageMultiply: 100
                                }
                            }
                        },
                        severeMod,
                        viciousMod,
                        scorchKillerMod,
                        primeMod
                    ]
                }
            }

            var pipeBoltActionReceivers = {
                slot: "Receiver",
                options: [
                    {
                        name: "Standard"
                    },
                    {
                        name: "Hardened",
                        damageMultPercent: 25
                    },
                    {
                        name: "Calibrated",
                        criticalDamageMultiply: 34,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 100
                            }
                        }
                    },
                    {
                        name: "Hasty .38",
                        damageMultPercent: -25,
                        speedSet: 4,
                    },
                    {
                        name: "Critical .38",
                        damageMultPercent: -25,
                        criticalDamageMultiply: 17,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 50
                            }
                        }
                    },
                    snappyMod,
                    severeMod,
                    viciousMod,
                    primeMod
                ]
            };

            var standardAssaultRifleReceivers = {
                slot: "Receiver",
                options: [
                    {
                        name: "Standard"
                    },
                    {
                        name: "Automatic",
                        damageMultPercent: -10,
                        speedSet: 7.5
                    },
                    {
                        name: "Powerful Automatic",
                        damageMultPercent: 11.11,
                        speedSet: 7.5
                    },
                    {
                        name: "Hardened",
                        damageMultPercent: 25
                    },
                    viciousMod,
                    {
                        name: "Tweaked Automatic",
                        damageMultPercent: -10,
                        speedSet: 7.5,
                        criticalDamageMultiply: 17,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 50
                            }
                        }
                    },
                    scorchKillerMod,
                    primeMod,
                    {
                        name: "Prime Automatic",
                        damageMultPercent: 15,
                        speedSet: 7.5,
                        versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                        versusMultPercent: 35
                    }
                ]
            };

            var pipeGunReceivers = {
                slot: "Receiver",
                options: [
                    {
                        name: "Standard"
                    },
                    {
                        name: "Hardened",
                        damageMultPercent: 25
                    },
                    {
                        name: "Calibrated",
                        criticalDamageMultiply: 34,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 100
                            }
                        }
                    },
                    snappyMod,
                    severeMod,
                    viciousMod,
                    {
                        name: "Hasty .45",
                        speedAddPercent: 25,
                        damageMultPercent: 8
                    },
                    {
                        name: "Refined .45",
                        damageMultPercent: 12.5
                    },
                    {
                        name: "Precise .45",
                        damageMultPercent: 8
                    },
                    {
                        name: "Critical .45",
                        criticalDamageMultiply: 17,
                        damageMultPercent: 8,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 50
                            }
                        }
                    },
                    {
                        name: "Automatic",
                        damageMultPercent: -10,
                        speedAddPercent: 50
                    },
                    {
                        name: "Powerful Automatic",
                        damageMultPercent: 11.11,
                        speedAddPercent: 50
                    },
                    {
                        name: "Tweaked Automatic",
                        criticalDamageMultiply: 17,
                        speedSet: 7.5,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 50
                            }
                        }
                    },
                    {
                        name: "Prime Automatic",
                        damageMultPercent: 15,
                        speedAddPercent: 50,
                        versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                        versusMultPercent: 35
                    }
                ]
            };

            var pipeRevolverReceivers = {
                slot: "Receiver",
                options: [
                    {
                        name: "Standard"
                    },
                    {
                        name: "Hardened",
                        damageMultPercent: 25
                    },
                    {
                        name: "Calibrated",
                        criticalDamageMultiply: 34,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 100
                            }
                        }
                    },
                    severeMod,
                    snappyMod,
                    viciousMod,
                    {
                        name: ".38",
                        speedMultPercent: -10,
                        damageMultPercent: -12.5
                    },
                    {
                        name: "Refined .38",
                        speedMultPercent: -10,
                        damageMultPercent: -12.5
                    },
                    {
                        name: "Precise .38",
                        speedMultPercent: -10,
                        damageMultPercent: -25,
                    },
                    {
                        name: "Critical .38",
                        criticalDamageMultiply: 17,
                        speedMultPercent: -10,
                        damageMultPercent: -25,
                        patchOverride: {
                            "P34": {
                                criticalDamageMultiply: 50
                            }
                        }
                    },
                    primeMod,
                ]
            };

            function createStandardMagazines(drumName, baseClip, drumReload) {
                var result = {
                    slot: "Magazine",
                    options: [
                        {
                            name: "Standard"
                        },
                        {
                            name: "Stinging",
                            clipSizeAdd: Math.floor(baseClip / 4),
                            ignoreDRPercent: 20,
                        },
                        {
                            name: "Piercing",
                            reloadTimeMult: -15,
                            ignoreDRPercent: 20,
                        },
                        {
                            name: "Perforating",
                            ignoreDRPercent: 40,
                        },
                        {
                            name: "Quick",
                            reloadTimeMult: -30,
                        },
                        {
                            name: "Swift",
                            reloadTimeMult: -15,
                            clipSizeAdd: Math.floor(baseClip / 4),
                        },
                    ]
                };
                if (drumName) {
                    result.options.push(
                        {
                            name: "Large",
                            clipSizeAdd: Math.floor(baseClip / 2),
                            reloadTimeMult: drumReload
                        });
                }
                return result;
            }

            function createCombatShotgunReceivers() {
                return {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Automatic",
                                    damageMultPercent: -10,
                                    speedAddPercent: 10
                                },
                                {
                                    name: "Powerful Automatic",
                                    damageMultPercent: 11.11,
                                    speedAddPercent: 10
                                },
                                {
                                    name: "Focused Automatic",
                                    damageMultPercent: 11.11,
                                    speedAddPercent: 10
                                },
                                {
                                    name: "Tweaked Automatic",
                                    damageMultPercent: 11.11,
                                    speedAddPercent: 10,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Refined",
                                    damageMultPercent: 12.5
                                },
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod,
                                {
                                    name: "Prime Automatic",
                                    damageMultPercent: 15,
                                    speedAddPercent: 10,
                                    versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                                    versusMultPercent: 35
                                }
                            ]
                        };
            }

            allWeapons.set("Ranged", [
                {
                    name: "Handmade",
                    category: "Rifle",
                    kind: "ballistic",
                    formId: "00113854",
                    explosive: false,
                    silencer: true,
                    speed: 4,
                    clipSize: 20,
                    reloadTime: 3.033343,
                    level: [15, 25, 35, 45],
                    damage: [30, 35, 40, 45],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Speedy",
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Hair Trigger",
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Refined",
                                    damageMultPercent: 12.5,
                                },
                                {
                                    name: "Tuned",
                                    damageMultPercent: 12.5,
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                fierceMod,
                                severeMod,
                                viciousMod,
                                {
                                    name: "Automatic",
                                    damageMultPercent: -10,
                                    speedSet: 7.5
                                },
                                {
                                    name: "Tweaked Automatic",
                                    damageMultPercent: 12.5,
                                    speedSet: 7.5,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                {
                                    name: "Tweaked Automatic (bugged)",
                                    damageMultPercent: 12.5,
                                    speedSet: 7.5
                                },
                                {
                                    name: "Powerful Automatic",
                                    damageMultPercent: 12.5,
                                    speedSet: 7.5
                                },
                                scorchKillerMod,
                                primeMod,
                                {
                                    name: "Prime Automatic",
                                    damageMultPercent: 15,
                                    speedAddPercent: 87.5,
                                    versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                                    versusMultPercent: 35
                                },
                            ]
                        },
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Stinging",
                                    clipSizeAdd: 5,
                                    ignoreDRPercent: 20,
                                },
                                {
                                    name: "Piercing",
                                    reloadTimeMult: -10,
                                    clipSizeAdd: -10,
                                    ignoreDRPercent: 20,
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40,
                                },
                                {
                                    name: "Quick",
                                    reloadTimeMult: -30,
                                },
                                {
                                    name: "Swift",
                                    reloadTimeMult: -15,
                                    clipSizeAdd: 5,
                                },
                                {
                                    name: "Drum",
                                    clipSizeAdd: 10
                                },
                            ]
                        },
                        standardMuzzle,
                        createStandardSights("", true, false)
                    ]
                },
                {
                    name: "Hunting Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.3,
                    clipSize: 5,
                    reloadTime: 4.000010,
                    formId: "0004F46A",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [40, 45, 50, 55, 60, 65, 70],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: ".38",
                                    damageMultPercent: -25
                                },
                                {
                                    name: "Hasty .38",
                                    damageMultPercent: -25,
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Critical .38",
                                    damageMultPercent: -25,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                {
                                    name: ".50",
                                    damageMultPercent: 33.3
                                },
                                {
                                    name: "Hasty .50",
                                    damageMultPercent: 22.5,
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Critical .50",
                                    damageMultPercent: 22.5,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                snappyMod,
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod,
                            ]
                        },
                        createStandardMagazines("Large", 5),
                        standardMuzzle,
                        createStandardSights("", true, true)
                    ]
                },
                {
                    name: "Lever Action Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.5,
                    clipSize: 5,
                    reloadTime: 1.766677 / 5,
                    reloadOneByOne: 0.5,
                    formId: "00110E32",
                    level: [25, 35, 45],
                    damage: [65, 70, 75],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                {
                                    name: "Fierce",
                                    criticalDamageMultiply: 17,
                                    speedAddPercent: 25,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                scorchKillerMod,
                                primeMod,
                            ]
                        },
                        standardMuzzle,
                        createStandardSights("", true, false)
                    ]
                },
                {
                    name: "Black Powder Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.1,
                    clipSize: 1,
                    reloadTime: 8.000010,
                    formId: "00091BB4",
                    level: [15, 25, 35, 45],
                    damage: [150, 160, 170, 180],
                    mods: [ ]
                },
                {
                    name: "The Dragon",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.1,
                    clipSize: 1,
                    reloadTime: 13.000010,
                    formId: "00046946",
                    level: [35, 45],
                    damage: [200, 225],
                    mods: [ ]
                },
                {
                    name: "Assault Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 4,
                    clipSize: 20,
                    reloadTime: 1.933343,
                    formId: "0000463F",
                    level: [30, 40, 50],
                    damage: [26, 29, 33],
                    mods: [
                        standardAssaultRifleReceivers,
                        createStandardMagazines("Large", 20),
                        standardMuzzle,
                        createStandardSights("", true, true)
                    ]
                },
                {
                    name: "Whistle In the Dark",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    special: true,
                    info: "WhistleInTheDark",
                    speed: 4,
                    clipSize: 20,
                    reloadTime: 1.933343,
                    formId: "005E51E6",
                    level: [30, 40, 50],
                    damage: [26, 29, 33],
                    mods: [
                        standardAssaultRifleReceivers,
                        createStandardMagazines("Large", 20),
                        standardMuzzle,
                        createStandardSights("", true, true)
                    ],
                    legendaryPrefix: "Nocturnal",
                    // legendaryMajor: "33% VATS"
                },
                {
                    name: "Gatling Gun",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    speed: 2,
                    clipSize: 250,
                    reloadTime: 3.166677,
                    formId: "00011BF6",
                    level: [20, 30, 40, 50],
                    damage: [43, 57, 72, 86],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Speedy",
                                    speedAddPercent: 25
                                },
                                primeMod
                            ]
                        },
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Large",
                                    clipSizeAdd: 250
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Railway Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    speed: 1,
                    clipSize: 10,
                    reloadTime: 3.366677,
                    formId: "000FE268",
                    level: [30, 40, 50],
                    damage: [75, 85, 95],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Automatic",
                                    damageMultPercent: -10,
                                    speedAddPercent: 650
                                },
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "50 Cal Machine Gun",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    speed: 9.1,
                    clipSize: 250,
                    reloadTime: 5.000010,
                    formId: "0003A0D4",
                    level: [25, 35, 45],
                    damage: [29, 36, 43],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                primeMod
                            ]
                        },
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard",
                                    ignoreDRPercent: 0
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 12.5,
                                }                           
                            ]
                        }
                    ]
                },
                {
                    name: "Final Word",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    special: true,
                    info: "WeaponFinalWord",
                    speed: 9.1,
                    clipSize: 250,
                    reloadTime: 5.000010,
                    formId: "005A21E4",
                    level: [25, 35, 45],
                    damage: [29, 36, 43],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                primeMod
                            ]
                        },
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard",
                                    ignoreDRPercent: 0
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 12.5,
                                    preinstalled: true
                                }                           
                            ]
                        }
                    ],
                    legendaryPrefix: "Anti-armor",
                    legendaryMajor: "25% increased fire rate"
                },
                {
                    name: "The Action Hero",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    special: true,
                    info: "WeaponActionHero",
                    speed: 9.1,
                    clipSize: 250,
                    reloadTime: 5.000010,
                    formId: "00403025",
                    level: [25, 35, 45],
                    damage: [29, 36, 43],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                primeMod
                            ]
                        },
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard",
                                    ignoreDRPercent: 0
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 12.5,
                                    preinstalled: true
                                }                           
                            ]
                        }
                    ],
                    legendaryPrefix: "Two shot",
                    legendaryMajor: "25% increased fire rate",
                    legendaryMinor: "15% faster reload"
                },
                {
                    name: "Light Machine Gun",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    speed: 15.9,
                    clipSize: 75,
                    reloadTime: 3.666677,
                    formId: "0007CAB1",
                    level: [30, 40, 50],
                    damage: [29, 34, 42],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Minigun",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    speed: 18.2,
                    clipSize: 500,
                    reloadTime: 2.200000,
                    formId: "0001F669",
                    level: [35, 45],
                    damage: [20, 24],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Accelerated",
                                    damageMultPercent: 15,
                                    speedAddPercent: 15
                                },
                                {
                                    name: "Tri",
                                    damageMultPercent: 25,
                                    speedAddPercent: -35
                                },
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Combat Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 3.3,
                    clipSize: 20,
                    reloadTime: 3.200010,
                    formId: "000DF42E",
                    level: [20, 30, 40, 50],
                    damage: [28, 32, 36, 40],
                    mods: [
                        createCombatRifleReceivers(false),
                        createStandardMagazines("Large", 20),
                        standardMuzzle
                    ]
                },
                {
                    name: "The Fixer",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 3.3,
                    clipSize: 20,
                    reloadTime: 3.200010,
                    formId: "0046D2A1",
                    level: [20, 30, 40, 50],
                    damage: [33, 38, 43, 48],
                    mods: [
                        createCombatRifleReceivers(true),
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Stinging",
                                    clipSizeAdd: 5,
                                    ignoreDRPercent: 20,
                                },
                                {
                                    name: "Piercing",
                                    reloadTimeMult: -15,
                                    ignoreDRPercent: 20,
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40,
                                    preinstalled: true
                                },
                                {
                                    name: "Quick",
                                    reloadTimeMult: -30,
                                },
                                {
                                    name: "Swift",
                                    reloadTimeMult: -15,
                                    clipSizeAdd: 5,
                                },
                                {
                                    name: "Large",
                                    clipSizeAdd: 10
                                },
                            ]
                        },
                        {
                            slot: "Muzzle",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Suppressor",
                                    silencer: true,
                                    preinstalled: true
                                }
                            ]  
                        }
                    ]
                },
                {
                    name: "Combat Shotgun",
                    category: "Shotgun",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 2,
                    clipSize: 8,
                    reloadTime: 3.200010,
                    formId: "0014831C",
                    level: [20, 30, 40, 50],
                    damage: [60, 70, 80, 90],
                    mods: [
                        createCombatShotgunReceivers(),
                        createStandardMagazines("Large", 8),
                        standardMuzzle
                    ]
                },
                {
                    name: "Crowd Control",
                    category: "Shotgun",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 2,
                    clipSize: 8,
                    reloadTime: 3.200010,
                    formId: "006477EC",
                    info: "WeaponCrowdControl",
                    special: true,
                    level: [20, 30, 40, 50],
                    damage: [60, 70, 80, 90],
                    mods: [
                        createCombatShotgunReceivers(),
                        createStandardMagazines("Large", 8),
                        standardMuzzle
                    ],
                    //legendaryPrefix: "Suppressor's",
                    legendaryMajor: "ExplosiveCustomShotgun"
                    //legendaryMinor: "90% reduced weight"
                },
                {
                    name: "Pump Action Shotgun",
                    category: "Shotgun",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.5,
                    clipSize: 8,
                    reloadTime: 2.500010 / 8,
                    reloadOneByOne: 0.5,
                    formId: "0012DBB3",
                    level: [5, 15, 25, 35, 45],
                    damage: [55, 65, 75, 85, 95],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                snappyMod,
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod,
                            ]
                        },
                        standardMuzzle
                    ]
                },
                {
                    name: "Fancy Pump Action Shotgun",
                    category: "Shotgun",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.5,
                    clipSize: 12,
                    reloadTime: 2.500010 / 8 * 0.7,
                    reloadOneByOne: 0.3,
                    formId: "005A38DA",
                    special: true,
                    info: "WeaponFancyShotgun",
                    level: [5, 15, 25, 35, 45],
                    damage: [55, 65, 75, 85, 95],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                snappyMod,
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod,
                            ]
                        },
                        standardMuzzle
                    ],
                    legendaryPrefix: "Anti-armor"
                },
                {
                    name: "Double-barrel Shotgun",
                    category: "Shotgun",
                    kind: "ballistic",
                    explosive: false,
                    speed: 3.6,
                    clipSize: 2,
                    reloadTime: 3.066677,
                    formId: "00092217",
                    level: [15, 25, 35, 45],
                    damage: [80, 90, 100, 115],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Powerful",
                                    damageMultPercent: 15
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                fierceMod,
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Salt of the Earth",
                    category: "Shotgun",
                    kind: "ballistic",
                    explosive: false,
                    speed: 4.4,
                    clipSize: 2,
                    reloadTime: 3.066677,
                    formId: "0042B0D3",
                    special: true,
                    info: "WeaponSaltEarth",
                    level: [15, 25, 35, 45],
                    damage: [80, 90, 100, 115],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Powerful",
                                    damageMultPercent: 15
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                fierceMod,
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod
                            ]
                        }
                    ],
                    legendaryPrefix: "Two shot",
                    legendaryMajor: "Aiming",
                    legendaryMinor: "15% faster reload"
                },
                {
                    name: "Crossbow",
                    category: "Bow",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.4,
                    clipSize: 1,
                    reloadTime: 2.833344,
                    formId: "00055463",
                    level: [15, 25, 35, 45],
                    damage: [55, 60, 65, 70],
                    mods: [
                        {
                            slot: "Frame",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Plasma",
                                    addDamageEnergyLeveled: [20,20,20,20]
                                },
                                {
                                    name: "Cryo",
                                    addDamageColdLeveled: [ 2, 2, 2, 2]
                                },
                                {
                                    name: "Explosive",
                                    addDamageExplosiveLeveled: [15,15,15,15],
                                },
                                {
                                    name: "Flaming",
                                    addDamageFireLeveled: [ 4, 4, 4, 4]
                                },
                                {
                                    name: "Poison",
                                    addDamagePoisonLeveled: [ 5, 5, 5, 5]
                                },
                                primeMod,
                            ]
                        }
                    ]
                },
                {
                    name: "10mm Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 4.3,
                    clipSize: 12,
                    reloadTime: 1.966677,
                    formId: "00004822",
                    level: [5, 15, 25, 35, 45],
                    damage: [15, 18, 21, 24, 28],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Automatic",
                                    damageMultPercent: -10,
                                    speedAddPercent: 87.5
                                },
                                {
                                    name: "Powerful Automatic",
                                    damageMultPercent: 11.11,
                                    speedAddPercent: 87.5
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                viciousMod,
                                fierceMod,
                                {
                                    name: "Tweaked Automatic",
                                    speedSet: 7.5,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                scorchKillerMod,
                                primeMod,
                                {
                                    name: "Prime Automatic",
                                    damageMultPercent: 15,
                                    speedAddPercent: 87.5,
                                    versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                                    versusMultPercent: 35
                                }
                            ]
                        },
                        createStandardMagazines("Large", 12, 20),
                        standardMuzzle
                    ]
                },
                {
                    name: "Western Revolver",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 3.333344,
                    formId: "00113D6A",
                    level: [20, 30, 40, 50],
                    damage: [50, 55, 60, 65],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                {
                                    name: "Refined",
                                    damageMultPercent: 12.5
                                },
                                {
                                    name: "Refined (Bugged)",
                                    damageMultPercent: 12.5 + 25
                                },
                                {
                                    name: "Vigorous",
                                    damageMultPercent: 12.5
                                },
                                severeMod,
                                {
                                    name: "Severe (Bugged)",
                                    damageMultPercent: 12.5 + 25,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                viciousMod,
                                fierceMod,
                                hairTriggerReloadMod,
                                primeMod,
                            ]
                        }
                    ]
                },
                {
                    name: "Submachine Gun",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 7.5,
                    clipSize: 50,
                    reloadTime: 3.233343,
                    automatic: true,
                    formId: "0015B043",
                    level: [15, 25, 35, 45],
                    damage: [18, 22, 25, 29],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Armor-piercing",
                                    ignoreDRPercent: 40
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                scorchKillerMod,
                                primeMod
                            ]
                        },
                        standardMuzzle,
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Large",
                                    reloadTime: 20,
                                    clipSizeAdd: 25,
                                },
                                {
                                    name: "Large Quick Eject",
                                    reloadTime: -15,
                                    clipSizeAdd: 12,
                                },
                                {
                                    name: "Medium",
                                },
                                {
                                    name: "Medium Quick Eject",
                                    reloadTime: -30,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "10mm SMG",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 9.1,
                    clipSize: 30,
                    reloadTime: 3.000010,
                    formId: "0010DB0F",
                    level: [10, 20, 30, 40, 50],
                    damage: [17, 19, 23, 28, 34],
                    mods: [
                        createSMGReceiver(""),
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                    ignoreDRPercent: 0
                                },
                                {
                                    name: "Piercing",
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40
                                },
                                {
                                    name: "Quick",
                                    reloadTime: -30,
                                },
                                {
                                    name: "Drum",
                                    reloadTime: 20,
                                    clipSizeAdd: 15,
                                }
                            ]
                        },
                        standardMuzzle
                    ]
                },
                {
                    name: "Old Guard's 10mm SMG",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    special: true,
                    info: "WeaponOldGuard",
                    speed: 10,
                    clipSize: 30,
                    reloadTime: 3.000010,
                    formId: "0059A82F",
                    level: [10, 20, 30, 40, 50],
                    damage: [17, 19, 23, 28, 34],
                    mods: [
                        createSMGReceiver("Old Guard's"),
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                    ignoreDRPercent: 0
                                },
                                {
                                    name: "Piercing",
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40
                                },
                                {
                                    name: "Quick",
                                    reloadTime: -30,
                                },
                                {
                                    name: "Drum",
                                    reloadTime: 20,
                                    clipSizeAdd: 15,
                                }
                            ]
                        },
                        standardMuzzle
                    ],
                    legendaryPrefix: "Anti-armor"
                },
                {
                    name: "Broadsider",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: true,
                    speed: 0.3,
                    clipSize: 4,
                    reloadTime: 3.933343,
                    formId: "000FD11B",
                    level: [25, 35, 45],
                    damage: [95, 115, 135],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Light",
                                    damageMultPercent: -15
                                }
                            ]
                        },
                        {
                            slot: "Canister",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Multi-shot",
                                    clipSizeAdd: 2,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Harpoon Gun",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 4.100010,
                    formId: "001109CF",
                    level: [30, 40, 50],
                    damage: [125, 150, 175],
                    mods: [
                        {
                            slot: "Ammunition",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Flechette",
                                    damageMultPercent: 100
                                }
                            ]
                        },
                        {
                            slot: "Scope",
                            options: [
                                {
                                    name: "None"
                                },
                                {
                                    name: "Short",
                                    scope: true
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Cursed Harpoon Gun",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    info: "WeaponCursedHarpoonGun",
                    speed: 0.2 * 1.2,
                    clipSize: 1,
                    reloadTime: 4.100010,
                    level: [30, 40, 50],
                    damage: [125 * 1.15, 150 * 1.15, 175 * 1.15],
                    mods: [
                        {
                            slot: "Ammunition",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Flechette",
                                    damageMultPercent: 100
                                }
                            ]
                        },
                        {
                            slot: "Scope",
                            options: [
                                {
                                    name: "None"
                                },
                                {
                                    name: "Short",
                                    scope: true
                                }
                            ]
                        }
                    ],
                    legendaryPrefix: "Executioner's",
                    // legendaryMajor: "40% bashing damage",
                    // legendaryMinor: "90% reduced weight"
                },
                {
                    name: "Kingfisher",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    special: true,
                    info: "WeaponKingFisher",
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 4.100010,
                    formId: "0042B0D0",
                    level: [30, 40, 50],
                    damage: [125, 150, 175],
                    mods: [
                        {
                            slot: "Ammunition",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Flechette",
                                    damageMultPercent: 100
                                }
                            ]
                        },
                        {
                            slot: "Scope",
                            options: [
                                {
                                    name: "None"
                                },
                                {
                                    name: "Short",
                                    scope: true,
                                    preinstalled: true
                                }
                            ]
                        }
                    ],
                    legendaryPrefix: "Exterminator's",
                    legendaryMajor: "VATS Crits do +50% damage",
                    // legendaryMinor: "15% faster critical fill"
                },
                {
                    name: ".44 Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 3.333344,
                    formId: "000CE97D",
                    level: [5, 15, 25, 35, 45],
                    damage: [40, 45, 50, 55, 60],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                fierceMod,
                                viciousMod,
                                hairTriggerReloadMod,
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Voice of Set",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    special: true,
                    info: "WeaponVoiceOfSet",
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 3.333344,
                    formId: "0039C6C9",
                    level: [5, 15, 25, 35, 45],
                    damage: [40, 45, 50, 55, 60],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                fierceMod,
                                viciousMod,
                                hairTriggerReloadMod,
                                primeMod
                            ]
                        },
                        {
                            slot: "Set bonus",
                            options: [
                                {
                                    name: "None",
                                    versus: ["Robot"],
                                    versusAddDamageEnergyLeveled: [35, 35, 35, 35, 35],
                                },
                                {
                                    name: "Eye of Ra equipped",
                                    versus: ["Robot"],
                                    versusAddDamageEnergyLeveled: [70, 70, 70, 70, 70],
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Medical Malpractice",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    special: true,
                    info: "WeaponMedicalMalpractice",
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 3.333344,
                    formId: "00403022",
                    level: [5, 15, 25, 35, 45],
                    damage: [40, 45, 50, 55, 60],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                fierceMod,
                                viciousMod,
                                hairTriggerReloadMod,
                                primeMod
                            ]
                        }
                    ],
                },
                {
                    name: "The Fact Finder",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    special: true,
                    info: "WeaponTheFactFinder",
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 2,
                    level: [5, 15, 25, 35, 45],
                    damage: [40, 45, 50, 55, 60],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                fierceMod,
                                viciousMod,
                                hairTriggerReloadMod,
                                primeMod,
                                {
                                    name: "Stabilized Bull Barrel",
                                    preinstalled: true
                                }
                            ]
                        }
                    ],
                    legendaryPrefix: "Two shot",
                    legendaryMajor: "Explosive"
                },
                {
                    name: "Black Powder Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 5.000010,
                    formId: "00003AAC",
                    level: [10, 20, 30, 40, 50],
                    damage: [115, 130, 145, 160, 175],
                    mods: []
                },
                {
                    name: "Black Powder Blunderbuss",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 5.000010,
                    formId: "00003AAD",
                    level: [10, 20, 30, 40, 50],
                    damage: [115, 130, 145, 160, 175],
                    mods: []
                },
                {
                    name: "Pirate Punch",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 5.000010,
                    formId: "00647820",
                    special: true,
                    info: "WeaponPiratePunch",
                    level: [10, 20, 30, 40, 50],
                    damage: [115, 130, 145, 160, 175],
                    mods: [],
                    legendaryPrefix: "Two shot",
                    // legendaryMajor: "50% VATS hit chance"
                    legendaryMinor: "15% faster reload"
                },
                {
                    name: "Pipe Bolt-action Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.3,
                    clipSize: 6,
                    reloadTime: 10.000000,
                    formId: "0014831A",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [40, 45, 50, 55, 60, 65, 70],
                    mods: [
                        pipeBoltActionReceivers
                    ]
                },
                {
                    name: "Pipe Bolt-action Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.3,
                    clipSize: 6,
                    reloadTime: 10.000000,
                    formId: "0014831A",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [40, 45, 50, 55, 60, 65, 70],
                    mods: [
                        pipeBoltActionReceivers
                    ]
                },
                {
                    name: "Pipe Revolver Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.5,
                    clipSize: 6,
                    reloadTime: 10.000000,
                    formId: "0014831B",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [27, 31, 36, 40, 45, 50, 55],
                    mods: [
                        pipeRevolverReceivers,
                        {
                            slot: "Muzzle",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Suppressed",
                                    silencer: true
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Pipe Revolver Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 10.000000,
                    formId: "0014831B",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [27, 31, 36, 40, 45, 50, 55],
                    mods: [
                        pipeRevolverReceivers,
                        {
                            slot: "Muzzle",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Suppressed",
                                    silencer: true
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Pipe Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    speed: 6,
                    clipSize: 12,
                    reloadTime: 10.000000,
                    formId: "00024F55",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [12, 13, 15, 18, 21, 23, 26],
                    mods: [
                        pipeGunReceivers,
                        createStandardMagazines("Drum", 12, 20),
                    ]
                },
                {
                    name: "Pipe Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    speed: 6,
                    clipSize: 12,
                    reloadTime: 10.000000,
                    formId: "00024F55",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [12, 13, 15, 18, 21, 23, 26],
                    mods: [
                        pipeGunReceivers,
                        createStandardMagazines("Drum", 12, 20),
                    ]
                },
                {
                    name: "Gauss Rifle",
                    category: "Rifle",
                    kind: "energy",
                    explosive: false,
                    silencer: true,
                    chargetime: 1,
                    speed: 6.7,
                    explosiveDamageMult: 15,
                    clipSize: 5,
                    reloadTime: 4.200010,
                    formId: "000D1EB0",
                    level: [35, 45],
                    damage: [125, 140],
                    mods: [
                        {
                            slot: "Capacitors",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Stinging",
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Piercing",
                                    ignoreDRPercent: 20
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40
                                },
                                primeMod
                            ]
                        },
                        standardMuzzle
                    ]
                },
                {
                    name: "Radium Rifle",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 4,
                    clipSize: 20,
                    reloadTime: 3.566677,
                    formId: "00110D41",
                    level: [40, 50],
                    damage: [33, 37],
                    damageRadiation: [13, 15],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25,
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                severeMod,
                                viciousMod,
                                snappyMod,
                                {
                                    name: "Tweaked Auto",
                                    criticalDamageMultiply: 17,
                                    speedSet: 7.5,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                primeMod
                            ]
                        },
                        createStandardMagazines("Large", 20, 20),
                        standardMuzzle
                    ]
                },
                {
                    name: "Laser Pistol",
                    category: "Pistol",
                    kind: "laser",
                    explosive: false,
                    silencer: false,
                    speed: 4,
                    clipSize: 30,
                    reloadTime: 3,
                    formId: "0009983B",
                    level: [5, 15, 25, 35, 45],
                    damage: [0, 0, 0, 0, 0],
                    damageEnergy: [21, 26, 31, 36, 44],
                    mods: [
                        createLaserCapacitors(),
                        createLaserBarrels(),
                        createMuzzleWithBeam([21, 26, 31, 36, 44])
                    ]
                },
                {
                    name: "Laser Rifle",
                    category: "Rifle",
                    kind: "laser",
                    explosive: false,
                    silencer: false,
                    speed: 5,
                    clipSize: 30,
                    reloadTime: 3,
                    formId: "0009983B",
                    level: [5, 15, 25, 35, 45],
                    damage: [0, 0, 0, 0, 0],
                    damageEnergy: [21, 26, 31, 36, 44],
                    mods: [
                        createLaserCapacitors(),
                        createLaserBarrels(),
                        createMuzzleWithBeam([21, 26, 31, 36, 44])
                    ]
                },
                {
                    name: "Ultracite Laser Pistol",
                    category: "Pistol",
                    kind: "laser",
                    explosive: false,
                    silencer: false,
                    speed: 4,
                    clipSize: 30,
                    reloadTime: 3,
                    formId: "00186171",
                    level: [30, 40, 50],
                    damage: [0, 0, 0],
                    damageEnergy: [28, 31, 34],
                    mods: [
                        createLaserCapacitors(),
                        createLaserBarrels(),
                        createMuzzleWithBeam([28, 31, 34])
                    ]
                },
                {
                    name: "Ultracite Laser Rifle",
                    category: "Rifle",
                    kind: "laser",
                    explosive: false,
                    silencer: false,
                    speed: 5,
                    clipSize: 30,
                    reloadTime: 3,
                    formId: "00186171",
                    level: [30, 40, 50],
                    damage: [0, 0, 0, 0, 0],
                    damageEnergy: [28, 31, 34],
                    mods: [
                        createLaserCapacitors(),
                        createLaserBarrels(),
                        createMuzzleWithBeam([28, 31, 34])
                    ]
                },
                {
                    name: "Gatling Laser",
                    category: "Heavy",
                    kind: "laser",
                    explosive: false,
                    silencer: false,
                    speed: 18.2,
                    clipSize: 500,
                    reloadTime: 4.866677,
                    formId: "00186171",
                    level: [25, 35, 45],
                    damage: [0, 0, 0],
                    damageEnergy: [18, 21, 25],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Refined Beta Wave",
                                    addDamageFireLeveled: [3, 3, 3]
                                },
                                {
                                    name: "Gamma Wave",
                                    addDamageFireLeveled: [3, 3, 3]
                                },
                                {
                                    name: "Severe Beta Wave",
                                    criticalDamageMultiply: 34,
                                    addDamageFireLeveled: [3, 3, 3],
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                viciousMod,
                                primeMod,
                            ]
                        },
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Charging",
                                    damageMultPercent: 55,
                                    speedAddPercent: -75
                                },
                            ]
                        }
                    ]
                },
                {
                    name: "Ultracite Gatling Laser",
                    category: "Heavy",
                    kind: "laser",
                    explosive: false,
                    silencer: false,
                    speed: 18.2,
                    clipSize: 500,
                    reloadTime: 4.866677,
                    level: [35, 45],
                    damage: [0, 0, 0],
                    damageEnergy: [25, 28],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Refined Beta Wave",
                                    addDamageFireLeveled: [3, 3, 3]
                                },
                                {
                                    name: "Gamma Wave",
                                    addDamageFireLeveled: [3, 3, 3]
                                },
                                {
                                    name: "Severe Beta Wave",
                                    criticalDamageMultiply: 34,
                                    addDamageFireLeveled: [3, 3, 3],
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                viciousMod,
                                primeMod
                            ]
                        },
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Charging",
                                    damageMultPercent: 55,
                                    speedAddPercent: -75
                                },
                            ]
                        }
                    ]
                },
                {
                    name: "Plasma Pistol",
                    category: "Pistol",
                    kind: "plasma",
                    explosive: false,
                    silencer: false,
                    speed: 3.3,
                    clipSize: 30,
                    reloadTime: 2.333300,
                    formId: "00100AE9",
                    level: [15, 25, 35, 45],
                    damage: [15, 21, 25, 29],
                    damageEnergy: [15, 21, 25, 29],
                    mods: [
                        createPlasmaBarrels(false),
                        createPlasmaCapacitors(false),
                        createStandardSights("", true, true)
                    ]
                },
                {
                    name: "Mind Over Matter",
                    category: "Pistol",
                    kind: "plasma",
                    explosive: false,
                    silencer: false,
                    special: true,
                    info: "WeaponMindOverMatter",
                    speed: 3.3,
                    clipSize: 30,
                    reloadTime: 2.333300,
                    formId: "005EA441",
                    level: [15, 25, 35, 45],
                    damage: [15, 21, 25, 29],
                    damageEnergy: [15, 21, 25, 29],
                    mods: [
                        createPlasmaBarrels(false),
                        createPlasmaCapacitors(false),
                        createStandardSights("", true, true)
                    ],
                    legendaryPrefix: "Ghoul slayer's",
                    legendaryMajor: "Aiming"
                },
                {
                    name: "Plasma Rifle",
                    category: "Rifle",
                    kind: "plasma",
                    explosive: false,
                    silencer: false,
                    speed: 3.3,
                    clipSize: 30,
                    reloadTime: 2.333300,
                    formId: "00100AE9",
                    level: [15, 25, 35, 45],
                    damage: [15, 21, 25, 29],
                    damageEnergy: [15, 21, 25, 29],
                    mods: [
                        createPlasmaBarrels(false),
                        createPlasmaCapacitors(false),
                        createStandardSights("", true, true)
                    ]
                },
                {
                    name: "Slug Buster",
                    category: "Rifle",
                    kind: "plasma",
                    info: "WeaponSlugBuster",
                    special: true,
                    explosive: false,
                    silencer: false,
                    speed: 3.3,
                    clipSize: 30,
                    reloadTime: 2.333300,
                    formId: "005A366E",
                    level: [15, 25, 35, 45],
                    damage: [15, 21, 25, 29],
                    damageEnergy: [15, 21, 25, 29],
                    mods: [
                        createPlasmaBarrels(true),
                        createPlasmaCapacitors(true),
                        createStandardSights("Slug Buster", true, true)
                    ],
                    legendaryPrefix: "Anti-armor",
                    legendaryMajor: "VATS Crits do +50% damage",
                    // legendaryMinor: "90% reduced weight"
                },
                {
                    name: "Gatling Plasma",
                    category: "Heavy",
                    kind: "plasma",
                    explosive: false,
                    silencer: false,
                    speed: 9.1,
                    clipSize: 500,
                    reloadTime: 6.833344,
                    formId: "0001EC47",
                    level: [30, 40, 50],
                    damage: [0, 0, 0],
                    damageEnergy: [43, 50, 58],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                primeMod
                            ]
                        },
                        createMuzzleWithBeam([43, 50, 58])
                    ]
                },
                {
                    name: "Enclave Plasma Pistol",
                    category: "Pistol",
                    kind: "plasma",
                    explosive: false,
                    silencer: false,
                    speed: 3.3,
                    clipSize: 30,
                    reloadTime: 2.333300,
                    formId: "002FD97A",
                    level: [25, 35, 45],
                    damage: [24, 28, 32],
                    damageEnergy: [24, 28, 32],
                    mods: [
                        createPlasmaBarrels(false),
                        createPlasmaCapacitors(false),
                        createStandardSights("", true, true)
                    ]
                },
                {
                    name: "Enclave Plasma Rifle",
                    category: "Rifle",
                    kind: "plasma",
                    explosive: false,
                    silencer: false,
                    speed: 3.3,
                    clipSize: 30,
                    reloadTime: 2.333300,
                    formId: "002FD97A",
                    level: [25, 35, 45],
                    damage: [24, 28, 32],
                    damageEnergy: [24, 28, 32],
                    mods: [
                        createPlasmaBarrels(false),
                        createPlasmaCapacitors(false),
                        createStandardSights("", true, true)
                    ]
                },
                {
                    name: "Gamma Gun",
                    category: "Pistol",
                    kind: "energy",
                    explosive: false,
                    silencer: false,
                    speed: 6.7,
                    clipSize: 8,
                    reloadTime: 4.333344,
                    formId: "000DDB7C",
                    level: [15, 25, 35, 45],
                    damage: [38, 45, 52, 60],
                    damageRadiation: [50, 50, 50, 50],
                    mods: [
                        {
                            slot: "Dish",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Deep Dish",
                                    addDamageRadiationLeveled: [75, 75, 75, 75]
                                }
                            ]
                        },
                        {
                            slot: "Muzzle",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Electric signal carrier",
                                    addDamageEnergyLeveled: [40, 40, 40, 40]
                                },
                                {
                                    name: "Signal Repeater",
                                    speedAddPercent: speedMult(9.1, 6.7)
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Tesla Rifle",
                    category: "Rifle",
                    kind: "energy",
                    explosive: false,
                    silencer: false,
                    speed: 2,
                    clipSize: 15,
                    reloadTime: 4.200010,
                    formId: "0010F0EC",
                    level: [40, 50],
                    damage: [0, 0],
                    damageEnergy: [66, 78],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Automatic",
                                    damageMultPercent: -15,
                                    speedSet: 9.1
                                },
                                {
                                    name: "Charging",
                                    damageMultPercent: 30
                                },
                            ]
                        }
                    ]
                },
                {
                    name: "Cryolator",
                    category: "Heavy",
                    kind: "energy",
                    explosive: false,
                    silencer: false,
                    speed: 9.1,
                    clipSize: 25,
                    reloadTime: 2.500010,
                    formId: "00171B2B",
                    level: [25, 35, 45],
                    damage: [0, 0, 0],
                    damageCold: [24, 30, 36],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Chrystallizing",
                                    damageMultPercent: -30,
                                    debuffViaMultiply: true,
                                    speedAddPercent: -25,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Fat Man",
                    category: "Heavy",
                    explosive: true,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 5.633344,
                    formId: "000BD56F",
                    level: [25, 35, 45],
                    damage: [355, 405, 455],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "MIRV",
                                    addDamageBallisticLeveled: [145, 145, 145]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Missile Launcher",
                    category: "Heavy",
                    explosive: true,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 4.266677,
                    formId: "0003F6F8",
                    level: [20, 30, 40, 50],
                    damage: [105, 125, 145, 155],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Quad",
                                    clipSizeAdd: 3,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Bunker Buster",
                    category: "Heavy",
                    explosive: true,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 4.266677,
                    special: true,
                    formId: "0003F6F8",
                    info: "WeaponBunkerBuster",
                    level: [20, 30, 40, 50],
                    damage: [105 * 1.2, 125 * 1.2, 145 * 1.2, 155 * 1.2],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Quad",
                                    clipSizeAdd: 3,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Hellstorm Missile Launcher",
                    category: "Heavy",
                    explosive: true,
                    speed: 0.14,
                    clipSize: 4,
                    reloadTime: 3.333344,
                    formId: "005E47EE",
                    level: [50],
                    damage: [200],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Napalm",
                                    speedMultPercent: 100.0 / 6.0,
                                    addDamageFireLeveled: [35]
                                },
                                {
                                    name: "Enhanced",
                                    speedMultPercent: 100.0 / 6.0,
                                    damageMultPercent: -20,
                                    clipSizeAdd: 2,
                                },
                                {
                                    name: "Plasma",
                                    speedMultPercent: 100.0 / 6.0,
                                    addDamageEnergyLeveled: [80]
                                },
                                {
                                    name: "Cryo",
                                    speedMultPercent: 100.0 / 6.0,
                                    addDamageColdLeveled: [79]
                                }
                            ]
                        },
                        {
                            slot: "Sights",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Reflex Sight"
                                },
                                {
                                    name: "Recon Scope",
                                    scope: true
                                },
                                {
                                    name: "Night Vision Scope",
                                    scope: true
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "M79 Grenade Launcher",
                    category: "Heavy",
                    explosive: true,
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 3.000010,
                    formId: "0008F0EF",
                    level: [15, 25, 35, 45],
                    damage: [87, 97, 107, 117],
                    mods: [
                    ]
                },
                {
                    name: "Auto Grenade Launcher",
                    category: "Heavy",
                    explosive: true,
                    speed: 1.6,
                    clipSize: 12,
                    reloadTime: 5.000010,
                    formId: "00182634",
                    level: [50],
                    damage: [75],
                    mods: [
                    {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Heavy",
                                    damageMultPercent: 12.5,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Alien Blaster",
                    category: "Pistol",
                    kind: "energy",
                    explosive: true,
                    speed: 10,
                    clipSize: 42,
                    reloadTime: 2.866677,
                    formId: "000FF995",
                    level: [20,30,40,50],
                    damage: [0, 0, 0, 0],
                    damageEnergy: [20,25,29,32],
                    mods: [
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Fusion",
                                    damageMultPercent: -20
                                },
                                {
                                    name: "Cryo",
                                    damageMultPercent: -20,
                                    addDamageColdLeveled: [10, 12.7, 15.3, 18]
                                },
                                {
                                    name: "Poison",
                                    damageMultPercent: -20,
                                    addDamagePoisonLeveled: [10, 10, 10, 10]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Alien Desintegrator",
                    category: "Rifle",
                    kind: "energy",
                    explosive: true,
                    speed: 3.3,
                    clipSize: 25,
                    reloadTime: 2.866677,
                    formId: "0062FE8E",
                    level: [20,30,40,50],
                    damage: [0, 0, 0, 0],
                    damageEnergy: [25,31,36,40],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "High-powered",
                                    damageMultPercent: 110,
                                    clipSizeAdd: -19,
                                    speedSet: 1.3
                                },
                                {
                                    name: "Poison",
                                    addDamageEnergyLeveled: [-25 * 0.2, -31 * 0.2, -36*0.2, -40 * 0.2],
                                    addDamagePoisonLeveled: [10, 10, 10, 10]
                                },
                                {
                                    name: "Cryo",
                                    addDamageEnergyLeveled: [-25 * 0.2, -31 * 0.2, -36*0.2, -40 * 0.2],
                                    addDamageColdLeveled: [10, 13.3, 16.6, 20]
                                },
                                {
                                    name: "Automatic",
                                    clipSizeAdd: 15,
                                    isAutomatic: true,
                                    damageMultPercent: -15,
                                    speedSet: 7.5
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "The V.A.T.S. Unknown",
                    category: "Pistol",
                    kind: "energy",
                    explosive: true,
                    special: true,
                    info: "WeaponVATSUnknown",
                    speed: 10,
                    clipSize: 42,
                    reloadTime: 2.866677,
                    formId: "005A21A2",
                    level: [20,30,40,50],
                    damage: [0, 0, 0, 0],
                    damageEnergy: [20,25,29,32],
                    mods: [
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Fusion",
                                    damageMultPercent: -20
                                }
                            ]
                        }
                    ],
                    legendaryMajor: "VATS Crits do +50% damage",
                },
                {
                    name: "Tomahawk",
                    category: "Thrown",
                    kind: "ballistic",
                    speed: speedSlow,
                    clipSize: 1,
                    reloadTime: 1,
                    formId: "000042F2",
                    level: [1],
                    damage: [28],
                    mods: []
                },
                {
                    name: "Throwing Knife",
                    category: "Thrown",
                    kind: "ballistic",
                    speed: speedSlow,
                    clipSize: 1,
                    reloadTime: 1,
                    formId: "003879A3",
                    level: [1],
                    damage: [75],
                    mods: []
                },
                {
                    name: "Sheepsquatch Shard",
                    category: "Thrown",
                    kind: "ballistic",
                    speed: speedSlow,
                    clipSize: 1,
                    reloadTime: 1,
                    formId: "0045FF61",
                    level: [1],
                    damage: [75],
                    mods: []
                },
                {
                    name: "Meat Cleaver",
                    category: "Thrown",
                    kind: "ballistic",
                    speed: speedSlow,
                    clipSize: 1,
                    reloadTime: 1,
                    formId: "005532B4",
                    level: [1],
                    damage: [60],
                    mods: []
                },
                {
                    name: "Gauss Shotgun",
                    category: "Shotgun",
                    kind: "energy",
                    explosive: false,
                    speed: 6.7,
                    chargetime: 1,
                    explosiveDamageMult: 15,
                    clipSize: 8,
                    reloadTime: 2.666667,
                    formId: "0055C150",
                    level: [25,30,35,40,45,50],
                    damage: [80,85,90,95,100,105],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                {
                                    name: "Refined",
                                    damageMultPercent: 12.5
                                },
                                viciousMod,
                                primeMod
                            ]
                        },
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Perforating",
                                    ignoreDRPercent: 40
                                },
                                {
                                    name: "Extended",
                                    reloadTimeMult: 20,
                                    clipSizeAdd: 4,
                                }

                            ]
                        }
                    ]
                },
                {
                    name: "Gauss Minigun",
                    category: "Heavy",
                    kind: "energy",
                    explosive: false,
                    speed: 9.1,
                    clipSize: 500,
                    reloadTime: 3.366677,
                    formId: "0055C151",
                    level: [45,50],
                    damage: [48,50],
                    explosiveDamageMult: 15,
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Tri",
                                    speedAddPercent: 20
                                },
                                {
                                    name: "Penta",
                                    damageMultPercent: -15,
                                    speedAddPercent: 35
                                }
                            ]
                        },
                        {
                            slot: "Tesla",
                            options: [
                                {
                                    name: "None"
                                },
                                primeMod,
                                {
                                    name: "Dynamo",
                                    addDamageEnergyLeveled: [3, 3]
                                },
                                {
                                    name: "Capacitor",
                                    addDamageEnergyLeveled: [6, 6]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Gauss Pistol",
                    category: "Pistol",
                    kind: "energy",
                    explosive: false,
                    speed: 6.7,
                    chargetime: 1,
                    explosiveDamageMult: 15,
                    clipSize: 18,
                    reloadTime: 4.100000,
                    formId: "0054A165",
                    level:  [15,20,25,30,35, 40, 45, 50],
                    damage: [62,70,76,85,92,100,108,115],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Suppressed",
                                    silencer: true
                                }
                            ]
                        },
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Refined",
                                    damageMultPercent: 12.5
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25
                                },
                                viciousMod,
                                primeMod
                            ]
                        },
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Drum",
                                    clipSizeAdd: 9,
                                    reloadTimeMult: 20
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Plasma Caster",
                    category: "Heavy",
                    kind: "plasma",
                    explosive: false,
                    speed: 2,
                    clipSize: 20,
                    reloadTime: 5.333333,
                    formId: "0055C166",
                    level: [40,45,50],
                    damage: [60,68,76],
                    damageEnergy: [60,68,76],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                {
                                    name: "Pulse",
                                    damageMultPercent: -15
                                },
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Compound Bow",
                    category: "Bow",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.5,
                    clipSize: 1,
                    reloadTime: 2.666700,
                    formId: "00013CE9",
                    level:  [ 1, 5,10,15,20,25,30,35,40,45,50],
                    damage: [50,55,60,65,70,75,80,85,90,95,100],
                    mods: [
                        standardArrows
                    ]
                },
                {
                    name: "Bow",
                    category: "Bow",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.5,
                    clipSize: 1,
                    reloadTime: 0.100000,
                    formId: "0055C152",
                    level:  [ 1, 5,10,15,20,25,30,35,40,45,50],
                    damage: [40,45,50,55,60,65,70,75,80,85,90],
                    mods: [
                        standardArrows
                    ]
                },
                {
                    name: "Single Action Revolver",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    silencer: false,
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 3.000010 / 6,
                    reloadOneByOne: 0.5,
                    formId: "001C7A69",
                    level:  [10,20,30,40,50],
                    damage: [42,48,52,58,62],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Fancy",
                                    speedAddPercent: 30
                                },
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Fancy Single Action Revolver",
                    category: "Pistol",
                    kind: "ballistic",
                    explosive: false,
                    silencer: false,
                    special: true,
                    info: "WeaponFancySingleAction",
                    speed: 0.6,
                    clipSize: 6,
                    reloadTime: 3.000010 / 6,
                    reloadOneByOne: 0.5,
                    formId: "0034CBD8",
                    level:  [10,20,30,40,50],
                    damage: [42,48,52,58,62],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Fancy",
                                    speedAddPercent: 30,
                                    preinstalled: true,
                                },
                                primeMod
                            ]
                        }
                    ]
                },
                {
                    name: "Flamer",
                    category: "Heavy",
                    kind: "energy",
                    speed: 9.1,
                    clipSize: 100,
                    reloadTime: 3.833344,
                    formId: "000E5881",
                    level: [30, 40, 50],
                    damage: [0, 0, 0],
                    damageFire: [29, 32, 36],
                    mods: [
                        {
                            slot: "Tank",
                            options: [
                                {
                                    name: "Standard",
                                    addDamageFireLeveled: [3, 3, 3]
                                },
                                {
                                    name: "Napalm",
                                    addDamageFireLeveled: [29 * 0.8, 32 * 0.8, 36 * 0.8]
                                }
                            ]
                        },
                        {
                            slot: "Nozzle",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Compression",
                                    addDamageFireLeveled: [29 * 0.2, 32 * 0.2, 36 * 0.2]
                                },
                                {
                                    name: "Vaporization",
                                    addDamageFireLeveled: [29 * 0.8, 32 * 0.8, 36 * 0.8]
                                }
                            ]
                        },
                        {
                            slot: "Propellant Tank",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Large",
                                    clipSizeAdd: 50,
                                },
                                {
                                    name: "Huge",
                                    clipSizeAdd: 100,
                                    reloadTimeMult: 20,
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Flare Gun",
                    category: "Pistol",
                    kind: "ballistic",
                    speed: 0.2,
                    clipSize: 1,
                    reloadTime: 4.533343,
                    formId: "001025AC",
                    level: [1],
                    damage: [5]
                },
                {
                    name: "Syringer",
                    category: "Rifle",
                    kind: "ballistic",
                    speed: 0.3,
                    clipSize: 1,
                    reloadTime: 10.000000,
                    formId: "0014D09E",
                    level: [1],
                    damage: [5]
                },
                {
                    name: "Crusader Pistol",
                    category: "Pistol",
                    kind: "ballistic",
                    speed: 6.7,
                    clipSize: 12,
                    reloadTime: 1.966677,
                    formId: "005E6FC0",
                    level: [30, 35, 40, 45, 50],
                    damage: [25, 28, 30, 33, 35],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "5.56",
                                    damageMultPercent: 100.0 / 6.0
                                },
                                {
                                    name: "Cryo",
                                    addDamageColdLeveled: [5, 5, 6, 6, 7]
                                },
                                {
                                    name: "Fusion",
                                    addDamageEnergyLeveled: [50, 50, 50, 50, 50],
                                    removeBallisticDamage: true
                                },
                                {
                                    name: "Pyro",
                                    addDamageFireLeveled: [5, 5, 6, 6, 7]
                                }
                            ]
                        },
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Large",
                                    clipSizeAdd: 6,
                                    reloadTimeMult: 20,
                                }
                            ]
                        },
                        {
                            slot: "Sights",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Reflex"
                                },
                                { 
                                    name: "Short Scope",
                                    scope: true
                                }
                            ]
                        },
                        {
                            slot: "Muzzle",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Suppressor",
                                    silencer: true
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Pepper Shaker",
                    category: "Heavy,Shotgun",
                    kind: "ballistic",
                    speed: 4.1,
                    clipSize: 50,
                    reloadTime: 4,
                    formId: "005E6FC0",
                    level: [35, 40, 45, 50],
                    damage: [45,50,55,60],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Single",
                                },
                                {
                                    name: "Dual",
                                    damageBallisticMultPercent: 10,
                                    speedAddPercent: 50,
                                },
                                {
                                    name: "Hex",
                                    damageBallisticMultPercent: -10,
                                    speedAddPercent: 100,
                                }
                            ]
                        },
                        {
                            slot: "Magazine",
                            options: [
                                {
                                    name: "Standard",
                                },
                                {
                                    name: "Laser",
                                    addDamageEnergyLeveled: [10, 10, 10, 10]
                                },
                                {
                                    name: "Plasma",
                                    addDamageEnergyLeveled: [10, 10, 10, 10]
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Doctor's Orders",
                    category: "Rifle",
                    kind: "ballistic",
                    explosive: false,
                    silencer: true,
                    speed: 0.3,
                    clipSize: 5,
                    reloadTime: 4.000010,
                    special: true,
                    formId: "006477EE",
                    info: "WeaponDoctorsOrders",
                    level: [1, 5, 10, 20, 30, 40, 50],
                    damage: [40, 45, 50, 55, 60, 65, 70],
                    mods: [
                        {
                            slot: "Receiver",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Hardened",
                                    damageMultPercent: 25,
                                    preinstalled: true
                                    
                                },
                                {
                                    name: ".38",
                                    damageMultPercent: -25
                                },
                                {
                                    name: "Hasty .38",
                                    damageMultPercent: -25,
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Critical .38",
                                    damageMultPercent: -25,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                {
                                    name: ".50",
                                    damageMultPercent: 33.3
                                },
                                {
                                    name: "Hasty .50",
                                    damageMultPercent: 22.5,
                                    speedAddPercent: 25
                                },
                                {
                                    name: "Critical .50",
                                    damageMultPercent: 22.5,
                                    criticalDamageMultiply: 17,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 50
                                        }
                                    }
                                },
                                {
                                    name: "Calibrated",
                                    criticalDamageMultiply: 34,
                                    patchOverride: {
                                        "P34": {
                                            criticalDamageMultiply: 100
                                        }
                                    }
                                },
                                snappyMod,
                                severeMod,
                                viciousMod,
                                scorchKillerMod,
                                primeMod,
                            ]
                        },
                        createStandardMagazines("Large", 5),
                        standardMuzzle,
                        createStandardSights("Doctor's Orders", true, true)
                    ],
                    // legendaryPrefix: "Vampire's",
                    // legendaryMajor: "50% limb damage",
                    // legendaryMinor: "Generate stealth field"
                },
                {
                    name: "Foundation's Vengeance",
                    category: "Heavy",
                    kind: "ballistic",
                    explosive: false,
                    speed: 18.2,
                    clipSize: 500,
                    reloadTime: 2.200000,
                    formId: "00646880",
                    special: true,
                    info: "WeaponFoundationsVengeance",
                    level: [35, 45],
                    damage: [20, 24],
                    mods: [
                        {
                            slot: "Barrel",
                            options: [
                                {
                                    name: "Standard"
                                },
                                {
                                    name: "Accelerated",
                                    damageMultPercent: 15,
                                    speedAddPercent: 15
                                },
                                {
                                    name: "Tri",
                                    damageMultPercent: 25,
                                    speedAddPercent: -35
                                },
                                primeMod
                            ]
                        }
                    ],
                    legendaryPrefix: "Bloodied",
                    legendaryMajor: "Explosive",
                    // legendaryMinor: "250DR while reloading"
                },
            ]);

            // uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu

            var enemyResistances = [
                { dr: 1, er: 1, rr: 1 },
                { dr: 5, er: 5, rr: 5 },
                { dr: 5, er: 5, rr: 250 },
                { dr: 5, er: 20, rr: 150 },
                { dr: 10, er: 5, rr: 10 },
                { dr: 10, er: 10, rr: 10 },
                { dr: 10, er: 20, rr: 1000 },
                { dr: 10, er: 20, rr: 250 },
                { dr: 10, er: 20, rr: 150 },
                { dr: 15, er: 10, rr: 15 },
                { dr: 15, er: 15, rr: 15 },
                { dr: 20, er: 20, rr: 20 },
                { dr: 20, er: 20, rr: 150 },
                { dr: 20, er: 30, rr: 1000 },
                { dr: 25, er: 15, rr: 15 },
                { dr: 25, er: 15, rr: 25 },
                { dr: 25, er: 25, rr: 25 },
                { dr: 25, er: 25, rr: 250 },
                { dr: 30, er: 30, rr: 250 },
                { dr: 30, er: 40, rr: 250 },
                { dr: 30, er: 45, rr: 1000 },
                { dr: 40, er: 30, rr: 40 },
                { dr: 40, er: 50, rr: 250 },
                { dr: 40, er: 60, rr: 1000 },
                { dr: 40, er: 65, rr: 150 },
                { dr: 45, er: 40, rr: 200 },
                { dr: 50, er: 25, rr: 250 },
                { dr: 50, er: 25, rr: 50 },
                { dr: 50, er: 35, rr: 350 },
                { dr: 50, er: 50, rr: 1 },
                { dr: 50, er: 50, rr: 50 },
                { dr: 50, er: 60, rr: 250 },
                { dr: 50, er: 65, rr: 150 },
                { dr: 50, er: 75, rr: 250 },
                { dr: 50, er: 75, rr: 1000 },
                { dr: 50, er: 100, rr: 250 },
                { dr: 60, er: 30, rr: 60 },
                { dr: 60, er: 65, rr: 150 },
                { dr: 60, er: 90, rr: 1000 },
                { dr: 70, er: 100, rr: 150 },
                { dr: 75, er: 50, rr: 75 },
                { dr: 75, er: 75, rr: 250 },
                { dr: 80, er: 70, rr: 80 },
                { dr: 80, er: 100, rr: 150 },
                { dr: 85, er: 140, rr: 1000 },
                { dr: 90, er: 50, rr: 250 },
                { dr: 90, er: 90, rr: 250 },
                { dr: 90, er: 100, rr: 150 },
                { dr: 90, er: 250, rr: 250 },
                { dr: 100, er: 50, rr: 100 },
                { dr: 100, er: 75, rr: 250 },
                { dr: 100, er: 100, rr: 100 },
                { dr: 100, er: 100, rr: 250 },
                { dr: 100, er: 100, rr: 150 },
                { dr: 100, er: 250, rr: 250 },
                { dr: 110, er: 60, rr: 250 },
                { dr: 110, er: 100, rr: 110 },
                { dr: 110, er: 250, rr: 250 },
                { dr: 115, er: 230, rr: 1000 },
                { dr: 120, er: 250, rr: 250 },
                { dr: 125, er: 100, rr: 125 },
                { dr: 125, er: 125, rr: 250 },
                { dr: 125, er: 125, rr: 125 },
                { dr: 130, er: 70, rr: 250 },
                { dr: 130, er: 75, rr: 130 },
                { dr: 135, er: 70, rr: 135 },
                { dr: 135, er: 80, rr: 135 },
                { dr: 135, er: 135, rr: 135 },
                { dr: 150, er: 75, rr: 75 },
                { dr: 150, er: 100, rr: 150 },
                { dr: 150, er: 125, rr: 350 },
                { dr: 150, er: 150, rr: 150 },
                { dr: 150, er: 150, rr: 250 },
                { dr: 150, er: 250, rr: 250 },
                { dr: 175, er: 100, rr: 175 },
                { dr: 175, er: 175, rr: 250 },
                { dr: 200, er: 100, rr: 250 },
                { dr: 200, er: 150, rr: 250 },
                { dr: 200, er: 200, rr: 200 },
                { dr: 250, er: 200, rr: 250 },
                { dr: 250, er: 250, rr: 250 },
                { dr: 300, er: 150, rr: 150 },
                { dr: 300, er: 300, rr: 300 },
                { dr: 300, er: 300, rr: 400 },
                { dr: 400, er: 400, rr: 500 },
                { dr: 400, er: 500, rr: 500 },
                { dr: 500, er: 500, rr: 500 },
                { dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300, name: "SBQ", tip: "ResistanceSBQ", mitigation: 0.3 },
                { dr: 400, er: 400, rr: 500, fr: 400, cr: 400, pr: 400, name: "Randal", tip: "ResistanceRandal", mitigation: 0.9 },
                { dr: 400, er: 400, rr: 500, fr: 400, cr: 400, pr: 400, name: "Earle", tip: "ResistanceEarle", mitigation: 0.2 },
            ];

            var resistancesSortDefault = function(a, b) {
                if (a.name !== undefined && b.name === undefined) {
                    return 1;
                }
                if (a.name === undefined && b.name !== undefined) {
                    return -1;
                }
                for (var key of ["dr", "er", "rr", "cr", "fr", "pr"]) {
                    var ak = a[key];
                    var bk = b[key];

                    if (ak < bk) {
                        return -1;
                    }
                    if (ak > bk) {
                        return 1;
                    }
                }
                if (a.mitigation !== undefined && b.mitigation !== undefined) {
                    return b.mitigation - a.mitigation;
                }
                if (a.level !== undefined && b.level !== undefined) {
                    return a.level - b.level;
                }
                return 0;
            };

            var resistancesSortReverse = function(a, b) {
                return resistancesSortDefault(b, a);
            };

            // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv

            allEffects.set("Melee", [
                // 1: Prefix
                [
                    {
                        name: "Assassin's",
                        versus: ["Player", "NPC"],
                        versusAddPercent: 10,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Executioner's",
                        damageMultPercent: 50
                    },
                    {
                        name: "Exterminator's",
                        versus: ["Bug", "Mirelurk"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }                    },
                    {
                        name: "Anti-armor",
                        ignoreDRPercent: 50
                    },
                    {
                        name: "Nocturnal",
                        damageMultPercent: 40,
                        patchOverride: {
                            "P27": {
                                damageMultPercent: 50
                            }
                        }                    
                    },
                    {
                        name: "Zealot's",
                        versus: ["Scorched"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Hunter's",
                        versus: ["Animal"],
                        damageMultPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Mutant slayer's",
                        versus: ["Mutant"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Mutant's",
                        damageMultPercent: 10,
                        patchOverride: {
                            "P27": {
                                damageMultPercent: 5
                            }
                        }
                    },
                    {
                        name: "Ghoul slayer's",
                        versus: ["Ghoul"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Bloodied",
                        damageMultPercent: 60
                    },
                    {
                        name: "Troubleshooter's",
                        versus: ["Robot"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Instigating",
                        damageMultPercent: 100
                    },
                    {
                        name: "Furious"
                    },
                    {
                        name: "Junkie's"
                    },
                    {
                        name: "Aristocrats",
                        text: "Aristocrat's",
                        capsDamageMultPercent: 50,
                    },
                    {
                        name: "Juggernauts",
                        text: "Juggernaut's",
                        healthDamageMultPercent: 25,
                    },
                    {
                        name: "Gourmands",
                        text: "Gourmand's",
                        feedDamageMultPercent: 24,
                    }
                ],
                // 2: Major
                [
                    {
                        name: "40% increased swing speed",
                        linkId: "SS",
                        speedMultPercent: 40
                    },
                    {
                        name: "40% power attack damage",
                        linkId: "40PA",
                        damageMultPercentPowerAttack: 40
                    },
                    {
                        name: "Steady",
                        text: "Steady",
                        steadyDamageMultPercent: 25,
                    },
                    {
                        name: "VATS Crits do +50% damage",
                        linkId: "VATSCrit50",
                        text: "VATS Crits do +50% damage",
                        criticalDamage: 50,
                    },
                ],
                // 3: minor
                [
                    {
                        name: "Strength",
                        text: "+1 Strength"
                        // no multiplier, considered with the base calculation
                    }
                ],
                // 4: 4th legendary effect
                [
                    {
                        name: "Warmonger's",
                        linkId: "Warmongers",
                        damageMultPercent: 150,
                    },
                    {
                        name: "Bruiser's",
                        linkId: "Bruisers",
                        damageMultPercent: 15
                    }
                ]
            ]);

            allEffects.set("Ranged", [
                // 1: Prefix
                [
                    {
                        name: "Assassin's",
                        versus: ["Player", "NPC"],
                        versusAddPercent: 10,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Executioner's",
                        damageMultPercent: 50
                    },
                    {
                        name: "Furious",
                    },
                    {
                        name: "Exterminator's",
                        versus: ["Bug", "Mirelurk"],
                        versusAddPercent: 50,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Two shot",
                        damageMultPercent: 25
                    },
                    {
                        name: "Two shot (pre nerf)",
                        linkId: "TSN",
                        damageMultPercent: 100
                    },
                    {
                        name: "Anti-armor",
                        ignoreDRPercent: 50
                    },
                    {
                        name: "Nocturnal",
                        damageMultPercent: 30,
                        patchOverride: {
                            "P27": {
                                damageMultPercent: 50
                            }
                        }
                    },
                    {
                        name: "Zealot's",
                        versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Hunter's",
                        versus: ["Animal"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Mutant slayer's",
                        versus: ["Mutant"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Mutant's",
                        damageMultPercent: 10,
                        maxMutations: 1,
                        patchOverride: {
                            "P27A": {
                                damageMultPercent: 5,
                                maxMutations: 5,
                            }
                        }
                    },
                    {
                        name: "Ghoul slayer's",
                        versus: ["Ghoul"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Bloodied",
                        damageMultPercent: 60
                    },
                    {
                        name: "Instigating",
                        damageMultPercent: 100
                    },
                    {
                        name: "Troubleshooter's",
                        versus: ["Robot"],
                        versusAddPercent: 30,
                        patchOverride: {
                            "P27A": {
                                versusAddPercent: 50
                            }
                        }
                    },
                    {
                        name: "Junkie's"
                    },
                    {
                        name: "Double",
                        clipSizeMult: 1,
                    },
                    {
                        name: "Quad",
                        clipSizeMult: 3,
                    },
                    {
                        name: "Aristocrats",
                        text: "Aristocrat's",
                        capsDamageMultPercent: 50,
                    },
                    {
                        name: "Juggernauts",
                        text: "Juggernaut's",
                        healthDamageMultPercent: 25,
                    },
                    {
                        name: "Gourmands",
                        text: "Gourmand's",
                        feedDamageMultPercent: 24,
                    }
                ],
                // 2: Major
                [
                    {
                        name: "Explosive",
                        damageMultPercent: 20
                    },
                    {
                        name: "ExplosiveCustomShotgun",
                        text: "Explosive (shotguns)",
                        damageMultPercent: 24 // 3% per pellet (usually 8)
                    },
                    {
                        name: "ExplosiveOld",
                        text: "Explosive (legacy)",
                        damageMultPercent: 100
                    },
                    {
                        name: "Aiming",
                        linkId: "ADS",
                        text: "+% damage while aiming",
                        damageMultPercent: 10,
                        patchOverride: {
                            "P27": {
                                damageMultPercent: 25,
                            }
                        }
                    },
                    {
                        name: "VATS Crits do +50% damage",
                        linkId: "VATSCrit50",
                        text: "VATS Crits do +50% damage",
                        criticalDamage: 50,
                    },
                    {
                        name: "25% increased fire rate",
                        linkId: "FFR",
                        //speedMultPercent: 25
                        speedAddPercent: 25
                    },
                    {
                        name: "Lastshot",
                        text: "Last Shot",
                        lastDamageMultPercent: 100,
                        lastChance: 25,
                    },
                    {
                        name: "Steady",
                        text: "Steady",
                        steadyDamageMultPercent: 25,
                    }
                ],
                // 3: minor
                [
                    {
                        name: "15% faster reload",
                        linkId: "FRL",
                        reloadTimeMult: -15
                    }
                ],
                // 4: 4th legendary effect
                [
                    {
                        name: "Warmonger's",
                        linkId: "Warmongers",
                        damageMultPercent: 150,
                    },
                    {
                        name: "Bruiser's",
                        linkId: "Bruisers",
                        damageMultPercent: 15
                    }
                ]
            ]);


            var patchChain = {
                "P27": [ "P27A" ],
                "P33": [ "P27A", "P27" ],
                "P34": [ "P27A", "P27" ]
            }

            // -------------------------------------------------------------------------------------
            enemyCategories = [];

            var enemyResistancesMap = {
                "alien": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 7, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 9, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 14, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 21, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 30, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 39, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 50, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                ],
                "alien_cpt-alpha-omega": [
                    { level: 1, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 10, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 20, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 30, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 40, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 50, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 60, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 70, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 80, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "alien_general-zeta": [
                    { level: 1, dr: 27, er: 27, rr: 27, fr: 27, cr: 27, pr: 1000 }, 
                    { level: 10, dr: 27, er: 27, rr: 27, fr: 27, cr: 27, pr: 1000 }, 
                    { level: 20, dr: 38, er: 38, rr: 38, fr: 38, cr: 38, pr: 1000 }, 
                    { level: 30, dr: 75, er: 75, rr: 75, fr: 75, cr: 75, pr: 1000 }, 
                    { level: 40, dr: 75, er: 75, rr: 75, fr: 75, cr: 75, pr: 1000 }, 
                    { level: 50, dr: 75, er: 75, rr: 75, fr: 75, cr: 75, pr: 1000 }, 
                    { level: 60, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 70, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 80, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 100, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 1000 }, 
                ],
                "alien_lt-kappa": [
                    { level: 1, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 10, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 20, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 30, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 40, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 50, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 60, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 70, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 80, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "alienexotrooper": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 20, dr: 25, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 30, dr: 75, er: 75, rr: 100, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 100, er: 100, rr: 150, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 50, dr: 200, er: 200, rr: 250, fr: 250, cr: 250, pr: 1000 }, 
                    { level: 60, dr: 250, er: 250, rr: 300, fr: 300, cr: 300, pr: 1000 }, 
                    { level: 75, dr: 250, er: 250, rr: 300, fr: 300, cr: 300, pr: 1000 }, 
                    { level: 100, dr: 250, er: 250, rr: 300, fr: 300, cr: 300, pr: 1000 }, 
                ],
                "angler": [
                    { level: 15, dr: 50, er: 50, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 25, dr: 50, er: 50, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 37, dr: 100, er: 100, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 51, dr: 150, er: 150, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 65, dr: 150, er: 150, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 81, dr: 150, er: 150, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 100, dr: 150, er: 150, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                ],
                "asamturret": [
                    { level: 1, dr: 50, er: 50, rr: 0, fr: 50, cr: 50, pr: 50 }, 
                    { level: 100, dr: 50, er: 50, rr: 0, fr: 50, cr: 50, pr: 50 }, 
                ],
                "assaultron": [
                    { level: 17, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 24, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 36, dr: 100, er: 50, rr: 100, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 46, dr: 100, er: 50, rr: 100, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 150, er: 75, rr: 150, fr: 150, cr: 150, pr: 1000 }, 
                ],
                "assaultronintimidator": [
                    { level: 20, dr: -115, er: -50, rr: 1, fr: -450, cr: -450, pr: -450 }, 
                    { level: 40, dr: -50, er: 75, rr: 75, fr: -350, cr: -350, pr: -350 }, 
                    { level: 100, dr: 1, er: 150, rr: 150, fr: -350, cr: -350, pr: -350 }, 
                ],
                "attackdog": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 0, cr: 0, pr: 0 }, 
                    { level: 7, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                    { level: 14, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                    { level: 21, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                ],
                "behemothboss": [
                    { level: 25, dr: 50, er: 30, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 50, dr: 75, er: 50, rr: 175, fr: 175, cr: 175, pr: 175 }, 
                    { level: 100, dr: 135, er: 80, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                ],
                "bloatfly": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 9, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 17, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 27, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 40, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 55, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                    { level: 70, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                    { level: 90, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                ],
                "bloodbug": [
                    { level: 2, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 10, dr: 12, er: 12, rr: 12, fr: 12, cr: 12, pr: 12 }, 
                    { level: 18, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                    { level: 26, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 34, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 42, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 50, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 65, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 85, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                ],
                "bloodeagledestroyer": [
                    { level: 20, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 40, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "brahmin": [
                    { level: 3, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 10, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 20, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 30, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 40, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                ],
                "cavecricket": [
                    { level: 30, dr: 50, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 38, dr: 50, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 46, dr: 100, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 60, dr: 120, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 75, dr: 120, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 95, dr: 120, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 120, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "communistcommander": [
                    { level: 20, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 40, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "critter": [
                    { level: 1, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                    { level: 100, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                ],
                "cultisthighpriest": [
                    { level: 1, dr: 3, er: 3, rr: 3, fr: 3, cr: 3, pr: 3 }, 
                    { level: 4, dr: 3, er: 3, rr: 3, fr: 3, cr: 3, pr: 3 }, 
                    { level: 7, dr: 3, er: 3, rr: 3, fr: 3, cr: 3, pr: 3 }, 
                    { level: 9, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 14, dr: 13, er: 13, rr: 13, fr: 13, cr: 13, pr: 13 }, 
                    { level: 21, dr: 31, er: 31, rr: 31, fr: 31, cr: 31, pr: 31 }, 
                    { level: 30, dr: 31, er: 31, rr: 31, fr: 31, cr: 31, pr: 31 }, 
                    { level: 39, dr: 63, er: 63, rr: 63, fr: 63, cr: 63, pr: 63 }, 
                    { level: 50, dr: 125, er: 125, rr: 125, fr: 125, cr: 125, pr: 125 }, 
                    { level: 100, dr: 187, er: 187, rr: 187, fr: 187, cr: 187, pr: 187 }, 
                ],
                "deathclaw": [
                    { level: 21, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 31, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 41, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 51, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 61, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 71, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 81, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 100, dr: 500, er: 500, rr: 500, fr: 500, cr: 500, pr: 500 }, 
                ],
                "eyebot": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 60, dr: 120, er: 120, rr: 120, fr: 120, cr: 120, pr: 1000 }, 
                ],
                "feralghoul": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 2 }, 
                    { level: 3, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 2 }, 
                    { level: 9, dr: 8, er: 8, rr: 1000, fr: 8, cr: 8, pr: 8 }, 
                    { level: 15, dr: 8, er: 8, rr: 1000, fr: 8, cr: 8, pr: 8 }, 
                    { level: 22, dr: 25, er: 25, rr: 1000, fr: 25, cr: 25, pr: 25 }, 
                    { level: 32, dr: 50, er: 50, rr: 1000, fr: 50, cr: 50, pr: 50 }, 
                    { level: 42, dr: 50, er: 50, rr: 1000, fr: 50, cr: 50, pr: 50 }, 
                    { level: 52, dr: 100, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 62, dr: 100, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 72, dr: 100, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 82, dr: 100, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 92, dr: 100, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 100, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                ],
                "feralghoulglowing": [
                    { level: 22, dr: 50, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 32, dr: 50, er: 100, rr: 1000, fr: 100, cr: 100, pr: 100 }, 
                    { level: 40, dr: 100, er: 200, rr: 1000, fr: 200, cr: 200, pr: 200 }, 
                    { level: 58, dr: 100, er: 200, rr: 1000, fr: 200, cr: 200, pr: 200 }, 
                    { level: 75, dr: 100, er: 200, rr: 1000, fr: 200, cr: 200, pr: 200 }, 
                    { level: 95, dr: 100, er: 200, rr: 1000, fr: 200, cr: 200, pr: 200 }, 
                    { level: 100, dr: 100, er: 200, rr: 1000, fr: 200, cr: 200, pr: 200 }, 
                ],
                "flatwoodsmonster": [
                    { level: 30, dr: 50, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 40, dr: 100, er: 200, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 50, dr: 150, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 75, dr: 150, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 100, dr: 200, er: 400, rr: 400, fr: 400, cr: 400, pr: 400 }, 
                ],
                "floater": [
                    { level: 1, dr: 10, er: 20, rr: 1000, fr: 20, cr: 20, pr: 20 }, 
                    { level: 4, dr: 30, er: 60, rr: 1000, fr: 60, cr: 60, pr: 60 }, 
                    { level: 7, dr: 45, er: 90, rr: 1000, fr: 90, cr: 90, pr: 90 }, 
                    { level: 11, dr: 90, er: 120, rr: 1000, fr: 120, cr: 120, pr: 120 }, 
                    { level: 15, dr: 120, er: 150, rr: 1000, fr: 150, cr: 150, pr: 150 }, 
                    { level: 21, dr: 160, er: 190, rr: 1000, fr: 190, cr: 190, pr: 190 }, 
                    { level: 28, dr: 190, er: 230, rr: 1000, fr: 230, cr: 230, pr: 230 }, 
                    { level: 35, dr: 250, er: 280, rr: 1000, fr: 280, cr: 280, pr: 280 }, 
                    { level: 47, dr: 280, er: 290, rr: 1000, fr: 290, cr: 290, pr: 290 }, 
                    { level: 59, dr: 300, er: 300, rr: 1000, fr: 300, cr: 300, pr: 300 }, 
                    { level: 73, dr: 300, er: 300, rr: 1000, fr: 300, cr: 300, pr: 300 }, 
                ],
                "floaterflamer": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 1000, cr: 2, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 1000, fr: 1000, cr: 2, pr: 2 }, 
                    { level: 7, dr: 2, er: 2, rr: 1000, fr: 1000, cr: 2, pr: 2 }, 
                    { level: 11, dr: 8, er: 8, rr: 1000, fr: 1000, cr: 4, pr: 8 }, 
                    { level: 15, dr: 8, er: 8, rr: 1000, fr: 1000, cr: 4, pr: 8 }, 
                    { level: 21, dr: 25, er: 25, rr: 1000, fr: 1000, cr: 10, pr: 25 }, 
                    { level: 28, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 25, pr: 50 }, 
                    { level: 35, dr: 100, er: 100, rr: 1000, fr: 1000, cr: 50, pr: 100 }, 
                    { level: 47, dr: 280, er: 290, rr: 1000, fr: 1000, cr: 140, pr: 290 }, 
                    { level: 59, dr: 300, er: 300, rr: 1000, fr: 1000, cr: 150, pr: 300 }, 
                    { level: 73, dr: 300, er: 300, rr: 1000, fr: 1000, cr: 150, pr: 300 }, 
                    { level: 100, dr: 400, er: 400, rr: 1000, fr: 1000, cr: 200, pr: 350 }, 
                ],
                "floaterfreezer": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 2, cr: 1000, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 1000, fr: 2, cr: 1000, pr: 2 }, 
                    { level: 7, dr: 2, er: 2, rr: 1000, fr: 2, cr: 1000, pr: 2 }, 
                    { level: 11, dr: 8, er: 8, rr: 1000, fr: 4, cr: 1000, pr: 8 }, 
                    { level: 15, dr: 8, er: 8, rr: 1000, fr: 4, cr: 1000, pr: 8 }, 
                    { level: 21, dr: 25, er: 25, rr: 1000, fr: 10, cr: 1000, pr: 25 }, 
                    { level: 28, dr: 50, er: 50, rr: 1000, fr: 25, cr: 1000, pr: 50 }, 
                    { level: 35, dr: 100, er: 100, rr: 1000, fr: 50, cr: 1000, pr: 100 }, 
                    { level: 47, dr: 280, er: 290, rr: 1000, fr: 140, cr: 1000, pr: 290 }, 
                    { level: 59, dr: 300, er: 300, rr: 1000, fr: 150, cr: 1000, pr: 300 }, 
                    { level: 73, dr: 300, er: 300, rr: 1000, fr: 150, cr: 1000, pr: 300 }, 
                    { level: 100, dr: 400, er: 400, rr: 1000, fr: 200, cr: 1000, pr: 350 }, 
                ],
                "floatergnasher": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 4, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 7, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 11, dr: 8, er: 8, rr: 1000, fr: 4, cr: 8, pr: 1000 }, 
                    { level: 15, dr: 8, er: 8, rr: 1000, fr: 4, cr: 8, pr: 1000 }, 
                    { level: 21, dr: 25, er: 25, rr: 1000, fr: 10, cr: 25, pr: 1000 }, 
                    { level: 28, dr: 50, er: 50, rr: 1000, fr: 25, cr: 50, pr: 1000 }, 
                    { level: 35, dr: 100, er: 100, rr: 1000, fr: 50, cr: 100, pr: 1000 }, 
                    { level: 47, dr: 280, er: 290, rr: 1000, fr: 140, cr: 290, pr: 1000 }, 
                    { level: 59, dr: 300, er: 300, rr: 1000, fr: 150, cr: 300, pr: 1000 }, 
                    { level: 73, dr: 300, er: 300, rr: 1000, fr: 150, cr: 300, pr: 1000 }, 
                    { level: 100, dr: 400, er: 400, rr: 1000, fr: 200, cr: 350, pr: 1000 }, 
                ],
                "fogcrawler": [
                    { level: 27, dr: 50, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 39, dr: 50, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 51, dr: 100, er: 200, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 63, dr: 100, er: 200, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 75, dr: 100, er: 200, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                ],
                "grafton": [
                    { level: 15, dr: 50, er: 25, rr: 25, fr: 25, cr: 50, pr: 1000 }, 
                    { level: 30, dr: 100, er: 50, rr: 50, fr: 50, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 200, er: 100, rr: 100, fr: 100, cr: 200, pr: 1000 }, 
                    { level: 50, dr: 200, er: 100, rr: 100, fr: 100, cr: 200, pr: 1000 }, 
                    { level: 75, dr: 200, er: 100, rr: 100, fr: 100, cr: 200, pr: 1000 }, 
                    { level: 100, dr: 400, er: 200, rr: 200, fr: 200, cr: 400, pr: 1000 }, 
                ],
                "gulper": [
                    { level: 10, dr: 30, er: 30, rr: 250, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 22, dr: 90, er: 90, rr: 250, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 34, dr: 90, er: 90, rr: 250, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 46, dr: 90, er: 90, rr: 250, fr: 100, cr: 100, pr: 1000 }, 
                ],
                "hellcatmercenary": [
                    { level: 1, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 4, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 7, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 9, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                    { level: 14, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                    { level: 21, dr: 25, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                    { level: 30, dr: 30, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 39, dr: 35, er: 30, rr: 30, fr: 30, cr: 30, pr: 30 }, 
                    { level: 50, dr: 100, er: 70, rr: 70, fr: 70, cr: 70, pr: 70 }, 
                    { level: 100, dr: 165, er: 90, rr: 90, fr: 90, cr: 90, pr: 90 }, 
                ],
                "hermitcrab": [
                    { level: 21, dr: 50, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 31, dr: 100, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 41, dr: 100, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 51, dr: 100, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 100, dr: 200, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                ],
                "hewsen": [
                    { level: 25, dr: 45, er: 80, rr: 80, fr: 80, cr: 80, pr: 80 }, 
                    { level: 50, dr: 80, er: 180, rr: 180, fr: 180, cr: 180, pr: 180 }, 
                    { level: 100, dr: 120, er: 500, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "honeybeast": [
                    { level: 16, dr: 50, er: 50, rr: 50, fr: 25, cr: 50, pr: 1000 }, 
                    { level: 26, dr: 50, er: 50, rr: 50, fr: 25, cr: 50, pr: 1000 }, 
                    { level: 36, dr: 50, er: 50, rr: 50, fr: 25, cr: 50, pr: 1000 }, 
                    { level: 46, dr: 100, er: 100, rr: 100, fr: 50, cr: 100, pr: 1000 }, 
                    { level: 56, dr: 150, er: 150, rr: 150, fr: 75, cr: 150, pr: 1000 }, 
                    { level: 70, dr: 150, er: 150, rr: 150, fr: 75, cr: 150, pr: 1000 }, 
                    { level: 80, dr: 150, er: 150, rr: 150, fr: 75, cr: 150, pr: 1000 }, 
                    { level: 90, dr: 150, er: 150, rr: 150, fr: 75, cr: 150, pr: 1000 }, 
                    { level: 100, dr: 200, er: 200, rr: 200, fr: 100, cr: 200, pr: 1000 }, 
                ],
                "honeybeastbeeswarm": [
                    { level: 6, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 4 }, 
                    { level: 16, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 4 }, 
                    { level: 26, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                    { level: 36, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                    { level: 46, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                    { level: 56, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                ],
                "humanfanatic": [
                    { level: 1, dr: 14, er: 14, rr: 8, fr: 5, cr: 4, pr: 5 }, 
                    { level: 4, dr: 18, er: 18, rr: 11, fr: 7, cr: 5, pr: 7 }, 
                    { level: 7, dr: 21, er: 21, rr: 14, fr: 8, cr: 5, pr: 8 }, 
                    { level: 9, dr: 23, er: 23, rr: 14, fr: 9, cr: 7, pr: 9 }, 
                    { level: 14, dr: 28, er: 28, rr: 17, fr: 11, cr: 8, pr: 11 }, 
                    { level: 21, dr: 33, er: 33, rr: 21, fr: 13, cr: 8, pr: 13 }, 
                    { level: 30, dr: 38, er: 38, rr: 23, fr: 14, cr: 10, pr: 14 }, 
                    { level: 39, dr: 41, er: 41, rr: 26, fr: 16, cr: 11, pr: 16 }, 
                    { level: 50, dr: 45, er: 45, rr: 29, fr: 17, cr: 11, pr: 17 }, 
                    { level: 100, dr: 60, er: 60, rr: 38, fr: 23, cr: 15, pr: 23 }, 
                ],
                "humanfanaticboss": [
                    { level: 1, dr: 21, er: 21, rr: 13, fr: 8, cr: 6, pr: 8 }, 
                    { level: 4, dr: 28, er: 28, rr: 17, fr: 10, cr: 7, pr: 10 }, 
                    { level: 7, dr: 32, er: 32, rr: 21, fr: 13, cr: 8, pr: 13 }, 
                    { level: 9, dr: 36, er: 36, rr: 22, fr: 14, cr: 10, pr: 14 }, 
                    { level: 14, dr: 43, er: 43, rr: 26, fr: 16, cr: 12, pr: 16 }, 
                    { level: 21, dr: 51, er: 51, rr: 32, fr: 20, cr: 13, pr: 20 }, 
                    { level: 30, dr: 58, er: 58, rr: 36, fr: 22, cr: 15, pr: 22 }, 
                    { level: 39, dr: 63, er: 63, rr: 39, fr: 24, cr: 16, pr: 24 }, 
                    { level: 50, dr: 69, er: 69, rr: 44, fr: 26, cr: 17, pr: 26 }, 
                    { level: 100, dr: 92, er: 92, rr: 58, fr: 35, cr: 23, pr: 35 }, 
                ],
                "humanfanaticminiboss": [
                    { level: 1, dr: 18, er: 18, rr: 11, fr: 7, cr: 5, pr: 7 }, 
                    { level: 4, dr: 24, er: 24, rr: 15, fr: 9, cr: 6, pr: 9 }, 
                    { level: 7, dr: 28, er: 28, rr: 18, fr: 11, cr: 7, pr: 11 }, 
                    { level: 9, dr: 31, er: 31, rr: 19, fr: 12, cr: 9, pr: 12 }, 
                    { level: 14, dr: 37, er: 37, rr: 23, fr: 14, cr: 10, pr: 14 }, 
                    { level: 21, dr: 44, er: 44, rr: 28, fr: 17, cr: 11, pr: 17 }, 
                    { level: 30, dr: 50, er: 50, rr: 31, fr: 19, cr: 13, pr: 19 }, 
                    { level: 39, dr: 55, er: 55, rr: 34, fr: 21, cr: 14, pr: 21 }, 
                    { level: 50, dr: 60, er: 60, rr: 38, fr: 23, cr: 15, pr: 23 }, 
                    { level: 100, dr: 80, er: 80, rr: 50, fr: 30, cr: 20, pr: 30 }, 
                ],
                "humanfanaticminibosselite": [
                    { level: 1, dr: 18, er: 18, rr: 11, fr: 7, cr: 5, pr: 7 }, 
                    { level: 4, dr: 24, er: 24, rr: 15, fr: 9, cr: 6, pr: 9 }, 
                    { level: 7, dr: 28, er: 28, rr: 18, fr: 11, cr: 7, pr: 11 }, 
                    { level: 9, dr: 31, er: 31, rr: 19, fr: 12, cr: 9, pr: 12 }, 
                    { level: 14, dr: 37, er: 37, rr: 23, fr: 14, cr: 10, pr: 14 }, 
                    { level: 21, dr: 44, er: 44, rr: 28, fr: 17, cr: 11, pr: 17 }, 
                    { level: 30, dr: 50, er: 50, rr: 31, fr: 19, cr: 13, pr: 19 }, 
                    { level: 39, dr: 55, er: 55, rr: 34, fr: 21, cr: 14, pr: 21 }, 
                    { level: 50, dr: 60, er: 60, rr: 38, fr: 23, cr: 15, pr: 23 }, 
                    { level: 100, dr: 80, er: 80, rr: 50, fr: 30, cr: 20, pr: 30 }, 
                ],
                "humanfanaticpowerarmor": [
                    { level: 1, dr: 18, er: 18, rr: 11, fr: 7, cr: 5, pr: 7 }, 
                    { level: 4, dr: 24, er: 24, rr: 15, fr: 9, cr: 6, pr: 9 }, 
                    { level: 7, dr: 28, er: 28, rr: 18, fr: 11, cr: 7, pr: 11 }, 
                    { level: 9, dr: 31, er: 31, rr: 19, fr: 12, cr: 9, pr: 12 }, 
                    { level: 14, dr: 37, er: 37, rr: 23, fr: 14, cr: 10, pr: 14 }, 
                    { level: 21, dr: 44, er: 44, rr: 28, fr: 17, cr: 11, pr: 17 }, 
                    { level: 30, dr: 50, er: 50, rr: 31, fr: 19, cr: 13, pr: 19 }, 
                    { level: 39, dr: 55, er: 55, rr: 34, fr: 21, cr: 14, pr: 21 }, 
                    { level: 50, dr: 60, er: 60, rr: 38, fr: 23, cr: 15, pr: 23 }, 
                    { level: 100, dr: 80, er: 80, rr: 50, fr: 30, cr: 20, pr: 30 }, 
                ],
                "humanraider": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 7, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 9, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 14, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 21, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 30, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 39, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 50, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                ],
                "humansettler": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 7, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 9, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 14, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 21, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 30, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 39, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 50, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                ],
                "kit": [
                    { level: 25, dr: 25, er: 35, rr: 80, fr: 80, cr: 80, pr: 80 }, 
                    { level: 50, dr: 50, er: 70, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 100, dr: 100, er: 140, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                ],
                "liberator": [
                    { level: 1, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 1000 }, 
                    { level: 5, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 1000 }, 
                    { level: 10, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 1000 }, 
                    { level: 18, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 1000 }, 
                    { level: 30, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 1000 }, 
                    { level: 42, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 54, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 100, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 1000 }, 
                ],
                "megasloth": [
                    { level: 30, dr: 100, er: 100, rr: 100, fr: 50, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 100, er: 100, rr: 100, fr: 50, cr: 100, pr: 1000 }, 
                    { level: 50, dr: 200, er: 150, rr: 250, fr: 150, cr: 1000, pr: 1000 }, 
                    { level: 100, dr: 400, er: 300, rr: 500, fr: 300, cr: 1000, pr: 1000 }, 
                ],
                "mirelurkcrab": [
                    { level: 5, dr: 2, er: 2, rr: 250, fr: 2, cr: 250, pr: 250 }, 
                    { level: 12, dr: 8, er: 8, rr: 250, fr: 8, cr: 250, pr: 250 }, 
                    { level: 18, dr: 10, er: 10, rr: 250, fr: 10, cr: 250, pr: 250 }, 
                    { level: 26, dr: 50, er: 50, rr: 250, fr: 50, cr: 250, pr: 250 }, 
                    { level: 34, dr: 50, er: 50, rr: 250, fr: 50, cr: 250, pr: 250 }, 
                    { level: 42, dr: 50, er: 50, rr: 250, fr: 50, cr: 250, pr: 250 }, 
                    { level: 50, dr: 90, er: 90, rr: 250, fr: 90, cr: 250, pr: 250 }, 
                    { level: 58, dr: 90, er: 90, rr: 250, fr: 90, cr: 250, pr: 250 }, 
                    { level: 66, dr: 90, er: 90, rr: 250, fr: 90, cr: 250, pr: 250 }, 
                    { level: 80, dr: 90, er: 90, rr: 250, fr: 90, cr: 250, pr: 250 }, 
                    { level: 95, dr: 90, er: 90, rr: 250, fr: 90, cr: 250, pr: 250 }, 
                    { level: 105, dr: 90, er: 90, rr: 250, fr: 90, cr: 250, pr: 250 }, 
                ],
                "mirelurkhunter": [
                    { level: 24, dr: 25, er: 25, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 34, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 46, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 58, dr: 90, er: 90, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 70, dr: 90, er: 90, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 85, dr: 90, er: 90, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 90, er: 90, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "mirelurkking": [
                    { level: 30, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 40, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 50, dr: 125, er: 125, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 65, dr: 125, er: 125, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 80, dr: 125, er: 125, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 125, er: 125, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "mirelurkqueen": [
                    { level: 20, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 35, dr: 100, er: 100, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 50, dr: 150, er: 100, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 65, dr: 150, er: 100, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 80, dr: 150, er: 100, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 150, er: 100, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "mirelurkspawn": [
                    { level: 1, dr: 5, er: 5, rr: 5, fr: 5, cr: 5, pr: 5 }, 
                ],
                "moleminer": [
                    { level: 2, dr: 2, er: 2, rr: 250, fr: 2, cr: 2, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 250, fr: 2, cr: 2, pr: 2 }, 
                    { level: 8, dr: 2, er: 2, rr: 250, fr: 2, cr: 2, pr: 2 }, 
                    { level: 14, dr: 8, er: 8, rr: 250, fr: 8, cr: 8, pr: 8 }, 
                    { level: 22, dr: 25, er: 25, rr: 250, fr: 25, cr: 25, pr: 25 }, 
                    { level: 30, dr: 50, er: 50, rr: 250, fr: 50, cr: 50, pr: 50 }, 
                    { level: 40, dr: 50, er: 50, rr: 250, fr: 50, cr: 50, pr: 50 }, 
                    { level: 50, dr: 100, er: 75, rr: 250, fr: 75, cr: 75, pr: 75 }, 
                    { level: 65, dr: 100, er: 75, rr: 250, fr: 75, cr: 75, pr: 75 }, 
                    { level: 80, dr: 100, er: 75, rr: 250, fr: 75, cr: 75, pr: 75 }, 
                    { level: 100, dr: 100, er: 75, rr: 250, fr: 75, cr: 75, pr: 75 }, 
                ],
                "molerat": [
                    { level: 1, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 8 }, 
                    { level: 7, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 8 }, 
                    { level: 14, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 8 }, 
                    { level: 21, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 28, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 35, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 42, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 50, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 65, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 80, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                    { level: 95, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 20 }, 
                ],
                "mothman": [
                    { level: 35, dr: 100, er: 50, rr: 250, fr: 50, cr: 250, pr: 250 }, 
                    { level: 45, dr: 200, er: 100, rr: 250, fr: 100, cr: 250, pr: 250 }, 
                    { level: 55, dr: 250, er: 250, rr: 250, fr: 100, cr: 250, pr: 250 }, 
                    { level: 65, dr: 250, er: 250, rr: 250, fr: 100, cr: 250, pr: 250 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 100, cr: 250, pr: 250 }, 
                ],
                "mrhandy": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 8, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 14, dr: 8, er: 4, rr: 8, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 22, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 32, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 47, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 54, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 62, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                ],
                "mutanthound": [
                    { level: 8, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 28, dr: 40, er: 30, rr: 40, fr: 40, cr: 40, pr: 40 }, 
                    { level: 35, dr: 40, er: 30, rr: 40, fr: 40, cr: 40, pr: 40 }, 
                    { level: 50, dr: 40, er: 30, rr: 40, fr: 40, cr: 40, pr: 40 }, 
                    { level: 65, dr: 40, er: 30, rr: 40, fr: 40, cr: 40, pr: 40 }, 
                    { level: 80, dr: 40, er: 30, rr: 40, fr: 40, cr: 40, pr: 40 }, 
                    { level: 95, dr: 40, er: 30, rr: 40, fr: 40, cr: 40, pr: 40 }, 
                ],
                "norland": [
                    { level: 25, dr: 50, er: 50, rr: 80, fr: 80, cr: 80, pr: 80 }, 
                    { level: 50, dr: 90, er: 90, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 100, dr: 130, er: 130, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                ],
                "protectron": [
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 14, dr: 16, er: 8, rr: 16, fr: 16, cr: 16, pr: 1000 }, 
                    { level: 26, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 36, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 100, dr: 400, er: 300, rr: 300, fr: 100, cr: 100, pr: 1000 }, 
                ],
                "radant": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 4, dr: 2, er: 2, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 8, dr: 2, er: 2, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 12, dr: 8, er: 8, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 16, dr: 10, er: 10, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 20, dr: 25, er: 25, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 24, dr: 25, er: 25, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 28, dr: 25, er: 25, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 32, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 40, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 50, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 65, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 80, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                    { level: 95, dr: 50, er: 50, rr: 1000, fr: 1000, cr: 1000, pr: 1000 }, 
                ],
                "radrat": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 4, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 8, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 12, dr: 8, er: 8, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 16, dr: 10, er: 10, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 20, dr: 40, er: 50, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 25, dr: 25, er: 25, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                ],
                "radroach": [
                    { level: 1, dr: 4, er: 4, rr: 250, fr: 4, cr: 4, pr: 4 }, 
                    { level: 5, dr: 4, er: 4, rr: 250, fr: 4, cr: 4, pr: 4 }, 
                    { level: 10, dr: 4, er: 4, rr: 250, fr: 4, cr: 4, pr: 4 }, 
                ],
                "radscorpion": [
                    { level: 14, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 22, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 30, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 38, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 46, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 54, dr: 150, er: 125, rr: 350, fr: 125, cr: 125, pr: 1000 }, 
                    { level: 64, dr: 150, er: 125, rr: 350, fr: 125, cr: 125, pr: 1000 }, 
                    { level: 75, dr: 150, er: 125, rr: 350, fr: 125, cr: 125, pr: 1000 }, 
                    { level: 90, dr: 150, er: 125, rr: 350, fr: 125, cr: 125, pr: 1000 }, 
                    { level: 105, dr: 150, er: 125, rr: 350, fr: 125, cr: 125, pr: 1000 }, 
                    { level: 120, dr: 150, er: 125, rr: 350, fr: 125, cr: 125, pr: 1000 }, 
                ],
                "radstag": [
                    { level: 1, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 2 }, 
                    { level: 4, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 2 }, 
                    { level: 10, dr: 8, er: 8, rr: 1000, fr: 8, cr: 8, pr: 8 }, 
                    { level: 12, dr: 8, er: 8, rr: 1000, fr: 8, cr: 8, pr: 8 }, 
                    { level: 16, dr: 10, er: 10, rr: 1000, fr: 10, cr: 10, pr: 10 }, 
                    { level: 21, dr: 10, er: 10, rr: 1000, fr: 10, cr: 10, pr: 10 }, 
                    { level: 24, dr: 10, er: 10, rr: 1000, fr: 10, cr: 10, pr: 10 }, 
                    { level: 26, dr: 10, er: 10, rr: 1000, fr: 10, cr: 10, pr: 10 }, 
                    { level: 32, dr: 50, er: 50, rr: 1000, fr: 50, cr: 50, pr: 50 }, 
                    { level: 40, dr: 50, er: 50, rr: 1000, fr: 50, cr: 50, pr: 50 }, 
                ],
                "radtoad": [
                    { level: 5, dr: 2, er: 2, rr: 1000, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 18, dr: 10, er: 10, rr: 1000, fr: 10, cr: 10, pr: 1000 }, 
                    { level: 28, dr: 10, er: 10, rr: 1000, fr: 10, cr: 10, pr: 1000 }, 
                    { level: 40, dr: 50, er: 50, rr: 1000, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 50, dr: 150, er: 150, rr: 1000, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 65, dr: 150, er: 150, rr: 1000, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 80, dr: 150, er: 150, rr: 1000, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 95, dr: 150, er: 150, rr: 1000, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 100, dr: 300, er: 300, rr: 1000, fr: 300, cr: 300, pr: 1000 }, 
                ],
                "robobrain": [
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 14, dr: 10, er: 5, rr: 10, fr: 10, cr: 10, pr: 1000 }, 
                    { level: 26, dr: 25, er: 10, rr: 25, fr: 25, cr: 25, pr: 1000 }, 
                    { level: 30, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 35, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 40, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 45, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 50, dr: 175, er: 100, rr: 175, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 300, er: 200, rr: 350, fr: 300, cr: 300, pr: 1000 }, 
                ],
                "scorchbeast": [
                    { level: 50, dr: 125, er: 125, rr: 1000, fr: 125, cr: 125, pr: 125 }, 
                    { level: 65, dr: 150, er: 150, rr: 1000, fr: 150, cr: 150, pr: 150 }, 
                    { level: 80, dr: 200, er: 200, rr: 1000, fr: 200, cr: 200, pr: 200 }, 
                    { level: 100, dr: 300, er: 300, rr: 1000, fr: 300, cr: 300, pr: 300 }, 
                ],
                "scorched": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 6, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 14, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 23, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 32, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 40, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 47, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 54, dr: 80, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                    { level: 62, dr: 90, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                    { level: 68, dr: 100, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                    { level: 74, dr: 100, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                    { level: 80, dr: 100, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                    { level: 90, dr: 100, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 100, er: 100, rr: 150, fr: 100, cr: 100, pr: 100 }, 
                ],
                "sentrybot": [
                    { level: 16, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 23, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 30, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 40, dr: 100, er: 50, rr: 100, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 50, dr: 135, er: 70, rr: 135, fr: 70, cr: 70, pr: 1000 }, 
                    { level: 60, dr: 135, er: 70, rr: 135, fr: 70, cr: 70, pr: 1000 }, 
                    { level: 100, dr: 300, er: 250, rr: 300, fr: 300, cr: 300, pr: 1000 }, 
                ],
                "sheepsquatch": [
                    { level: 50, dr: 150, er: 150, rr: 150, fr: 150, cr: 150, pr: 150 }, 
                    { level: 65, dr: 200, er: 200, rr: 200, fr: 200, cr: 200, pr: 200 }, 
                    { level: 80, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 100, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                ],
                "sheepsquatchimposterling": [
                    { level: 25, dr: 60, er: 60, rr: 60, fr: 60, cr: 60, pr: 60 }, 
                    { level: 50, dr: 125, er: 125, rr: 125, fr: 125, cr: 125, pr: 125 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "shin": [
                    { level: 25, dr: 60, er: 80, rr: 80, fr: 80, cr: 80, pr: 80 }, 
                    { level: 50, dr: 90, er: 100, rr: 180, fr: 180, cr: 180, pr: 180 }, 
                    { level: 100, dr: 150, er: 130, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "smbehemoth": [
                    { level: 50, dr: 150, er: 100, rr: 150, fr: 250, cr: 250, pr: 250 }, 
                    { level: 65, dr: 250, er: 200, rr: 250, fr: 300, cr: 300, pr: 300 }, 
                    { level: 80, dr: 250, er: 200, rr: 250, fr: 350, cr: 350, pr: 350 }, 
                    { level: 95, dr: 250, er: 200, rr: 250, fr: 375, cr: 375, pr: 375 }, 
                ],
                "snallygaster": [
                    { level: 14, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 22, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 30, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 38, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 46, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 54, dr: 300, er: 300, rr: 300, fr: 300, cr: 300, pr: 300 }, 
                    { level: 100, dr: 350, er: 350, rr: 350, fr: 350, cr: 350, pr: 350 }, 
                ],
                "stingwing": [
                    { level: 10, dr: 4, er: 8, rr: 1000, fr: 4, cr: 8, pr: 1000 }, 
                    { level: 18, dr: 5, er: 10, rr: 1000, fr: 5, cr: 10, pr: 1000 }, 
                    { level: 30, dr: 25, er: 50, rr: 1000, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 42, dr: 25, er: 50, rr: 1000, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 54, dr: 60, er: 90, rr: 1000, fr: 90, cr: 90, pr: 1000 }, 
                    { level: 66, dr: 60, er: 90, rr: 1000, fr: 90, cr: 90, pr: 1000 }, 
                    { level: 78, dr: 60, er: 90, rr: 1000, fr: 90, cr: 90, pr: 1000 }, 
                    { level: 90, dr: 60, er: 90, rr: 1000, fr: 90, cr: 90, pr: 1000 }, 
                    { level: 100, dr: 60, er: 90, rr: 1000, fr: 90, cr: 90, pr: 1000 }, 
                ],
                "supermutant": [
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 10, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 16, dr: 8, er: 4, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 22, dr: 25, er: 10, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 28, dr: 25, er: 10, rr: 25, fr: 25, cr: 25, pr: 25 }, 
                    { level: 35, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 42, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 48, dr: 50, er: 25, rr: 50, fr: 50, cr: 50, pr: 50 }, 
                    { level: 59, dr: 135, er: 80, rr: 135, fr: 200, cr: 200, pr: 200 }, 
                    { level: 68, dr: 135, er: 80, rr: 135, fr: 200, cr: 200, pr: 200 }, 
                    { level: 80, dr: 135, er: 80, rr: 135, fr: 300, cr: 300, pr: 300 }, 
                    { level: 90, dr: 135, er: 80, rr: 135, fr: 300, cr: 300, pr: 300 }, 
                    { level: 100, dr: 135, er: 80, rr: 135, fr: 300, cr: 300, pr: 300 }, 
                    { level: 115, dr: 135, er: 80, rr: 135, fr: 300, cr: 300, pr: 300 }, 
                ],
                "supermutantbrawler": [
                    { level: 5, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 10, dr: 1, er: 1, rr: 1, fr: 1, cr: 4, pr: 1 }, 
                    { level: 16, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 22, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 28, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 35, dr: 10, er: 60, rr: 50, fr: 50, cr: 50, pr: 15 }, 
                    { level: 42, dr: 15, er: 60, rr: 60, fr: 60, cr: 60, pr: 20 }, 
                    { level: 48, dr: 20, er: 60, rr: 80, fr: 70, cr: 70, pr: 50 }, 
                    { level: 59, dr: 30, er: 75, rr: 135, fr: 200, cr: 200, pr: 50 }, 
                    { level: 68, dr: 50, er: 75, rr: 135, fr: 200, cr: 200, pr: 50 }, 
                    { level: 80, dr: 60, er: 80, rr: 100, fr: 250, cr: 250, pr: 50 }, 
                    { level: 90, dr: 80, er: 80, rr: 125, fr: 250, cr: 250, pr: 50 }, 
                    { level: 100, dr: 120, er: 20, rr: 150, fr: 300, cr: 300, pr: 50 }, 
                    { level: 115, dr: 100, er: 20, rr: 190, fr: 300, cr: 300, pr: 50 }, 
                ],
                "supermutantfirestarter": [
                    { level: 20, dr: 1, er: 1, rr: 1, fr: 1, cr: 1, pr: 1 }, 
                    { level: 40, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 100 }, 
                    { level: 100, dr: 250, er: 250, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "tick": [
                    { level: 1, dr: 4, er: 4, rr: 250, fr: 4, cr: 4, pr: 4 }, 
                    { level: 8, dr: 4, er: 4, rr: 250, fr: 4, cr: 4, pr: 4 }, 
                    { level: 16, dr: 4, er: 4, rr: 250, fr: 4, cr: 4, pr: 4 }, 
                    { level: 26, dr: 5, er: 5, rr: 250, fr: 5, cr: 5, pr: 5 }, 
                    { level: 35, dr: 5, er: 5, rr: 250, fr: 5, cr: 5, pr: 5 }, 
                    { level: 100, dr: 5, er: 5, rr: 250, fr: 5, cr: 5, pr: 5 }, 
                ],
                "trogfledgling": [
                    { level: 1, dr: 2, er: 4, rr: 4, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 17, er: 12, rr: 9, fr: 18, cr: 18, pr: 1000 }, 
                    { level: 25, dr: 38, er: 25, rr: 15, fr: 40, cr: 40, pr: 1000 }, 
                    { level: 50, dr: 50, er: 38, rr: 30, fr: 90, cr: 90, pr: 1000 }, 
                    { level: 75, dr: 90, er: 60, rr: 75, fr: 140, cr: 140, pr: 1000 }, 
                    { level: 100, dr: 110, er: 85, rr: 125, fr: 225, cr: 225, pr: 1000 }, 
                ],
                "trogglowing": [
                    { level: 1, dr: 4, er: 4, rr: 5, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 30, er: 20, rr: 40, fr: 15, cr: 15, pr: 1000 }, 
                    { level: 25, dr: 55, er: 40, rr: 80, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 50, dr: 90, er: 80, rr: 50, fr: 150, cr: 150, pr: 1000 }, 
                    { level: 75, dr: 125, er: 110, rr: 100, fr: 200, cr: 200, pr: 1000 }, 
                    { level: 100, dr: 175, er: 150, rr: 185, fr: 280, cr: 250, pr: 1000 }, 
                ],
                "trogmelee": [
                    { level: 1, dr: 3, er: 4, rr: 5, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 25, er: 15, rr: 11, fr: 20, cr: 20, pr: 1000 }, 
                    { level: 25, dr: 45, er: 30, rr: 17, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 50, dr: 60, er: 45, rr: 33, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 75, dr: 100, er: 70, rr: 80, fr: 160, cr: 160, pr: 1000 }, 
                    { level: 100, dr: 135, er: 95, rr: 135, fr: 250, cr: 250, pr: 1000 }, 
                ],
                "trogsuperior": [
                    { level: 1, dr: 5, er: 4, rr: 6, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 35, er: 30, rr: 50, fr: 15, cr: 15, pr: 1000 }, 
                    { level: 25, dr: 75, er: 65, rr: 90, fr: 40, cr: 40, pr: 1000 }, 
                    { level: 50, dr: 125, er: 110, rr: 140, fr: 180, cr: 180, pr: 1000 }, 
                    { level: 75, dr: 175, er: 150, rr: 190, fr: 225, cr: 225, pr: 1000 }, 
                    { level: 100, dr: 225, er: 200, rr: 250, fr: 300, cr: 300, pr: 1000 }, 
                ],
                "turret": [
                    { level: 1, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 1000 }, 
                    { level: 6, dr: 4, er: 4, rr: 4, fr: 4, cr: 4, pr: 1000 }, 
                    { level: 16, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 1000 }, 
                    { level: 28, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 1000 }, 
                    { level: 40, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 1000 }, 
                ],
                "turretbubble": [
                    { level: 1, dr: 5, er: 5, rr: 5, fr: 0, cr: 0, pr: 0 }, 
                    { level: 7, dr: 5, er: 5, rr: 5, fr: 0, cr: 0, pr: 0 }, 
                    { level: 16, dr: 5, er: 5, rr: 5, fr: 0, cr: 0, pr: 0 }, 
                    { level: 28, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                    { level: 40, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                    { level: 50, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                    { level: 60, dr: 10, er: 10, rr: 10, fr: 0, cr: 0, pr: 0 }, 
                ],
                "vertibird": [
                    { level: 20, dr: 135, er: 135, rr: 135, fr: 135, cr: 135, pr: 1000 }, 
                    { level: 30, dr: 135, er: 135, rr: 135, fr: 135, cr: 135, pr: 1000 }, 
                    { level: 40, dr: 135, er: 135, rr: 135, fr: 135, cr: 135, pr: 1000 }, 
                    { level: 50, dr: 135, er: 135, rr: 135, fr: 135, cr: 135, pr: 1000 }, 
                ],
                "vertibot": [
                    { level: 15, dr: 25, er: 25, rr: 25, fr: 25, cr: 25, pr: 1000 }, 
                    { level: 25, dr: 50, er: 50, rr: 50, fr: 50, cr: 50, pr: 1000 }, 
                    { level: 35, dr: 100, er: 100, rr: 100, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 135, er: 135, rr: 135, fr: 135, cr: 135, pr: 1000 }, 
                ],
                "viciousdog": [
                    { level: 3, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 2 }, 
                    { level: 12, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 20, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 30, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                    { level: 40, dr: 15, er: 15, rr: 15, fr: 15, cr: 15, pr: 15 }, 
                    { level: 50, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 60, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                ],
                "wendigo": [
                    { level: 15, dr: 10, er: 5, rr: 1000, fr: 5, cr: 5, pr: 5 }, 
                    { level: 22, dr: 25, er: 10, rr: 1000, fr: 10, cr: 10, pr: 10 }, 
                    { level: 32, dr: 50, er: 25, rr: 1000, fr: 25, cr: 25, pr: 25 }, 
                    { level: 42, dr: 50, er: 25, rr: 1000, fr: 25, cr: 25, pr: 25 }, 
                    { level: 52, dr: 150, er: 125, rr: 1000, fr: 125, cr: 125, pr: 125 }, 
                    { level: 75, dr: 150, er: 125, rr: 1000, fr: 125, cr: 125, pr: 125 }, 
                    { level: 100, dr: 150, er: 125, rr: 1000, fr: 125, cr: 125, pr: 125 }, 
                ],
                "wendigocolossus": [
                    { level: 90, dr: 300, er: 300, rr: 400, fr: 300, cr: 300, pr: 300 }, 
                    { level: 110, dr: 400, er: 400, rr: 500, fr: 400, cr: 400, pr: 400 }, 
                ],
                "wolf": [
                    { level: 10, dr: 8, er: 8, rr: 8, fr: 8, cr: 8, pr: 8 }, 
                    { level: 20, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 30, dr: 10, er: 10, rr: 10, fr: 10, cr: 10, pr: 10 }, 
                    { level: 40, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 50, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 65, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 80, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 95, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                    { level: 110, dr: 20, er: 20, rr: 20, fr: 20, cr: 20, pr: 20 }, 
                ],
                "yaoguai": [
                    { level: 16, dr: 10, er: 10, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 26, dr: 25, er: 25, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 31, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 36, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 41, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 46, dr: 50, er: 50, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 56, dr: 100, er: 100, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 66, dr: 150, er: 150, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 76, dr: 150, er: 150, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 86, dr: 150, er: 150, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 100, dr: 150, er: 150, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                    { level: 115, dr: 150, er: 150, rr: 250, fr: 250, cr: 250, pr: 250 }, 
                ],
                "zetandrone": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 8, er: 4, rr: 8, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 20, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 30, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 50, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 60, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 75, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                ],
                "zetanelitedrone": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 8, er: 4, rr: 8, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 20, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 30, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 50, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 60, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 75, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                ],
                "zetanexplosivedrone": [
                    { level: 1, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 5, dr: 2, er: 2, rr: 2, fr: 2, cr: 2, pr: 1000 }, 
                    { level: 10, dr: 8, er: 4, rr: 8, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 20, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 30, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 40, dr: 50, er: 25, rr: 50, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 50, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 60, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 75, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                    { level: 100, dr: 110, er: 100, rr: 110, fr: 100, cr: 100, pr: 1000 }, 
                ],
            };

            enemyResistancesMap["scorchbeastqueen"] = JSON.parse(JSON.stringify(enemyResistancesMap["scorchbeast"]));
            for (var e of enemyResistancesMap["scorchbeastqueen"]) {
                e.mitigation = 0.3;
            }
            for (var e of enemyResistancesMap["wendigocolossus"]) {
                e.mitigation = 0.2;
            }


            addEnemy("Scorched", ["Scorched"], enemyResistancesMap["scorched"]);

            addEnemy("Scorched Exterminator", ["Scorched"], enemyResistancesMap["scorched"]);

            addEnemy("Feral Ghoul", ["Ghoul"], enemyResistancesMap["feralghoul"]);

            addEnemy("Glowing One", ["Ghoul", "Glowing"], enemyResistancesMap["feralghoulglowing"]);

            addEnemy("Super Mutant", ["Mutant"], enemyResistancesMap["supermutant"]);

            addEnemy("Super Mutant Behemoth", ["Mutant"], enemyResistancesMap["smbehemoth"]);

            addEnemy("Mutant Hound", ["Animal"], enemyResistancesMap["mutanthound"]);
            addEnemy("Glowing Mutant Hound", ["Animal", "Glowing"], enemyResistancesMap["mutanthound"]);
            addEnemy("Scorched Mutant Hound", ["Scorched"], enemyResistancesMap["mutanthound"]);

            addEnemy("Radroach", ["Bug"], enemyResistancesMap["radroach"]);
            addEnemy("Glowing Radroach", ["Bug", "Glowing"], enemyResistancesMap["radroach"]);
            addEnemy("Scorched Radroach", ["Scorched"], enemyResistancesMap["radroach"]);

            addEnemy("Stingwing", ["Bug"], enemyResistancesMap["stingwing"]);
            addEnemy("Glowing Stingwing", ["Bug", "Glowing"], enemyResistancesMap["stingwing"]);
            addEnemy("Scorched Stingwing", ["Scorched"], enemyResistancesMap["stingwing"]);

            addEnemy("Bloatfly", ["Bug"], enemyResistancesMap["bloatfly"]);
            addEnemy("Glowing Bloatfly", ["Bug", "Glowing"], enemyResistancesMap["bloatfly"]);
            addEnemy("Scorched Bloatfly", ["Scorched"], enemyResistancesMap["bloatfly"]);

            addEnemy("Attack Dog", ["Animal"], enemyResistancesMap["attackdog"]);
            addEnemy("Glowing Attack Dog", ["Animal", "Glowing"], enemyResistancesMap["attackdog"]);
            addEnemy("Scorched Attack Dog", ["Scorched"], enemyResistancesMap["attackdog"]);

            addEnemy("Mirelurk Crab", ["Mirelurk"], enemyResistancesMap["mirelurkcrab"]);
            addEnemy("Glowing Mirelurk", ["Mirelurk", "Glowing"], enemyResistancesMap["mirelurkcrab"]);
            addEnemy("Scorched Mirelurk", ["Scorched"], enemyResistancesMap["mirelurkcrab"]);

            addEnemy("Mirelurk King", ["Mirelurk"], enemyResistancesMap["mirelurkking"]);
            addEnemy("Glowing Mirelurk King", ["Mirelurk", "Glowing"], enemyResistancesMap["mirelurkking"]);
            addEnemy("Scorched Mirelurk King", ["Scorched"], enemyResistancesMap["mirelurkking"]);

            addEnemy("Mirelurk Hunter", ["Mirelurk"], enemyResistancesMap["mirelurkhunter"]);
            addEnemy("Glowing Mirelurk Hunter", ["Mirelurk", "Glowing"], enemyResistancesMap["mirelurkhunter"]);
            addEnemy("Scorched Mirelurk Hunter", ["Scorched"], enemyResistancesMap["mirelurkhunter"]);

            addEnemy("Mirelurk Queen", ["Mirelurk"], enemyResistancesMap["mirelurkqueen"]);
            addEnemy("Glowing Mirelurk Queen", ["Mirelurk", "Glowing"], enemyResistancesMap["mirelurkqueen"]);
            addEnemy("Scorched Mirelurk Queen", ["Scorched"], enemyResistancesMap["mirelurkqueen"]);

            addEnemy("Mirelurk Spawn", ["Mirelurk"], enemyResistancesMap["mirelurkspawn"]);
            addEnemy("Glowing Mirelurk Spawn", ["Mirelurk", "Glowing"], enemyResistancesMap["mirelurkspawn"]);
            addEnemy("Scorched Mirelurk Spawn", ["Scorched"], enemyResistancesMap["mirelurkspawn"]);

            addEnemy("Scorchbeast", ["Animal", "Scorchbeast"], enemyResistancesMap["scorchbeast"]);
            addEnemy("Scorchbeast Queen", ["Animal", "Scorchbeast", "Scorchbeast Queen"], enemyResistancesMap["scorchbeastqueen"]);

            addEnemy("Yao Guai", ["Animal", "Yao Guai"], enemyResistancesMap["yaoguai"]);
            addEnemy("Glowing Yao Guai", ["Animal", "Glowing", "Yao Guai"], enemyResistancesMap["yaoguai"]);
            addEnemy("Scorched Yao Guai", ["Animal", "Scorched", "Yao Guai"], enemyResistancesMap["yaoguai"]);

            addEnemy("Deathclaw", [], enemyResistancesMap["deathclaw"]);
            addEnemy("Glowing Deathclaw", ["Glowing"], enemyResistancesMap["deathclaw"]);
            addEnemy("Scorched Deathclaw", ["Scorched"], enemyResistancesMap["deathclaw"]);

            addEnemy("Ant", ["Bug"], enemyResistancesMap["radant"]);
            addEnemy("Glowing Ant", ["Bug", "Glowing"], enemyResistancesMap["radant"]);
            addEnemy("Scorched Ant", ["Scorched"], enemyResistancesMap["radant"]);

            addEnemy("Radrat", ["Animal"], enemyResistancesMap["radrat"]);
            addEnemy("Glowing Radrat", ["Animal", "Glowing"], enemyResistancesMap["radrat"]);
            addEnemy("Scorched RadRat", ["Scorched"], enemyResistancesMap["radrat"]);

            addEnemy("Protectron", ["Robot"], enemyResistancesMap["protectron"]);
            addEnemy("Robobrain", ["Robot"], enemyResistancesMap["robobrain"]);
            addEnemy("Sentrybot", ["Robot"], enemyResistancesMap["sentrybot"]);
            addEnemy("Assaultron", ["Robot"], enemyResistancesMap["assaultron"]);
            addEnemy("Assaultron Dominator", ["Robot"], enemyResistancesMap["assaultronintimidator"]);
            addEnemy("Eyebot", ["Robot"], enemyResistancesMap["eyebot"]);
            addEnemy("Liberator", ["Robot", "Liberator"], enemyResistancesMap["liberator"]);

            addEnemy("Mr. Handy", ["Robot"], enemyResistancesMap["mrhandy"]);
            addEnemy("Mr. Gutsy", ["Robot"], enemyResistancesMap["mrhandy"]);

            addEnemy("Flatwoods Monster", ["Alien", "Cryptid", "Robot", "Flatwoods Monster"], enemyResistancesMap["flatwoodsmonster"]);

            addEnemy("Snallygaster", ["Cryptid", "Snallygaster"], enemyResistancesMap["snallygaster"]);
            addEnemy("Glowing Snallygaster", ["Cryptid", "Snallygaster", "Glowing"], enemyResistancesMap["snallygaster"]);
            addEnemy("Scorched Snallygaster", ["Cryptid", "Snallygaster", "Scorched"], enemyResistancesMap["snallygaster"]);

            addEnemy("Gulper", ["Gulper"], enemyResistancesMap["gulper"]);
            addEnemy("Glowing Gulper", ["Glowing"], enemyResistancesMap["gulper"]);
            addEnemy("Scorched Gulper", ["Scorched"], enemyResistancesMap["gulper"]);

            addEnemy("Grafton Monster", ["Cryptid", "Grafton Monster"], enemyResistancesMap["grafton"]);
            addEnemy("Scorched Grafton Monster", ["Cryptid", "Grafton Monster", "Scorched"], enemyResistancesMap["grafton"]);

            addEnemy("Angler", ["Cryptid"], enemyResistancesMap["angler"]);
            addEnemy("Glowing Angler", ["Cryptid", "Glowing"], enemyResistancesMap["angler"]);
            addEnemy("Scorched Angler", ["Cryptid", "Scorched"], enemyResistancesMap["angler"]);

            addEnemy("Sheepsquatch", ["Cryptid", "Sheepsquatch"], enemyResistancesMap["sheepsquatch"]);

            addEnemy("Mothman", ["Cryptid", "Mothman", "Bug"], enemyResistancesMap["mothman"]);
            addEnemy("Glowing Mothman", ["Cryptid", "Mothman", "Glowing", "Bug"], enemyResistancesMap["mothman"]);
            addEnemy("Scorched Mothman", ["Cryptid", "Mothman", "Scorched"], enemyResistancesMap["mothman"]);

            addEnemy("Wendigo", ["Cryptid", "Wendigo"], enemyResistancesMap["wendigo"]);
            addEnemy("Glowing Wendigo", ["Cryptid", "Wendigo", "Glowing"], enemyResistancesMap["wendigo"]);
            addEnemy("Scorched Wendigo", ["Cryptid", "Wendigo", "Scorched"], enemyResistancesMap["wendigo"]);

            addEnemy("Player", ["Player"]);

            addEnemy("Floater", [], enemyResistancesMap["floater"]);
            addEnemy("Floater Freezer", [], enemyResistancesMap["floaterfreezer"]);
            addEnemy("Floater Gnasher", [], enemyResistancesMap["floatergnasher"]);
            addEnemy("Floater Flamer", [], enemyResistancesMap["floaterflamer"]);

            addEnemy("Wendigo Colossus", ["Cryptid", "Wendigo"], enemyResistancesMap["wendigocolossus"]);
            
            addEnemy("Flog Crawler", ["Bug"], enemyResistancesMap["fogcrawler"]);
            addEnemy("Glowing Flog Crawler", ["Bug", "Glowing"], enemyResistancesMap["fogcrawler"]);
            addEnemy("Scorched Flog Crawler", ["Scorched"], enemyResistancesMap["fogcrawler"]);

            addEnemy("Radstag", ["Radstag", "Animal"], enemyResistancesMap["radstag"]);
            addEnemy("Glowing Radstag", ["Radstag", "Animal", "Glowing"], enemyResistancesMap["radstag"]);
            addEnemy("Scorched Radstag", ["Radstag", "Scorched"], enemyResistancesMap["radstag"]);

            addEnemy("Radtoad", ["Radtoad", "Animal"], enemyResistancesMap["radtoad"]);
            addEnemy("Glowing Radtoad", ["Radtoad", "Animal", "Glowing"], enemyResistancesMap["radtoad"]);
            addEnemy("Scorched Radtoad", ["Radtoad", "Scorched"], enemyResistancesMap["radtoad"]);

            addEnemy("Honeybeast", ["Honeybeast", "Bug"], enemyResistancesMap["honeybeast"]);
            addEnemy("Glowing Honeybeast", ["Honeybeast", "Bug", "Glowing"], enemyResistancesMap["honeybeast"]);
            addEnemy("Scorched Honeybeast", ["Honeybeast", "Scorched"], enemyResistancesMap["honeybeast"]);

            addEnemy("Honeybeast Bee Swarm", ["Honeybeast", "Bug"], enemyResistancesMap["honeybeastbeeswarm"]);

            addEnemy("Radscorpion", ["Radscorpion", "Bug"], enemyResistancesMap["radscorpion"]);
            addEnemy("Glowing Radscorpion", ["Radscorpion", "Bug", "Glowing"], enemyResistancesMap["radscorpion"]);
            addEnemy("Scorched Radscorpion", ["Radscorpion", "Scorched"], enemyResistancesMap["radscorpion"]);

            addEnemy("Tick", ["Bug"], enemyResistancesMap["tick"]);
            addEnemy("Glowing Tick", ["Bug", "Glowing"], enemyResistancesMap["tick"]);
            addEnemy("Scorched Tick", ["Scorched"], enemyResistancesMap["tick"]);

            addEnemy("Bloodbug", ["Bug"], enemyResistancesMap["bloodbug"]);
            addEnemy("Glowing Bloodbug", ["Bug", "Glowing"], enemyResistancesMap["bloodbug"]);
            addEnemy("Scorched Bloodbug", ["Scorched"], enemyResistancesMap["bloodbug"]);

            addEnemy("Blood Eagle Destroyer", ["Player"], enemyResistancesMap["bloodeagledestroyer"]);
            addEnemy("Super Mutant Firestarter", ["Super Mutant"], enemyResistancesMap["supermutantfirestarter"]);

            addEnemy("Wolf", ["Animal"], enemyResistancesMap["wolf"]);
            addEnemy("Glowing Wolf", ["Animal", "Glowing"], enemyResistancesMap["wolf"]);
            addEnemy("Scorched Wolf", ["Scorched"], enemyResistancesMap["wolf"]);

            addEnemy("Cave Cricket", [], enemyResistancesMap["cavecricket"]);
            addEnemy("Glowing Cave Cricket", ["Glowing"], enemyResistancesMap["cavecricket"]);
            addEnemy("Scorched Cave Cricket", ["Scorched"], enemyResistancesMap["cavecricket"]);

            addEnemy("Hermit Crab", ["Mirelurk"], enemyResistancesMap["hermitcrab"]);
            addEnemy("Glowing Hermit Crab", ["Mirelurk", "Glowing"], enemyResistancesMap["hermitcrab"]);
            addEnemy("Scorched Hermit Crab", ["Scorched"], enemyResistancesMap["hermitcrab"]);

            addEnemy("Human Raider", ["NPC"], enemyResistancesMap["humanraider"]);
            addEnemy("Human Settler", ["NPC"], enemyResistancesMap["humansettler"]);
            addEnemy("Blood Eagle", ["NPC"], enemyResistancesMap["humanraider"]);

            addEnemy("Megasloth", ["Animal"], enemyResistancesMap["megasloth"]);
            addEnemy("Glowing Megasloth", ["Glowing", "Animal"], enemyResistancesMap["megasloth"]);
            addEnemy("Scorched Megasloth", ["Scorched"], enemyResistancesMap["megasloth"]);

            addEnemy("Mole Miner", [], enemyResistancesMap["moleminer"]);
            addEnemy("Glowing Mole Miner", ["Glowing"], enemyResistancesMap["moleminer"]);
            addEnemy("Scorched Mole Miner", ["Scorched"], enemyResistancesMap["moleminer"]);

            addEnemy("Molerat", ["Animal"], enemyResistancesMap["molerat"]);
            addEnemy("Glowing Molerat", ["Glowing", "Animal"], enemyResistancesMap["molerat"]);
            addEnemy("Scorched Molerat", ["Scorched"], enemyResistancesMap["molerat"]);

            addEnemy("Turret", ["Robot"], enemyResistancesMap["turret"]);

            addEnemy("Turret Bubble", ["Robot"], enemyResistancesMap["turretbubble"]);
            addEnemy("Vertibird", ["Robot"], enemyResistancesMap["vertibird"]);
            addEnemy("Vertibot", ["Robot"], enemyResistancesMap["vertibot"]);

            addEnemy("Vicious Dog", ["Animal"], enemyResistancesMap["viciousdog"]);
            addEnemy("Glowing Vicious Dog", ["Animal", "Glowing"], enemyResistancesMap["viciousdog"]);
            addEnemy("Scorched Vicious Dog", ["Scorched"], enemyResistancesMap["viciousdog"]);

            addEnemy("Critter", ["Animal"], enemyResistancesMap["critter"]);

            // P28
            addEnemy("Behemoth Boss", ["Mutant"], enemyResistancesMap["behemothboss"]);
            addEnemy("Imposterling", ["Robot"], enemyResistancesMap["sheepsquatchimposterling"]);
            addEnemy("Kit", ["Human", "NPC"], enemyResistancesMap["kit"]);
            addEnemy("Shin", ["Human", "NPC"], enemyResistancesMap["shin"]);
            addEnemy("Norland", ["Human", "NPC"], enemyResistancesMap["norland"]);
            addEnemy("Hewsen", ["Human", "NPC"], enemyResistancesMap["hewsen"]);
            addEnemy("Hellcat Mercenary", ["Human", "NPC"], enemyResistancesMap["hellcatmercenary"]);

            // P30
            addEnemy("Communist Commander", ["Human"], enemyResistancesMap["communistcommander"]);

            // P33
            addEnemy("Alien Drone", ["Robot"], enemyResistancesMap["zetandrone"]);
            addEnemy("Alien Drone Elite", ["Robot"], enemyResistancesMap["zetanelitedrone"]);
            addEnemy("Alien Drone Explosive", ["Robot"], enemyResistancesMap["zetanexplosivedrone"]);
            addEnemy("Alien Captain Alpha", ["Alien"], enemyResistancesMap["alien_cpt-alpha-omega"]);
            addEnemy("Alien Captain Omega", ["Alien"], enemyResistancesMap["alien_cpt-alpha-omega"]);
            addEnemy("Alien General Zeta", ["Alien"], enemyResistancesMap["alien_general-zeta"]);
            addEnemy("Alien Lieutenant Kappa", ["Alien"], enemyResistancesMap["alien_lt-kappa"]);
            addEnemy("Alien Exo Trooper", ["Alien"], enemyResistancesMap["alienexotrooper"]);

            // P34
            addEnemy("Cultist High Priest", ["NPC"], enemyResistancesMap["cultisthighpriest"]);

            // P38 (The Pitt)
            addEnemy("Trog Fledgling", [], enemyResistancesMap["trogfledgling"]);
            addEnemy("Glowing Trog", ["Glowing"], enemyResistancesMap["trogglowing"]);
            addEnemy("Trog Melee", [], enemyResistancesMap["trogmelee"]);
            addEnemy("Trog Superior", [], enemyResistancesMap["trogsuperior"]);

            addEnemy("Human Fanatic", ["NPC"], enemyResistancesMap["humanfanatic"]);
            addEnemy("Human Fanatic Boss", ["NPC"], enemyResistancesMap["humanfanaticboss"]);
            addEnemy("Human Fanatic Miniboss", ["NPC"], enemyResistancesMap["humanfanaticminiboss"]);
            addEnemy("Human Fanatic Lite Miniboss", ["NPC"], enemyResistancesMap["humanfanaticminibosselite"]);
            addEnemy("Human Fanatic Power Armor", ["NPC"], enemyResistancesMap["humanfanaticpowerarmor"]);

            // some enemies are immune to radiation or even heal off it
            var enemyRadiationEffect = new Map();

            enemyRadiationEffect.set("Feral Ghoul", -10);
            enemyRadiationEffect.set("Glowing One", -10);
            enemyRadiationEffect.set("Scorchbeast Queen", 0);

            // xoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxoxo

            var food = [
                {
                    id: "BlightSoup",
                    type: "food",
                    desc: "Blight Soup (+20% Crit DMG)",
                    mode: "Melee,Ranged",
                    criticalDamage: 20,
                    mutation: "herbivore",
                    exclude: "critdmg",
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Blight Soup (+50% Crit DMG)",
                        }
                    },
                },
                {
                    id: "MutantHoundChops",
                    type: "food",
                    desc: "Mutant Hound Chops (+10% Melee DMG)",
                    mode: "Melee",
                    mutation: "carnivore",
                    damage: 10,
                    exclude: "meleebonusdamage"
                },
                {
                    id: "MutantHoundStew",
                    type: "food",
                    desc: "Mutant Hound Stew (+15% Melee DMG)",
                    mode: "Melee",
                    mutation: "carnivore",
                    damage: 15,
                    exclude: "meleebonusdamage"
                },
                {
                    id: "MegaslothMushroomSoup",
                    type: "food",
                    desc: "Megasloth Mushroom Soup (+20% crit DMG)",
                    mode: "Melee,Ranged",
                    exclude: "critdmg",
                    criticalDamage: 20,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Megasloth Mushroom Soup (+50% crit DMG)",
                        }
                    }
                },
            ];

            food.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            // chem configurations
            var chems = [
                    {
                        id: "Buffout",
                        type: "chem",
                        desc: "Buffout (+2 STR)",
                        mode: "Melee",
                        strength: 2
                    },
                    {
                        id: "Bufftats",
                        type: "chem",
                        desc: "Bufftats (+3 STR)",
                        mode: "Melee",
                        strength: 3
                    },
                    {
                        id: "Calmex",
                        type: "chem",
                        desc: "Calmex (+15% sneak DMG)",
                        mode: "Melee,Ranged",
                        sneakDamage: 15
                    },
                    {
                        id: "Daytripper",
                        type: "chem",
                        desc: "Daytripper (-2 STR)",
                        mode: "Melee",
                        strength: -2
                    },
                    {
                        id: "Fury",
                        type: "chem",
                        desc: "Fury (+30% DMG)",
                        mode: "Melee,Ranged",
                        damage: 30
                    },
                    {
                        id: "Overdrive",
                        type: "chem",
                        desc: "Overdrive (+15% DMG, +15% crit DMG)",
                        mode: "Melee,Ranged",
                        damage: 15,
                        criticalDamage: 15,
                        patchOverride: {
                            "P34": {
                                criticalDamage: 30,
                                desc: "Overdrive (+15% DMG, +30% crit DMG)",
                            }
                        }
                    },
                    {
                        id: "Psycho",
                        type: "chem",
                        desc: "Psycho (+15% DMG)",
                        mode: "Melee,Ranged",
                        damage: 15
                    },
                    {
                        id: "Psychobuff",
                        type: "chem",
                        desc: "Psychobuff (+3 STR, +25% DMG)",
                        mode: "Melee,Ranged",
                        damage: 25,
                        strength: 3,
                    },
                    {
                        id: "Psychotats",
                        type: "chem",
                        desc: "Psychotats (+25% DMG)",
                        mode: "Melee,Ranged",
                        damage: 25,
                    },
                    {
                        id: "X-cell",
                        type: "chem",
                        desc: "X-cell (+2 STR)",
                        mode: "Melee",
                        strength: 2
                    },
            ];
            chems.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            function createStrengthOnly(id, desc) {
                return {
                    id: id,
                    type: "alcohol",
                    desc: desc + " (+1 STR)",
                    mode: "Melee",
                    strength: 1
                }
            }

            // alcohol configurations

            var alcohols = [
                {
                    id: "BallisticBock",
                    type: "alcohol",
                    desc: "Ballistic Bock (+15% ranged DMG)",
                    mode: "Ranged",
                    except: "Heavy",
                    damage: 15
                },
                createStrengthOnly("Beer", "Beer"),
                createStrengthOnly("BlackwaterBrew", "Blackwater Brew"),
                createStrengthOnly("Bourbon", "Bourbon"),
                createStrengthOnly("ChallysMilk", "Chally's Milk"),
                createStrengthOnly("CranberryMoonshine", "Cranberry Moonshine"),
                {
                    id: "FirecrackerBerryJuice",
                    type: "alcohol",
                    desc: "Firecracker Berry Juice (+10% crit DMG)",
                    mode: "Melee,Ranged",
                    criticalDamage: 10,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 25,
                            desc: "Firecracker Berry Juice (+25% crit DMG)",
                        }
                    }
                    
                },
                {
                    id: "HighVoltageHefe",
                    type: "alcohol",
                    desc: "High Voltage Hefe (+15% energy DMG)",
                    mode: "Ranged",
                    energyDamage: 15,
                },
                {
                    id: "HoppyHunterIPA",
                    type: "alcohol",
                    desc: "Hoppy Hunter IPA (+15% DMG vs animals)",
                    mode: "Ranged",
                    versusDamage: 15,
                    versus: ["Animal"]
                },
                createStrengthOnly("MountainHoney", "Mountain Honey"),
                createStrengthOnly("NewRiverRedAle", "New River Red Ale"),
                {
                    id: "NukaColaDark",
                    type: "alcohol",
                    desc: "Nuka Cola Dark (+1 STR)",
                    mode: "Melee",
                    strength: 1,
                    cola: true
                },
                {
                    id: "Nukashine",
                    type: "alcohol",
                    desc: "Nukashine (+100% unarmed DMG)",
                    mode: "Melee",
                    unarmedDamage: 100,
                    cola: true,
                    only: "Unarmed"
                },
                {
                    id: "NukashineZero",
                    type: "alcohol",
                    desc: "Sugar-Free Nukashine (+100% unarmed DMG)",
                    mode: "Melee",
                    unarmedDamage: 100,
                    cola: true,
                    only: "Unarmed"
                },
                createStrengthOnly("OakHollerLager", "Oak Holler Lager"),
                createStrengthOnly("OldPossum", "Old Possum"),
                createStrengthOnly("PickaxePilsner", "Pickaxe Pilsner"),
                {
                    id: "RodgersReserveBeer",
                    type: "alcohol",
                    desc: "Rodgers' Reserve Beer (+2 STR)",
                    mode: "Melee",
                    strength: 2
                },
                createStrengthOnly("SimpleFernFlowerTea", "Simple Fern Flower Tea"),
                {
                    id: "SteepedFernFlowerTea",
                    type: "alcohol",
                    desc: "Steeped Fern Flower Tea (+2 STR)",
                    mode: "Melee",
                    strength: 2
                },
                {
                    id: "SteepedThistleTea",
                    type: "alcohol",
                    desc: "Steeped Thistle Tea (+20% crit DMG)",
                    mode: "Melee,Ranged",
                    criticalDamage: 20,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Steeped Thistle Tea (+20% crit DMG)",
                        }
                    }
                },
                {
                    id: "SweetMutfruitTea",
                    type: "alcohol",
                    desc: "Sweet Mutfruit Tea (+20% crit DMG)",
                    mode: "Melee,Ranged",
                    criticalDamage: 20,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Sweet Mutfruit Tea (+20% crit DMG)",
                        }
                    }
                },
                createStrengthOnly("Vodka", "Vodka"),
                {
                    id: "Whiskey",
                    type: "alcohol",
                    desc: "Whiskey (+2 STR)",
                    mode: "Melee",
                    strength: 2
                },
                createStrengthOnly("Wine", "Wine"),
                {
                    id: "ToxicGinAndTonic",
                    type: "alcohol",
                    desc: "Toxic Gin and Tonic (+10% DMG)",
                    mode: "Melee,Ranged",
                    damage: 10,
                    nopartyboy: true,
                },
                {
                    id: "ToxicGinMartini",
                    type: "alcohol",
                    desc: "Toxic Gin Martini (+1 \uD83D\uDCA7, -10 DR)",
                    mode: "Melee",
                    damagePoison: 1,
                    enemyDr: -10,
                    nopartyboy: true,
                },
                {
                    id: "ToxicGin",
                    type: "alcohol",
                    desc: "Toxic Gin (+1 \uD83D\uDCA7, -10 DR)",
                    mode: "Melee",
                    damagePoison: 1,
                    enemyDr: -10,
                    nopartyboy: true,
                },
                {
                    id: "VintageToxicGinRanged",
                    type: "alcohol",
                    desc: "Vintage Toxic Gin (+10% DMG)",
                    mode: "Ranged",
                    damage: 10,
                    nopartyboy: true,
                },
                {
                    id: "VintageToxicGinMelee",
                    type: "alcohol",
                    desc: "Vintage Toxic Gin (+10% DMG, +1 \uD83D\uDCA7, -10 DR)",
                    mode: "Melee",
                    damagePoison: 1,
                    enemyDr: -10,
                    damage: 10,
                    nopartyboy: true,
                },
                {
                    id: "MireMagicMoonshine",
                    type: "alcohol",
                    desc: "Mire Magic Moonshine (+2 STR, +50% vs Gulp)",
                    mode: "Melee",
                    strength: 2,
                    nopartyboy: true,
                    versusDamage: 50,
                    versus: ["Gulper"],
                    weapon: "Gulper Smacker"
                },
                {
                    id: "VintageMireMagicMoonshine",
                    type: "alcohol",
                    desc: "Vintage Mire Magic Moonshine (+4 STR, +100% vs Gulp)",
                    mode: "Melee",
                    strength: 4,
                    nopartyboy: true,
                    versusDamage: 100,
                    versus: ["Gulper"],
                    weapon: "Gulper Smacker"
                },
                {
                    id: "MireMagicMoonshineNoSmacker",
                    type: "alcohol",
                    desc: "Mire Magic Moonshine (+2 STR)",
                    mode: "Melee",
                    strength: 2,
                    nopartyboy: true,
                    excludeWeapon: "Gulper Smacker"
                },
                {
                    id: "VintageMireMagicMoonshineNoSmacker",
                    type: "alcohol",
                    desc: "Vintage Mire Magic Moonshine (+4 STR)",
                    mode: "Melee",
                    strength: 4,
                    nopartyboy: true,
                    excludeWeapon: "Gulper Smacker"
                },
            ];
            alcohols.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            // bobbleheads
            var bobbleheads = [
                {
                    id: "BigGuns",
                    type: "bobblehead",
                    desc: "Big Guns (+20% heavy DMG)",
                    mode: "Ranged",
                    damage: 20,
                    only: "Heavy"
                },
                {
                    id: "Energy",
                    type: "bobblehead",
                    desc: "Energy (+20% energy DMG)",
                    mode: "Ranged,Melee",
                    energyDamage: 20
                },
                {
                    id: "Explosive",
                    type: "bobblehead",
                    desc: "Explosive (+30% explosive DMG)",
                    mode: "Ranged",
                    explosiveDamage: 30
                },
                {
                    id: "Melee",
                    type: "bobblehead",
                    desc: "Melee (+20% melee DMG)",
                    mode: "Melee",
                    damage: 20
                },
                {
                    id: "SmallGuns",
                    type: "bobblehead",
                    desc: "Small Guns (+20% ballistic DMG)",
                    mode: "Ranged",
                    ballisticDamage: 20,
                },
                {
                    id: "Strength",
                    type: "bobblehead",
                    desc: "Strength (+2 STR)",
                    mode: "Melee",
                    strength: 2,
                },
                {
                    id: "Unarmed",
                    type: "bobblehead",
                    desc: "Unarmed (+25% unarmed DMG)",
                    mode: "Melee",
                    unarmedDamage: 25,
                    only: "Unarmed"
                }
            ];
            bobbleheads.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            // magazines
            var magazines = [
                {
                    id: "AstoundingleAwesomeTales1",
                    type: "magazine",
                    desc: "Astound... # 1 (+15% DMG vs mirelurks)",
                    mode: "Ranged,Melee",
                    versus: ["Mirelurk"],
                    versusDamage: 15
                },
                {
                    id: "AstoundingleAwesomeTales2",
                    type: "magazine",
                    desc: "Astound... # 2 (+15% DMG vs super m.)",
                    mode: "Ranged,Melee",
                    versus: ["Mutant"],
                    versusDamage: 15
                },
                {
                    id: "AstoundingleAwesomeTales4",
                    type: "magazine",
                    desc: "Astound... # 4 (+25% DMG w/ Alien Blaster)",
                    mode: "Ranged",
                    damage: 25,
                    weapon: "Alien Blaster"
                },
                {
                    id: "AstoundingleAwesomeTales5",
                    type: "magazine",
                    desc: "Astound... # 5 (+25% DMG w/ Cryolator)",
                    mode: "Ranged",
                    damage: 25,
                    weapon: "Cryolator"
                },
                {
                    id: "AstoundingleAwesomeTales10",
                    type: "magazine",
                    desc: "Astound... #10 (+15% DMG w/ scope)",
                    mode: "Ranged",
                    scopedDamage: 15
                },
                {
                    id: "AstoundingleAwesomeTales11",
                    type: "magazine",
                    desc: "Astound... #11 (+15% DMG vs ghouls)",
                    mode: "Ranged,Melee",
                    versus: ["Ghoul"],
                    versusDamage: 15
                },
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                {
                    id: "Blackwoodsman2",
                    type: "magazine",
                    desc: "Blackwood... # 2 (+25% DMG w/ Tomahawk)",
                    mode: "Melee,Ranged",
                    damage: 25,
                    weapon: "Tomahawk"
                },
                {
                    id: "Blackwoodsman5",
                    type: "magazine",
                    desc: "Blackwood... # 5 (+15% DMG vs animals)",
                    mode: "Melee,Ranged",
                    versus: ["Animal"],
                    versusDamage: 15
                },
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                {
                    id: "Grognak1",
                    type: "magazine",
                    desc: "Grognak... # 1 (+15% melee DMG)",
                    mode: "Melee",
                    damage: 15
                },
                {
                    id: "Grognak4",
                    type: "magazine",
                    desc: "Grognak... # 4 (+30% crit DMG)",
                    mode: "Melee",
                    criticalDamage: 30,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 100,
                            desc: "Grognak... # 4 (+100% crit DMG)"
                        }
                    }
                },
                {
                    id: "Grognak5",
                    type: "magazine",
                    desc: "Grognak... # 5 (+15% DMG vs scorched)",
                    mode: "Melee,Ranged",
                    versus: ["Scorched", "Scorchbeast", "Scorchbeast Queen"],
                    versusDamage: 15
                },
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                {
                    id: "GunsAndBullets1",
                    type: "magazine",
                    desc: "Guns... # 1 (+15% DMG vs robots)",
                    mode: "Melee,Ranged",
                    versus: ["Robot"],
                    versusDamage: 15
                },
                {
                    id: "GunsAndBullets2",
                    type: "magazine",
                    desc: "Guns... # 2 (+30% crit DMG w/ lasers)",
                    mode: "Ranged",
                    kind: "laser",
                    criticalDamage: 30,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 100,
                            desc: "Guns... # 2 (+100% crit DMG w/ lasers)"
                        }
                    }
                },
                {
                    id: "GunsAndBullets3",
                    type: "magazine",
                    desc: "Guns... # 3 (+30% crit DMG w/ ballistic)",
                    mode: "Ranged",
                    kind: "ballistic",
                    criticalDamage: 30,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 100,
                            desc: "Guns... # 3 (+100% crit DMG w/ ballistic)"
                        }
                    }
                },
                {
                    id: "GunsAndBullets7",
                    type: "magazine",
                    desc: "Guns... # 7 (+10% DMG w/o scope)",
                    mode: "Ranged",
                    noscopeDamage: 10
                },
                {
                    id: "GunsAndBullets8",
                    type: "magazine",
                    desc: "Guns... # 8 (+15% DMG vs yao guai)",
                    mode: "Melee,Ranged",
                    versus: ["Yao Guai"],
                    versusDamage: 15
                },
                {
                    id: "GunsAndBullets9",
                    type: "magazine",
                    desc: "Guns... # 9 (+30% crit DMG w/ plasma)",
                    mode: "Ranged",
                    kind: "plasma",
                    criticalDamage: 30,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 100,
                            desc: "Guns... # 9 (+100% crit DMG w/ plasma)"
                        }
                    }
                },
                {
                    id: "GunsAndBullets10",
                    type: "magazine",
                    desc: "Guns... #10 (+15% DMG vs liberators)",
                    mode: "Melee,Ranged",
                    versus: ["Liberator"],
                    versusDamage: 15
                },
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                {
                    id: "LiveAndLove2",
                    type: "magazine",
                    desc: "Live... # 2 (+5% DMG w/ team)",
                    mode: "Melee,Ranged",
                    teamDamage: 5
                },
                {
                    id: "LiveAndLove3",
                    type: "magazine",
                    desc: "Live... # 3 (+50% vegetable effect)",
                    mode: "Melee,Ranged",
                    vegetableBuff: 50
                },
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                {
                    id: "TalesFromWVHills1",
                    type: "magazine",
                    desc: "Tales... # 1 (+15% DMG vs wendigos)",
                    mode: "Melee,Ranged",
                    versus: ["Wendigo"],
                    versusDamage: 15
                },
                {
                    id: "TalesFromWVHills2",
                    type: "magazine",
                    desc: "Tales... # 2 (+15% DMG vs mothmen)",
                    mode: "Melee,Ranged",
                    versus: ["Mothman"],
                    versusDamage: 15
                },
                {
                    id: "TalesFromWVHills3",
                    type: "magazine",
                    desc: "Tales... # 3 (+15% DMG vs grafton m.)",
                    mode: "Melee,Ranged",
                    versus: ["Grafton Monster"],
                    versusDamage: 15
                },
                {
                    id: "TalesFromWVHills4",
                    type: "magazine",
                    desc: "Tales... # 4 (+15% DMG vs snallygasters)",
                    mode: "Melee,Ranged",
                    versus: ["Snallygaster"],
                    versusDamage: 15
                },
                {
                    id: "TalesFromWVHills5",
                    type: "magazine",
                    desc: "Tales... # 5 (+15% DMG vs flatwoods m.)",
                    mode: "Melee,Ranged",
                    versus: ["Flatwoods Monster"],
                    versusDamage: 15
                },
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                {
                    id: "TeslaScience6",
                    type: "magazine",
                    desc: "Tesla... # 6 (+15% DMG vs mothmen)",
                    mode: "Melee,Ranged",
                    versus: ["Mothman"],
                    versusDamage: 15
                },
                {
                    id: "TeslaScience7",
                    type: "magazine",
                    desc: "Tesla... # 7 (+15% crit DMG w/ energy)",
                    mode: "Ranged",
                    criticalDamage: 15,
                    kind: "energy",
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Tesla... # 7 (+50% crit DMG w/ energy)"
                        }
                    }
                },
                {
                    id: "TeslaScience8",
                    type: "magazine",
                    desc: "Tesla... # 8 (+15% crit DMG)",
                    mode: "Melee,Ranged",
                    criticalDamage: 15,
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Tesla... # 8 (+50% crit DMG)"
                        }
                    }
                },
                {
                    id: "TeslaScience9",
                    type: "magazine",
                    desc: "Tesla... # 9 (+15% crit DMG w/ heavy)",
                    mode: "Ranged",
                    criticalDamage: 15,
                    only: "Heavy",
                    patchOverride: {
                        "P34": {
                            criticalDamage: 50,
                            desc: "Tesla... # 9 (+50% crit DMG w/ heavy)"
                        }
                    }
                },
               // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
               {
                    id: "USCovertOps4",
                    type: "magazine",
                    desc: "US... # 4 (+10% DMG vs players)",
                    mode: "Melee,Ranged",
                    versus: ["Player"],
                    versusDamage: 15
                },
                {
                    id: "USCovertOps8",
                    type: "magazine",
                    desc: "US... # 8 (+25% DMG w/ unarmed & knives)",
                    mode: "Melee",
                    damage: 25,
                    kind: "knife,unarmed"
                },

            ];
            magazines.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            // Queen of the hunt bonuses
            var queenhunt = [
                {
                    id: "QueenOfTheHunt1",
                    type: "quest",
                    desc: "+15% DMG vs flatwoods monsters",
                    mode: "Ranged,Melee",
                    versus: ["Flatwoods Monster"],
                    versusDamage: 15
                },
                {
                    id: "QueenOfTheHunt2",
                    type: "quest",
                    desc: "+15% DMG vs mothmen",
                    mode: "Ranged,Melee",
                    versus: ["Mothman"],
                    versusDamage: 15
                },
                {
                    id: "QueenOfTheHunt3",
                    type: "quest",
                    desc: "+15% DMG vs grafton monsters",
                    mode: "Ranged,Melee",
                    versus: ["Grafton Monster"],
                    versusDamage: 15
                },
                {
                    id: "QueenOfTheHunt4",
                    type: "quest",
                    desc: "+15% DMG vs snallygasters",
                    mode: "Ranged,Melee",
                    versus: ["Snallygaster"],
                    versusDamage: 15
                },
                {
                    id: "QueenOfTheHunt5",
                    type: "quest",
                    desc: "+15% DMG vs wendigos",
                    mode: "Ranged,Melee",
                    versus: ["Wendigo"],
                    versusDamage: 15
                },
            ];
            queenhunt.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            // Big Game Hunter
            var biggamehunter = [
                {
                    id: "BigGameHunt1",
                    type: "quest",
                    desc: "+10% DMG vs honeybeasts",
                    mode: "Ranged,Melee",
                    versus: ["Honeybeast"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt2",
                    type: "quest",
                    desc: "+10% DMG vs mirelurks",
                    mode: "Ranged,Melee",
                    versus: ["Mirelurk"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt3",
                    type: "quest",
                    desc: "+10% DMG vs radscorpions",
                    mode: "Ranged,Melee",
                    versus: ["Grafton Monster"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt4",
                    type: "quest",
                    desc: "+10% DMG vs snallygasters",
                    mode: "Ranged,Melee",
                    versus: ["Snallygaster"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt5",
                    type: "quest",
                    desc: "+10% DMG vs radstags",
                    mode: "Ranged,Melee",
                    versus: ["Radstag"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt6",
                    type: "quest",
                    desc: "+10% DMG vs radtoads",
                    mode: "Ranged,Melee",
                    versus: ["Radtoad"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt7",
                    type: "quest",
                    desc: "+10% DMG vs stingwings",
                    mode: "Ranged,Melee",
                    versus: ["Stingwing"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt8",
                    type: "quest",
                    desc: "+10% DMG vs super mutants",
                    mode: "Ranged,Melee",
                    versus: ["Super Mutant"],
                    versusDamage: 10
                },
                {
                    id: "BigGameHunt9",
                    type: "quest",
                    desc: "+10% DMG vs yao guais",
                    mode: "Ranged,Melee",
                    versus: ["Yao Guai"],
                    versusDamage: 10
                },
            ];
            biggamehunter.sort(function(a, b) {
                return a.desc.localeCompare(b.desc);
            });

            // X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_X_
            // create a mapping of the buffs

            var buffMap = new Map();
            for (var f of food) {
                buffMap.set(f.id, f);
            }
            for (var chm of chems) {
                buffMap.set(chm.id, chm);
            }
            for (var alc of alcohols) {
                buffMap.set(alc.id, alc);
            }
            for (var bh of bobbleheads) {
                buffMap.set(bh.id, bh);
            }
            for (var mg of magazines) {
                buffMap.set(mg.id, mg);
            }
            for (var qh of queenhunt) {
                buffMap.set(qh.id, qh);
            }
            for (var bgh of biggamehunter) {
                buffMap.set(bgh.id, bgh);
            }

            // -------------------------------------------------------------------------------------
            
            function addEnemy(name, keywords, levelResistances) {
                enemyCategories.push({ name: name, keywords: keywords, leveledResistances: levelResistances });
            }

            allWeapons.get("Melee").sort(function(a, b) {
                return a.name.localeCompare(b.name);
            });
            allWeapons.get("Ranged").sort(function(a, b) {
                return a.name.localeCompare(b.name);
            });

            enemyCategories.sort(function(a, b) {
                return a.name.localeCompare(b.name);
            });

            allEffects.get("Melee").forEach(function(eff) {
                eff.sort(function(a, b) {
                    return a.name.localeCompare(b.name);
                });
            });

            allEffects.get("Ranged").forEach(function(eff) {
                eff.sort(function(a, b) {
                    return a.name.localeCompare(b.name);
                });
            });

            function speedMult(target, base) {
                return 100.0 * (target / base - 1);
            }

            // -------------------------------------------------------------------------------
            // Setup main selection
            // -------------------------------------------------------------------------------

            document.getElementById("wtRanged1").onclick = function() {
                createSelectWeapon(document.getElementById("table1"), 1, "Ranged")
            };
            document.getElementById("spRanged1").onclick = function() {
                document.getElementById("wtRanged1").checked = true;
                createSelectWeapon(document.getElementById("table1"), 1, "Ranged")
            };

            document.getElementById("wtMelee1").onclick = function() {
                createSelectWeapon(document.getElementById("table1"), 1, "Melee")
            };
            document.getElementById("spMelee1").onclick = function() {
                document.getElementById("wtMelee1").checked = true;
                createSelectWeapon(document.getElementById("table1"), 1, "Melee")
            };

            document.getElementById("wtRanged2").onclick = function() {
                createSelectWeapon(document.getElementById("table2"), 2, "Ranged")
            };
            document.getElementById("spRanged2").onclick = function() {
                document.getElementById("wtRanged2").checked = true;
                createSelectWeapon(document.getElementById("table2"), 2, "Ranged")
            };

            document.getElementById("wtMelee2").onclick = function() {
                createSelectWeapon(document.getElementById("table2"), 2, "Melee")
            };
            document.getElementById("spMelee2").onclick = function() {
                document.getElementById("wtMelee2").checked = true;
                createSelectWeapon(document.getElementById("table2"), 2, "Melee")
            };

            // ......................................

            document.getElementById("damagemode").oninput = recalculateDiff;
            document.getElementById("dpsmode").oninput = recalculateDiff;
            document.getElementById("dpsreloadmode").oninput = recalculateDiff;

            document.getElementById("comparesortdesc").oninput = function() {
                recalculateDiff();
            };

            // ======================================================================

            var infoMap = new Map();

            infoMap.set("furious", "With the <b>Furious</b> legendary prefix on a weapon, each consecutive hit increases the damage by 5% up to 45% total.");
            infoMap.set("bloodymess", 
                "Each level adds 5% damage and 5% chance of enemies exploding into bits."
            );
            infoMap.set("adrenaline", 
                "Kills increases damage up to a maximum percentage."
                + "<table class='infoTable'>"
                + "<tr><td>Level 1</td><td>+6% damage per kill</td><td>+36% maximum</td></tr>"
                + "<tr><td>Level 2</td><td>+7% damage per kill</td><td>+42% maximum</td></tr>"
                + "<tr><td>Level 3</td><td>+8% damage per kill</td><td>+48% maximum</td></tr>"
                + "<tr><td>Level 4</td><td>+9% damage per kill</td><td>+54% maximum</td></tr>"
                + "<tr><td>Level 5</td><td>+10% damage per kill</td><td>+60% maximum</td></tr>"
                + "</table>"
            );
            infoMap.set("weaponperk", 
                "Weapon specific perks with 3 ranks and 3 levels each presented as a percentage bonus between 10% and 60%."
                + "<br>Example: <b>Rifleman 2</b> (+15%), <b>Expert Rifleman 1</b> (+10%) and <b>Master Rifleman 3</b> (+20%) totals 45%"

            );
            infoMap.set("demolitionexpert", 
                "Ranged weapons only. Affects the <b>Explosive</b> legendary effect or the base damage on explosive weapons."
            );
            infoMap.set("tankkiller", "Rifles and Pistols only. Each level ignores 12% more armor up to 36% total.");
            infoMap.set("bowbeforeme", "Bows and Crossbows only. Each level ignores 12% more armor up to 36% total.");
            infoMap.set("stabilized", "Heavy ballistic weapons only. Each level ignores 15% more armor up to 45% total.");
            infoMap.set("incisor", "Melee weapons only. Each level ignores 25% more armor up to 75% total.");
            infoMap.set("weighted", "Melee weapons only. One armor piece with this mod ignores 10% + 5 DR, two ignores 20% + 10 DR of armor.");
            infoMap.set("covertoperative", "Ranged weapons only. Sets the sneak attack multiplier to 2.15x, 2.3x and 2.5x.");
            infoMap.set("exterminator", "Each level ignores 25% more armor of Bugs and Mirelurks up to 75% total.");
            infoMap.set("glowsight", "Each level adds 20% damage against Glowing enemies up to 60% total.");
            infoMap.set("nerdrage", "If the player health is below 20%, gain 10%, 15% and 20% damage based on the perk level.");
            infoMap.set("revenant", "Bonus damage after another player revives you. Each level adds 25% more damage up to 50% total.");
            infoMap.set("sandman", "Silenced weapons only, including the bows. Night only. Each level adds 25% more sneak attack damage up to 50% total.");
            infoMap.set("adrenalreaction", 
                "Damage increased the lower the player's health is, up to 50%."
                + "<br>When the Strange In Numbers perk is equipped, there benefits are increased by 25%."
                + "<table class='infoTable'>"
                + "<tr><td><b>Health</b></td><td><b>Normal</b></td><td><b>Strange in Numbers perk</b></td></tr>"
                + "<tr><td>health &gt; 90%</td><td>No change</td><td>No change</td></tr>"
                + "<tr><td>health &gt; 80%</td><td>+6% damage</td><td>+8% damage</td></tr>"
                + "<tr><td>health &gt; 70%</td><td>+13% damage</td><td>+16% damage</td></tr>"
                + "<tr><td>health &gt; 60%</td><td>+19% damage</td><td>+24% damage</td></tr>"
                + "<tr><td>health &gt; 50%</td><td>+25% damage</td><td>+31% damage</td></tr>"
                + "<tr><td>health &gt; 40%</td><td>+31% damage</td><td>+39% damage</td></tr>"
                + "<tr><td>health &gt; 30%</td><td>+38% damage</td><td>+48% damage</td></tr>"
                + "<tr><td>health &gt; 20%</td><td>+44% damage</td><td>+55% damage</td></tr>"
                + "<tr><td>health &gt; 0%</td><td>+50% damage</td><td>+63% damage</td></tr>"
                + "</table><br/>"
            );
            infoMap.set("grounded", 
                "50% less energy damage (for 100% more energy resistance)."
                + "<br>The <b>Class Freak</b> perk ranks reduce the penalty to -37.5%, -25% and -12.5% respectively."
            );
            infoMap.set("eagleeyes",
                "<b>Before Patch 34:</b>"
                + "<br>&nbsp;&nbsp;+25% critical damage, -4 Strength (and +4 Perception)."
                + "<br>&nbsp;&nbsp;The <b>Strange in Numbers</b> perk increases the bonus to 31.25%."
                + "<br><br><b>After Patch 34:</b>"
                + "<br>&nbsp;&nbsp;+60% critical damage, -4 Strength (and +4 Perception)."
                + "<br>&nbsp;&nbsp;The <b>Strange in Numbers</b> perk increases the bonus to 75%."
                + "<br><br>The <b>Class Freak</b> perk ranks reduce the strength penalty to -3, -2 and -1 respectively."
            );
            infoMap.set("foodmutation", 
                "<br><b>Carnivore</b>: Meat based foods are 100% more effective."
                + "<br>- The <b>Strange in Numbers</b> perk increases the bonus to 150%."
                + "<br><br><b>Herbivore</b>: Plant based foods are 100% more effective."
                + "<br>- The <b>Strange in Numbers</b> perk increases the bonus to 150%."
                + "<br>- Live and Love #3 (Magazine) increases the bonus by 50% multiplicatively."
            );
            infoMap.set("speeddemon", 
                "+30% faster reload speed (and +20% movement speed)."
                + "<br>The <b>Strange in Numbers</b> perk increases the bonus to 40%."
            );
            infoMap.set("strangeinnumbers", 
                "Positive mutation effects are 25% stronger if teammates are mutated too."
                + "<br>Improves the following mutations:"
                + "<ul>"
                    + "<li>Adrenal Reaction</li>"
                    + "<li>Carnivore</li>"
                    + "<li>Eagle Eyes</li>"
                    + "<li>Grounded</li>"
                    + "<li>Herbivore</li>"
                    + "<li>Speed Demon</li>"
                    + "<li>Talons</li>"
                    + "<li>Twisted Muscles</li>"
                + "</ul>"
                + "<br>Enable <b>Team</b> to enable this perk."
            );
            infoMap.set("nighttime", 
                "Enables the following effects/mods/perks when at night:"
                + "<ul>"
                    + "<li>Nocturnal (legenary prefix)</li>"
                    + "<li>Mister Sandman (perk)</li>"
                + "</ul>"
            );
            infoMap.set("sneaking", 
                "Enables the following effects/mods/perks when sneaking:"
                + "<ul>"
                    + "<li>Ninja (melee perk)</li>"
                    + "<li>Covert operative (ranged perk)</li>"
                + "</ul>"
            );
            infoMap.set("aiming", 
                "Enables the effects/mods/perks when aiming down the sights:"
                + "<ul>"
                    + "<li>+10% damage while aiming (legendary major)</li>"
                + "</ul>"
            );
            infoMap.set("team", 
                "Enables the following effects/mods/perks when in team:"
                + "<ul>"
                    + "<li>Strange in numbers (perk)</li>"
                    + "<li>Live and Love #2</li>"
                + "</ul>"
            );
            infoMap.set("powerattack", 
                "Enables the following effects:"
                + "<ul>"
                    + "<li>40% power attack damage</li>"
                + "</ul>"
            );
            infoMap.set("crit", 
                "Perform a critical hit that adds bonus damage."
                + "<br>Weapon mods, perks, magazines, chems and food items can increase the bonus."
                + "<br>"
                + "<br>Note that one can't sustain crits for each hit thus the DPS calculation"
                + "<br>is informational only, not achievable legitimately ingame."
            );

            infoMap.set("playerhealth", 
                "Enables the following effects/mods/perks:"
                + "<ul>"
                    + "<li>Bloodied (legendary prefix)</li>"
                    + "<li>Juggernaut's (legendary prefix)</li>"
                    + "<li>Adrenal Reaction (mutation)</li>"
                    + "<li>Nerd Rage (perk)</li>"
                + "</ul>"
            );

            infoMap.set("enemyhealth", 
                "Enables the following effects/mods/perks:"
                + "<ul>"
                    + "<li>Instigating (legendary prefix): double damage if the enemy is at full health</li>"
                    + "<li>Executioner's (legendary prefix): +50% damage if the enemy is below 40% health</li>"
                + "</ul>"
            );

            infoMap.set("enemytype", 
                "Enables the following effects/mods/perks when hitting a specific enemy type:"
                + "<ul>"
                    + "<li>Scorch Killer's (mod): bonus damage against Scorched enemies</li>"
                    + "<li>Prime (mod): bonus damage against Scorched enemies, Scorchbeasts and the Scorchbeast Queen</li>"
                    + "<li>Exterminator's (legendary prefix): bonus damage against Bugs and Mirelurks</li>"
                    + "<li>Ghoul slayer's (legendary prefix): bonus damage against Ghouls</li>"
                    + "<li>Hunter's (legendary prefix): bonus damage against Animals</li>"
                    + "<li>Mutant slayer's (legendary prefix): bonus damage against Super Mutants</li>"
                    + "<li>Troubleshooter's (legendary prefix): bonus damage against Robots</li>"
                    + "<li>Zealot's (legendary prefix): bonus damage against Scorched enemies</li>"
                    + "<li>Exterminator's (perk): ignore armor of Bugs and Mirelurks</li>"
                    + "<li>Glow sight (perk): bonus damage against Glowing enemies</li>"
                + "</ul>"
            );
            infoMap.set("enemylevel", 
                "Pick a specific enemy type from dropdown above."
                +"<br>Resistances scale with enemy levels and are interpolated"
                + "<br>if it falls between two preset level in the curve tables."
            );

            infoMap.set("strength", 
                "Each point in the Strength attribute of the player adds 5% damage."
                + "<br>If the strength is affected by some other settings, the calculated strength is displayed as bold text next to the input."
                + "<br>Armor, chems, mutations and legendary effects can increase player strength beyond 15."
                + "<br>This damage boost is additive and proportional to the base weapon damage and is considered before "
                + "<br>weapon mods, effects, perks, chems and other player conditions not related to strength."
            );

            infoMap.set("ninja", "Melee weapons only. Sets the sneak attack multiplier 2.3x, 2.6x and 3.x.");

            infoMap.set("buff", 
                "Set positive or negative damage boosts coming from other effects."
                + "<br>Pre Patch 22, boosts are typically multiplicative, thus a +50% and a +25% damage boost"
                + "<br>is not +75% boost but 1.5 * 1.25 = 1.875 or 87.5%."
                + "<br>Post Patch 22, boosts are additive, thus +50% and +25% damage boost is +75%"
                + "<br>whereas debuffs are multiplicative, thus -50% and -25% damage debuff is -62.5%."
            );

            infoMap.set("hitspeed", 
                "Adjust the hit speed of the weapon via percentage (positive or negative)"
                + "<br>on top of any other speed effects."
                + "<br>For example, a -25% speed reduction is equivalent to a 0.75 speed multiplier."
                + "<br>For example, a 40% speed boost is equivalent to a 1.40 speed multiplier."
            );
            infoMap.set("critboost", 
                "Adjust the critical damage bonus via an additive percentage (positive or negative)."
                + "<br>For example, a plain critical hit is a 2x multiplier. A +40% crit boost is a 2.4x multiplier."
            );

            infoMap.set("martialartist", "Melee weapons only. Each level increases swing speed by 10% and up to 30% total.");

            infoMap.set("mutation", 
                "Enables the following effects/mods/perks when the player is mutated:"
                + "<ul>"
                    + "<li>Mutant's (legendary prefix): bonus damage when mutated</li>"
                + "</ul>"
            );
            infoMap.set("ActualDR", 
                "Shows the Damage Resistance against <b>ballistic damage</b> after all Ignore Armor mods/effects/perks have been applied to the target."
            );
            infoMap.set("ActualER", 
                "Shows the Damage Resistance against <b>energy damage</b> after all Ignore Armor mods/effects/perks have been applied to the target."
            );
            infoMap.set("ActualRR", 
                "Shows the Damage Resistance against <b>radiation damage</b> after all Ignore Armor mods/effects/perks have been applied to the target."
            );
            infoMap.set("ActualFR", 
                "Shows the Damage Resistance against <b>fire damage</b> after all Ignore Armor mods/effects/perks have been applied to the target."
            );
            infoMap.set("ActualCR", 
                "Shows the Damage Resistance against <b>cryo damage</b> after all Ignore Armor mods/effects/perks have been applied to the target."
            );
            infoMap.set("ActualPR", 
                "Shows the Damage Resistance against <b>poison damage</b> after all Ignore Armor mods/effects/perks have been applied to the target."
            );

            infoMap.set("junkies", "With the <b>Junkie's</b> legendary prefix on a weapon, each addiction results in a +10% damage bonus up to +50% total.");

            infoMap.set("twistedmuscles", "Grants +25% melee damage (unarmed, one- and two-handed) for<br>-50% accuracy with ranged weapons (not affecting ranged damage).");

            infoMap.set("talons", "Grants +25% unarmed damage for -4 agility.");

            infoMap.set("chems", 
                "Select a chem to apply extra bonuses."
                + "<br>Chems are mutually exlusive and you can have only one active at a time."
                + "<br>Chems not affecting the current weapon or not related to damage output are not listed."
                + "<br>Effects of the individual chems not related to damage are not displayed."
            );
            infoMap.set("food", 
                "Select food(s) to apply extra bonuses."
                + "<br>- Certain foods are mutually exclusive with each other."
                + "<br>- Food not affecting the current weapon or not related to damage output are not listed."
                + "<br>- Effects of the individual food not related to damage are not displayed."
                + "<br>- <b>Carnivore</b>, <b>Herbivore</b> mutations increases the bonus effect by 100%"
                + "<br>&nbsp;&nbsp;(or 150% when using <b>Strange In Numbers</b> perk)."
            );
            infoMap.set("alcohols", 
                "Select an alcohol to apply extra bonuses."
                + "<br>Alcohols are mutually exlusive and you can have only one active at a time."
                + "<br>Alcohols not affecting the current weapon or not related to damage output are not listed."
                + "<br>Effects of the individual alcohols not related to damage are not displayed."
                + "<br>Some alcohol types do not affect certain weapon types (example: Ballistic Bock vs. Heavy guns)."
            );
            infoMap.set("partyperson", 
                "Effects of alcohol doubles (rank 1) or triples (rank 2)."
            );
            infoMap.set("classfreak", 
                "Negative effects of mutations are reduced by 25%, 50% and 75% respectively."
                + "<br>Affects the <b>Grounded</b> and <b>Eagle Eyes</b> mutation."
            );
            infoMap.set("tenderizer", 
                "Target receives 5%, 7% or 10% more damage for a few seconds after one attacks."
                + "<br>Does not show up currently in the floating damage numbers ingame."
            );
            infoMap.set("bettercrits", 
                "<b>Before Patch 34</b>: V.A.T.S. critial hits do +20%, +30% or +40% damage respectively."
                + "<br><b>After Patch 34</b>: V.A.T.S. critial hits do +50%, +75% or +100% damage respectively."
            );
            infoMap.set("colanut", 
                "Effects of Nuka Cola products doubles (rank 1) or triples (rank 2)."
                + "<br>Affects <b>Nuka Cola Dark</b> and <b>Nukashine</b> only."
            );
            infoMap.set("bobblehead", 
                "Select a bobblehead to apply extra bonuses."
                + "<br>Bobbleheads are mutually exlusive and you can have only one active at a time."
                + "<br>Bobbleheads not affecting the current weapon or not related to damage output are not listed."
                + "<br>Effects of the individual bobbleheads not related to damage are not displayed."
            );
            infoMap.set("magazine", 
                "Select a magazine to apply extra bonuses."
                + "<br>Magazines are mutually exlusive and you can have only one active at a time."
                + "<br>Magazines not affecting the current weapon or not related to damage output are not listed."
                + "<br>Effects of the individual magazines not related to damage are not displayed."
            );
            infoMap.set("queenhunt", 
                "Select the bonus received from the Daily: Queen of the Hunt."
            );
            infoMap.set("biggamehunt", 
                "Select the bonus received from the Daily: Big Game Hunter."
                + "<br>The daily awards 3 of these bonuses, but there are no mixed-type enemies that"
                + "<br>would be affected, thus please pick the one based on your current target enemy."
            );
            infoMap.set("charge", 
                "Gauss weapons only. Firing without charging the weapon is fast but 50% less damage."
                + "<br>Charging does full listed damage at the cost of firerate."
            );
            infoMap.set("quickhands", 
                "Chance to reload an empty magazine instantly."
                + "<table class='infoTable'>"
                + "<tr><td>Level 1</td><td>+6% chance</td></tr>"
                + "<tr><td>Level 2</td><td>+12% chance</td></tr>"
                + "<tr><td>Level 3</td><td>+18% chance</td></tr>"
                + "</table>"
            );
            infoMap.set("groundpounder", 
                "Automatic rifles reload 10%, 20% or 30% faster based on rank."
            );
            infoMap.set("poweruser", 
                "Fusion cores provide +30%, +60% or +100% more shots based on rank."
            );
            infoMap.set("lockandload", 
                "Heavy weapons reload 10%, 20% or 30% faster based on rank."
            );
            infoMap.set("scattershot", 
                "Shotguns reload 10%, 20% or 30% faster based on rank."
            );

            // Unique weapon information
            // ~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o
            infoMap.set("WeaponSlugBuster",
                "<b>Unique Plasma Rifle from Wastelanders</b>" 
                + "<br>Legendary: <i>Anti-armor, VATS Crit +50% dmg, 90% reduced weight</i>"
                + "<br>Premodded: Sniper Barrel, Medium NV Scope"
                + "<br>Hidden mod: -20% AP cost"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005A366E' target='_blank'>005A366E</a>"
                );

            infoMap.set("WeaponFinalWord",
                "<b>Unique 50 Cal from Wastelanders</b>" 
                + "<br>Legendary: <i>Anti-armor, 25% faster firerate, 250 DR while reloading</i>"
                + "<br>Premodded: Heavy Barrel"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005A21E4' target='_blank'>005A21E4</a>"
            );
            
            infoMap.set("WeaponActionHero",
                "<b>Unique 50 Cal awarded by a limited time Survival mode challenge</b>" 
                + "<br>Legendary: <i>Two-shot, 25% faster firerate, 15% faster reload</i>"
                + "<br>Premodded: Heavy Barrel"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00403025' target='_blank'>00403025</a>"
            );
            infoMap.set("WeaponSaltEarth",
                "<b>Unique Double-barrel Shotgun awarded by a limited time Survival mode challenge</b>" 
                + "<br>Legendary: <i>Two-shot, +10% damage while aiming, 15% faster reload</i>"
                + "<br>Premodded: Steadfast receiver"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/0042B0D3' target='_blank'>0042B0D3</a>"
            );
            infoMap.set("WeaponCursedPickaxe",
                "<b>Unique Pickaxe from the Colossal Problem event</b>" 
                + "<br>Legendary: <i>Bloodied, 40% Power Attack, 90% reduced weight</i>"
                + "<br>Special feature: 15% more damage, 20% faster swing speed, breaks much faster"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00002840' target='_blank'>00002840</a>"
            );
            infoMap.set("WeaponCursedShovel",
                "<b>Unique Shovel from the Colossal Problem event</b>" 
                + "<br>Legendary: <i>Executioner's, 40% Swing Speed, 90% reduced weight</i>"
                + "<br>Special feature: 15% more damage, 20% faster swing speed, breaks much faster"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/004E2E20' target='_blank'>004E2E20</a>"
            );
            infoMap.set("WeaponCursedHarpoonGun",
                "<b>Unique Harpoon Gun from the Colossal Problem event</b>" 
                + "<br>Legendary: <i>Executioner's, 40% bashing damage, 90% reduced weight</i>"
                + "<br>Special feature: 15% more damage, 20% faster fire rate, breaks much faster"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/001109CF' target='_blank'>001109CF</a>"
            );
            infoMap.set("WeaponKingFisher",
                "<b>Unique Harpoon Gun awarded by a limited time Survival mode challenge</b>" 
                + "<br>Legendary: <i>Exterminator's, VATS Crits do +50% damage, VATS Crit meter fills 15% faster</i>"
                + "<br>Premodded: Barbed harpoon, Short scope"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/0042B0D0' target='_blank'>0042B0D0</a>"
            );
            infoMap.set("WeaponVoiceOfSet",
                "<b>Unique .44 pistol earned during the Mistress of Mystery sidequest</b>" 
                + "<br>Unique mod: <i>Additional electric damage vs. Robots</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/0039C6C9' target='_blank'>0039C6C9</a>"
            );
            infoMap.set("WeaponMedicalMalpractice",
                "<b>Unique .44 pistol awarded by a limited time Survival mode challenge</b>" 
                + "<br>Legendary: <i>Medic's, +33% VATS accuracy, 25% reduced AP cost</i>"
                + "<br>Premodded: Hair Trigger, Stabilized Stub Barrel, True Grip"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00403022' target='_blank'>00403022</a>"
                );
            infoMap.set("WeaponVATSUnknown",
                "<b>Unique Alien Blaster from Wastelanders</b>" 
                + "<br>Legendary: <i>Medic's, VATS Crit +50% dmg, VATS Crit fills 15% faster</i>"
                + "<br>Premodded: Sharpshooter's Grip, Long Barrel"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005A21A2' target='_blank'>005A21A2</a>"
                );
            infoMap.set("WhistleInTheDark",
                "<b>Unique Assault Rifle from Survival mode/Daily Ops.</b>" 
                + "<br>Legendary: <i>Nocturnal, +33% VATS Hit Chance, +1 Perception</i>"
                + "<br>Form ID (Survival): <a href='https://nukacrypt.com/database/json/0042B0D2' target='_blank'>0042B0D2</a>"
                + "<br>Form ID (Daily Ops): <a href='https://nukacrypt.com/database/json/005E51E6' target='_blank'>005E51E6</a>"
                );

            infoMap.set("WeaponOldGuard",
                "<b>Unique 10mm SMG from Wastelanders</b>" 
                + "<br>Legendary: <i>Anti-armor</i>"
                + "<br>Premodded: Refined receiver, Piercing Magazine"
                + "<br>Hidden effect: better firerate than the default 10mm SMG"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/0059A82F' target='_blank'>0059A82F</a>"
                );
            infoMap.set("WeaponBunkerBuster",
                "<b>Unique Missile Launcher</b>" 
                + "<br>Legendary: <i>+20% damage</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00471880' target='_blank'>00471880</a>"
                );
            infoMap.set("WeaponFancyShotgun",
                "<b>Unique Shotgun with a 1.5% drop chance from Bellhop in exchange for claim tickets</b>" 
                + "<br>Legendary: <i>Anti-armor, +50% limb damage, +50 DR while aiming</i>"
                + "<br>Bonus properties: +4 clip size, 30% faster reload"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005A38DA' target='_blank'>005A38DA</a>"
                );
            infoMap.set("WeaponFancySingleAction",
                "<b>Unique Single Action Pistol with a 1.5% drop chance from Bellhop in exchange for claim tickets</b>" 
                + "<br>Legendary: <i>random 1 star</i>"
                + "<br>Bonus properties: 30% faster firerate"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/0034CBD8' target='_blank'>0034CBD8</a>"
                );
            infoMap.set("WeaponMindOverMatter",
                "<b>Unique Plasma Pistol from Steel Dawn</b>" 
                + "<br>Legendary: <i>Ghoul Slayer's, +10% damage while aiming, +50% DR while aiming</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005EA441' target='_blank'>005EA441</a>"
                );
            infoMap.set("WeaponTheFactFinder",
                "<b>Unique .44 Pistol from Wastelanders</b>" 
                + "<br>Legendary: <i>Two shot, Explosive, 25% reduced VATS AP cost</i>"
                + "<br>Premodded: Stabilized Bull Barrel, Reflex Sight, True Grip"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005D038D' target='_blank'>005D038D</a>"
                );
            infoMap.set("WeaponOathbreaker",
                "<b>Unique War Glaive from Steel Dawn</b>" 
                + "<br>Legendary: <i>Suppressor's, 40% more power attack damage, 40% less damage while power attacking</i>"
                + "<br>Premodded: Plasma Blade"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005E897C' target='_blank'>005E897C</a>"
                );
            infoMap.set("WeaponUnstoppableMonster",
                "<b>Unique Deathclaw Gauntlet from Survival mode or as a reward plan from Daily Ops since Patch 26</b>" 
                + "<br>Legendary: <i>Bloodied, 40% more power attack damage, 40% less damage while power attacking</i>"
                + "<br>Premodded: Extra claw"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/005FCE8C' target='_blank'>005FCE8C</a>"
                );

            infoMap.set("ResistanceSBQ", "Scorchbeast Queen<br>32000 health, 300 DR, 300 ER, 300 RR, 300 FR, 300 CR, 300 PR<br>ignores 70% of all kinds of incoming damage.");
            infoMap.set("ResistanceRandal", 
                "Aka the <a href='https://youtu.be/KRJcSsGt6VY?t=512' target='_blank'>Wendigo Colossus ;)</a>"
                + "<br>32000 health, 400 DR, 400 ER, 500 RR, 400 FR, 400 CR, 400 PR<br>"
                + "ignores 10% of all kinds of incoming damage.<br>"
            );
            infoMap.set("ResistanceEarle", 
                "Boss enemy of the Event: A Colossal Problem.<br>32000 health, 400 DR, 400 ER, 500 RR, 400 FR, 400 CR, 400 PR<br>"
                + "ignores 80% of all kinds of incoming damage.<br>"
            );
            infoMap.set("buffcalcmode", 
                  "<b><u>Certain major patches changed how damage dealt is calculated:</u></b>"
                + "<br><br>Before Patch 22 (One Wasteland), damage buffs were mostly multiplicative"
                + "<br>and more resistances had a diminishing effect on reducing damage."
                + "<br><br>Patch 22 (One Wasteland) changed damage buffs to be mostly additive."
                + "<br><br>Patch 23 changed a few remaining buffs to be additive."
                + "<br>Stealth and crit bonuses still appear to be multiplicative."
                + "<br><br>Patch 27 buffed the slayer damages."
                + "<br><br>Patch 28 added more legendary effects and adjusted existing ones."
                + "<br><br>Patch 33 fixed the damage formula for non-ballistic damage types. Previously, only the weapon's base damage was pitted against the enemy resistance, ignoring any damage buffs."
                + "<br><br>Patch 34 changed critical bonus calculation to be additive, increased crit bonuses across."
                + "<br><br>Future patches appear to change the impact of resistances so that"
                + "<br>there won't be such a sharp drop in damage output for the same level of resistance,"
                + "<br>resulting in tougher enemies to receive more damage."
            );

            infoMap.set("WeaponCrowdControl",
                "<b>Unique Combat Shotgun from the public event Eviction Notice</b>" 
                + "<br>Legendary: <i>Suppressor's, Explosive, 90% reduced weight</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/006477EC' target='_blank'>006477EC</a>"
                );
            infoMap.set("WeaponPiratePunch",
                "<b>Unique Black Powder Blunderbuss from the public event Eviction Notice</b>" 
                + "<br>Legendary: <i>Two Shot, 33% better VATS, 15% faster reload</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00647820' target='_blank'>00647820</a>"
                );
            infoMap.set("WeaponGulperSmacker",
                "<b>One handed melee weapon from the public event Moonshine Jamboree</b>" 
                + "<br>Special mod: <i>50% bonus damage to Gulpers</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00633475' target='_blank'>00633475</a>"
                );
            infoMap.set("WeaponToneDeath",
                "<b>Unique Death Tambo from the public event Eviction Notice</b>" 
                + "<br>Legendary: <i>Suppressor's, 40% increased swing speed, +1 Strength</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/006477EF' target='_blank'>006477EF</a>"
                );
                
            infoMap.set("WeaponDoctorsOrders",
                "<b>Unique Hunting Rifle from the public event Eviction Notice</b>" 
                + "<br>Legendary: <i>Vampire's, 50% limb damage, Hits generate stealth field</i>"
                + "<br>Pre-modded: <i>Hardened receiver, Standard long barrel, True stock, Long night vision scope</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/006477EE' target='_blank'>006477EE</a>"
                );

            infoMap.set("WeaponFoundationsVengeance",
                "<b>Unique Minigun from the public event Eviction Notice</b>" 
                + "<br>Legendary: <i>Bloodied, Explosive 250 DR while reloading</i>"
                + "<br>Pre-modded: <i>Gunner Sight, Shredder</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00646880' target='_blank'>00646880</a>"
                );
            infoMap.set("WeaponTheDebilitator",
                "<b>Unique Super Sledge from the public event Eviction Notice</b>" 
                + "<br>Legendary: <i>Mutant Slayer's, 40% faster swing speed, +1 Strength</i>"
                + "<br>Form ID: <a href='https://nukacrypt.com/database/json/00646880' target='_blank'>00646880</a>"
                );

            // ~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o~o

            infoMap.set("aristocrats", 
                "Enables the following legendary effects:"
                + "<ul>"
                    + "<li><b>Aristocrat's</b>: up to 25% more damage when having 29000+ caps</li>"
                + "</ul>"
            );
            infoMap.set("gourmands", 
                "Enables the following legendary effects:"
                + "<ul>"
                    + "<li><b>Gourmand's</b>: up to 24% more damage when having 100% food and thirst meter</li>"
                + "</ul>"
            );
            infoMap.set("steady", 
                "Enables the following legendary effects:"
                + "<ul>"
                    + "<li><b>Steady</b>: +25% damage while standing still</li>"
                + "</ul>"
            );
            infoMap.set("mutationcount", 
                "Indicate how many other mutations you have for the following legendary effects:"
                + "<ul>"
                    + "<li><b>Pre Patch 28</b>: 10% more damage if mutated</li>"
                    + "<li><b>Post Patch 28</b>: each mutation gives +5% damage up to 25%</li>"
                + "</ul>"
            );
            infoMap.set("4thstar", 
                "<ul>"
                    + "<li><b>Bruiser's</b>: +15% damage after bashing an enemy.</li>"
                    + "<li><b>Warmonger's</b>: +150% damage after killing an enemy for 15 seconds.</li>"
                + "</ul>"
            );


            // add HTML explanation marker
            function info(name) {
                return "&nbsp;<sup><a href='#' style='font-size: 14; font-weight: bold;' onclick='showinfo(this, \"" + name + "\"); return false;'>?</a></sup>";
            }

            // popup for explanation
            function showinfo(target, name) {
                var div = document.getElementById("InfoDiv" + name);
                if (div == null) {
                    var div = document.createElement("div");
                    div.style.border = "1px solid black";
                    div.style.padding = "3px";
                    div.style.position = "absolute";
                    div.style.backgroundColor = "#FFFFD0";
                    div.style.zIndex = 99;
                    div.id = "InfoDiv" + name;
                    var txt = infoMap.get(name);

                    if (txt == null) {
                        txt = "??? " + name + " ???";
                    }
                    txt += "<hr><font style='font-size: 14px'>Click to close.</font>";
                    div.innerHTML = txt;

                    target.parentElement.appendChild(div);
                    div.onclick = function() {
                        target.parentElement.removeChild(div);
                    }
                } else {
                    target.parentElement.removeChild(div);
                }
            }


            for (var side of ["Left", "Right"]) {
                for (var res of ["DR", "ER", "RR", "FR", "CR", "PR"]) {
                    var node = document.getElementById("Actual" + res + side);
                    node.innerHTML = node.innerHTML + info("Actual" + res);
                }
            }

            // ----------------------------------------------------------------------

            function clearTable(tbl) {
                for (var i = tbl.rows.length - 1; i > 0; i--) {
                    tbl.deleteRow(i);
                }
            }
            function clearTable2(tbl) {
                for (var i = tbl.rows.length - 1; i > 1; i--) {
                    tbl.deleteRow(i);
                }
            }

            function sanitizeName(name) {
                return name.replace(/[\s\-\_\']/g, "");
            }

            function linkIdFor(obj, fallback) {
                if (obj.linkId !== undefined) {
                    return obj.linkId;
                }
                if (fallback !== undefined) {
                    return sanitizeName(fallback);
                }
                return undefined;
            }

            function createSelectWeapon(tbl, index, type) {
                clearTable(tbl);

                var row = tbl.insertRow(1);

                var cell1 = row.insertCell(0);
                cell1.innerText = "Weapon";

                var cell2 = row.insertCell(1);



                var weaps = allWeapons.get(type);

                if (weaps.length == 0) {
                    cell2.innerHTML = "No weapon data available";
                } else {

                    cell2.innerHTML = "<select id='weapon" + index + "'></select> ("
                    + weaps.length + ") <span id='weaponinfo" + index + "'></span>";
                    var selector = document.getElementById("weapon" + index);
                    selector.linkId = "W";

                    weaps.forEach(function(weap) {
                        var opt = document.createElement("option");
                        if (weap.special) {
                            opt.text = weap.name + " *";
                        } else {
                            opt.text = weap.name;
                        }
                        opt.value = weap.name;
                        opt.info = weap.info;
                        opt.formId = weap.formId;
                        opt.linkId = linkIdFor(weap, weap.name);

                        selector.add(opt);
                    });
                    selector.selectedIndex = -1;

                    selector.onchange = function() {
                        clearTable2(tbl);
                        createSelectLevel(tbl, index, type);
                        createSelectMods(tbl, index, type);
                        createSelectLegendary(tbl, index, type);
                        createSelectLegendaryParameter(tbl, index, type);
                        createPerks(tbl, index, type);
                        createMutations(tbl, index, type);
                        createOther(tbl, index, type);
                        recalculate(tbl, index, type);

                        var weapInfoSpan = document.getElementById("weaponinfo" + index);
                        weapInfoSpan.innerHTML = "";
                        if (selector.selectedIndex > 0) {
                            var opt = selector.options[selector.selectedIndex];
                            var infoLink = opt.info;
                            if (infoLink !== undefined) {
                                weapInfoSpan.innerHTML = info(infoLink);
                            }
                            if (opt.formId) {
                                weapInfoSpan.innerHTML += "&nbsp;&nbsp;&nbsp;<a href='https://nukacrypt.com/database/json/" + opt.formId + "' target='_blank'>&#x2622;</a>"
                            }
                        }
                    };
                }
            }

            function createSelectLevel(tbl, index, type) {
                var cell2 = document.getElementById("levels" + index);

                if (cell2 == null) {
                    var row = tbl.insertRow(tbl.rows.length);

                    var cell1 = row.insertCell(0);
                    cell1.innerText = "Level";
                    cell1.style = "border-top: 1px solid black;"

                    cell2 = row.insertCell(1);
                    cell2.id = "levels" + index;
                    cell2.style = "border-top: 1px solid black;"
                }

                cell2.innerHTML = "<select id='level" + index + "'></select>"
                ;

                var levelsel = document.getElementById("level" + index);
                levelsel.linkId = "L";

                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                let weap = allWeapons.get(type)[weapIdx];

                weap.level.forEach(function(item, idx) {
                    opt = document.createElement("option");
                    levelsel.add(opt);

                    opt.text = item;
                    opt.value = "" + idx;
                    opt.linkId = "" + item;
                });
                levelsel.selectedIndex = weap.level.length - 1;
                levelsel.onchange = function() {
                    recalculate(tbl, index, type);
                };
            }

            function createSelectMods(tbl, index, type) {
                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                var weap = allWeapons.get(type)[weapIdx];

                var row = tbl.insertRow(tbl.rows.length);

                var cell1 = row.insertCell(0);
                cell1.innerText = "Mods";

                cell2 = row.insertCell(1);
                cell2.id = "mods" + index;

                if (weap.mods.length == 0) {
                    cell2.innerText = "No damage-related mods";
                }

                weap.mods.forEach(function(item, idx) {

                    var modRow = tbl.insertRow(tbl.rows.length);

                    var modCell1 = modRow.insertCell(0);
                    modCell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;" + item.slot;

                    var modCell2 = modRow.insertCell(1);

                    var modSelector = document.createElement("select");
                    modSelector.id = "mods_" + index + "_" + idx;
                    modSelector.linkId = linkIdFor(item, "Mod" + item.slot);
                    modCell2.appendChild(modSelector);

                    var selIdx = 0;
                    item.options.forEach(function(modItem, modIdx) {
                        var modOpt = document.createElement("option");
                        modSelector.add(modOpt);
                        modOpt.value = "" + modIdx;
                        modOpt.text = modItem.name;
                        modOpt.linkId = linkIdFor(modItem, modItem.name);
                        if (modItem.preinstalled) {
                            selIdx = modIdx;
                        }
                    });
                    modSelector.selectedIndex = selIdx;

                    modSelector.onchange = function() {
                        recalculate(tbl, index, type);
                    };
                });
            }

            function createSelectLegendary(tbl, index, type) {
                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                var weap = allWeapons.get(type)[weapIdx];

                var row = tbl.insertRow(tbl.rows.length);

                var cell1 = row.insertCell(0);
                cell1.innerText = "Legendary effects";

                var titles = ["Prefix", "Major", "Minor", "4th"];
                var tips = [null, null, null, "4thstar"];

                var effects = allEffects.get(type);
                effects.forEach(function(effect, idx) {
                    var effRow = tbl.insertRow(tbl.rows.length);

                    var effCell1 = effRow.insertCell(0);
                    effCell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;" + titles[idx];
                    if (tips[idx]) {
                        effCell1.innerHTML += info(tips[idx]);
                    }

                    var effCell2 = effRow.insertCell(1);

                    if (effect.length == 0) {
                        effCell2.innerText = "No damage-related legendary effect";
                    } else {
                        var effSelector = document.createElement("select");
                        effSelector.id = "effs_" + index + "_" + idx;
                        effCell2.appendChild(effSelector);

                        effSelector.linkId = titles[idx];

                        var effOpt = document.createElement("option");
                            effSelector.add(effOpt);
                            effOpt.value = "";
                            effOpt.text = "";

                            effect.forEach(function(effItem, effIdx) {
                                if (!(effItem.name.includes("Explosive") && weap.explosive)) {
                                    effOpt = document.createElement("option");
                                    effSelector.add(effOpt);
                                    effOpt.value = effItem.name;
                                    effOpt.linkId = linkIdFor(effItem, effItem.name);

                                    if (effItem.text !== undefined) {
                                        effOpt.text = effItem.text;
                                    } else {
                                        effOpt.text = effItem.name;
                                    }

                                    if (weap.legendaryPrefix === effItem.name) {
                                        effOpt.selected = true;
                                    }
                                    if (weap.legendaryMajor === effItem.name) {
                                        effOpt.selected = true;
                                    }
                                    if (weap.legendaryMinor === effItem.name) {
                                        effOpt.selected = true;
                                    }
                                }
                            });
                        

                        effSelector.onchange = function() {
                            recalculate(tbl, index, type);
                        };
                    }
                });
            }

            function createSelectLegendaryParameter(tbl, index, type) {
                var row = tbl.insertRow(tbl.rows.length);
                var cell1 = row.insertCell(0);
                cell1.innerText = "Parameters";
                var cell2 = row.insertCell(1);

                createYesNo(tbl, index, type, "Night time", "nighttime", "nighttime", "Night");

                createYesNo(tbl, index, type, "Sneaking", "sneaking", "sneaking", "Sneak");

                if (type === "Ranged") {
                    createYesNo(tbl, index, type, "Aiming", "aiming", "aiming", "Aim");
                }

                createYesNo(tbl, index, type, "Team", "team", "team", "Team");

                createYesNo(tbl, index, type, "Critical", "crit", "crit", "Crit");

                if (type === "Melee") {
                    createYesNo(tbl, index, type, "Power Attacking", "powerattack", "powerattack", "PowerAttack");
                }

                createYesNo(tbl, index, type, "Standing still", "steady", "steady", "Steady");

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Player health" + info("playerhealth");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<input type='number' id='playerhealth" + index + "' value='100' maxlength='6' style='width: 8em;' min='1' max='100'> %";
                var playerhealthsel = document.getElementById("playerhealth" + index );
                playerhealthsel.oninput = function() {
                    recalculate(tbl, index, type);
                };
                playerhealthsel.linkId = "PHP";
                playerhealthsel.linkDefault = "100";

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Enemy health" + info("enemyhealth");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<input type='number' id='enemyhealth" + index + "' value='99' maxlength='6' style='width: 8em;' min='1' max='100'> %";
                var enemyhealthsel = document.getElementById("enemyhealth" + index );
                enemyhealthsel.oninput = function() {
                    recalculate(tbl, index, type);
                };
                enemyhealthsel.linkId = "EHP";
                enemyhealthsel.linkDefault = "99";

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Enemy type" + info("enemytype");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='enemytype" + index + "'></select>"

                var enemytypesel = document.getElementById("enemytype" + index);
                enemytypesel.linkId = "Enemy";
                var opt = document.createElement("option");
                enemytypesel.add(opt);
                opt.text = "Any";
                opt.value = "";

                enemyCategories.forEach(function(item, idx) {
                    opt = document.createElement("option");
                    enemytypesel.add(opt);

                    opt.text = item.name;
                    opt.value = item.keywords.join();
                    opt.linkId = linkIdFor(item, item.name);
                    opt.resistances = item.leveledResistances;
                });

                enemytypesel.onchange = function() {
                    recalculate(tbl, index, type);
                };
                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enemy level" + info("enemylevel");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='enemylevel" + index + "' value='100' maxlength='6' style='width: 5em;' min='1'>";
                    var enemylevelsel = document.getElementById("enemylevel" + index );
                    enemylevelsel.oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    enemylevelsel.linkId = "EnemyLvl";
                    enemylevelsel.linkDefault = "100";

                if (type === "Melee") {
                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Strength" + info("strength");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='strength" + index 
                        + "' value='1' maxlength='6' style='width: 3em;' min='1' max='100'> (points)"
                        + "&nbsp;<span id='strengthactual" + index + "'></span>"
                        ;
                    document.getElementById("strength" + index ).oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    document.getElementById("strength" + index ).linkId = "Str";
               }

                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Furious hit count" + info("furious");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='furioushits" + index + "' value='0' maxlength='6' style='width: 3em;' min='0' max='30'>";
                    var furioushitssel = document.getElementById("furioushits" + index );
                    furioushitssel.oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    furioushitssel.linkId = "Hits";
                    furioushitssel.linkDefault = "0";

                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Addictions" + info("junkies");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='junkiescount" + index + "' value='0' maxlength='6' style='width: 3em;' min='0' max='30'>";
                    var junkiescountsel = document.getElementById("junkiescount" + index );
                    junkiescountsel.oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    junkiescountsel.linkId = "Addicts";
                    junkiescountsel.linkDefault = "0";

                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Caps" + info("aristocrats");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='caps" + index + "' value='0' maxlength='6' style='width: 4em;' min='0' max='30000'>";
                    var aristocratsel = document.getElementById("caps" + index );
                    aristocratsel.oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    aristocratsel.linkId = "Caps";
                    aristocratsel.linkDefault = "0";

                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Hunger &amp; Thirst" + info("gourmands");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='feed" + index + "' value='0' maxlength='6' style='width: 3em;' min='0' max='100'> %";
                    var gourmandsel = document.getElementById("feed" + index );
                    gourmandsel.oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    gourmandsel.linkId = "Food";
                    gourmandsel.linkDefault = "0";

                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                var weap = allWeapons.get(type)[weapIdx];

                if (weap.chargetime !== undefined) {
                    createYesNo(tbl, index, type, "Charged", "charge", "charge", "Charged");
                }
            }

            function createPerks(tbl, index, type) {
                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                var weap = allWeapons.get(type)[weapIdx];

                var row = tbl.insertRow(tbl.rows.length);
                var cell1 = row.insertCell(0);
                cell1.innerText = "Perks";
                var cell2 = row.insertCell(1);

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Bloody mess" + info("bloodymess");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='bloodymess" + index + "'></select> (rank)"

                var bloodymesssel = document.getElementById("bloodymess" + index);
                var opt = document.createElement("option");
                bloodymesssel.add(opt);
                opt.text = "None";
                opt.value = "0";
                bloodymesssel.linkId = "BloodyMess";

                for (var i = 1; i < 4; i++) {
                    opt = document.createElement("option");
                    bloodymesssel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + (i * 5);
                    opt.linkId = opt.value;
                }
                bloodymesssel.selectedIndex = 0;
                bloodymesssel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Adrenaline" + info("adrenaline");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='adrenaline" + index + "'></select> (rank)&nbsp;&nbsp;&nbsp;Kills&nbsp;"
                    + "<input type='number' id='kills" + index + "' value='6' maxlength='6' style='width: 3em;' min='0' max='10'>";

                var adrenalinesel = document.getElementById("adrenaline" + index);
                opt = document.createElement("option");
                adrenalinesel.add(opt);
                opt.text = "None";
                opt.value = "0";
                adrenalinesel.linkId = "Adrenaline";

                for (var i = 1; i < 6; i++) {
                    opt = document.createElement("option");
                    adrenalinesel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + (30 + (i * 6));
                    opt.linkId = opt.value;
                }
                adrenalinesel.selectedIndex = 0;
                adrenalinesel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                var killsel = document.getElementById("kills" + index );
                killsel.oninput = function() {
                    recalculate(tbl, index, type);
                };
                killsel.linkId = "Kills";
                killsel.linkDefault = "6";

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Weapon-specific boost" + info("weaponperk");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='boost" + index + "'></select> %"

                var boost = document.getElementById("boost" + index);
                opt = document.createElement("option");
                boost.add(opt);
                opt.text = "None";
                opt.value = "0";
                boost.linkId = "Boost";

                for (var i = 10; i < 106; i += 5) {
                    opt = document.createElement("option");
                    boost.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + i;
                    opt.linkId = opt.value;
                }
                boost.selectedIndex = 0;
                boost.onchange = function() {
                    recalculate(tbl, index, type);
                };

                // ------------------------------------------------

                if (type === "Melee") {
                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Incisor" + info("incisor");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='incisor" + index + "'></select> (rank)"

                    var incisor = document.getElementById("incisor" + index);
                    opt = document.createElement("option");
                    incisor.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    incisor.linkId = "Incisor";

                    for (var i = 1; i < 4; i++) {
                        opt = document.createElement("option");
                        incisor.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + (i * 25);
                        opt.linkId = opt.value;
                    }
                    incisor.selectedIndex = 0;
                    incisor.onchange = function() {
                        recalculate(tbl, index, type);
                    };

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Weighted" + info("weighted");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='weighted" + index + "'></select> (armor pieces modded)"

                    var weighted = document.getElementById("weighted" + index);
                    opt = document.createElement("option");
                    weighted.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    weighted.linkId = "Weighted";

                    for (var i = 1; i < 3; i++) {
                        opt = document.createElement("option");
                        weighted.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + i;
                        opt.linkId = opt.value;
                    }
                    weighted.selectedIndex = 0;
                    weighted.onchange = function() {
                        recalculate(tbl, index, type);
                    };


                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Martial Artist" + info("martialartist");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='martialartist" + index + "'></select> (rank)"

                    var martialartist = document.getElementById("martialartist" + index);
                    opt = document.createElement("option");
                    martialartist.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    martialartist.linkId = "Martial";

                    for (var i = 1; i < 4; i++) {
                        opt = document.createElement("option");
                        martialartist.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + (i * 10);
                        opt.linkId = opt.value;
                    }
                    martialartist.selectedIndex = 0;
                    martialartist.onchange = function() {
                        recalculate(tbl, index, type);
                    };

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Ninja" + info("ninja");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='ninja" + index + "'></select> (rank)"

                    var ninja = document.getElementById("ninja" + index);
                    opt = document.createElement("option");
                    ninja.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    ninja.linkId = "Ninja";

                    opt = document.createElement("option");
                        ninja.add(opt);
                        opt.text = "1";
                        opt.value = "30";
                        opt.linkId = opt.value;
                    opt = document.createElement("option");
                        ninja.add(opt);
                        opt.text = "2";
                        opt.value = "60";
                        opt.linkId = opt.value;
                    opt = document.createElement("option");
                        ninja.add(opt);
                        opt.text = "3";
                        opt.value = "100";
                        opt.linkId = opt.value;

                    ninja.selectedIndex = 0;
                    ninja.onchange = function() {
                        recalculate(tbl, index, type);
                    };
                }

                if (type === "Ranged") {

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Demolition Expert" + info("demolitionexpert");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='demolition" + index + "'></select> (rank)"

                    var demolition = document.getElementById("demolition" + index);
                    opt = document.createElement("option");
                    demolition.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    demolition.linkId = "Demo";

                    for (var i = 1; i < 6; i++) {
                        opt = document.createElement("option");
                        demolition.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + (20 + (i - 1) * 10);
                        opt.linkId = opt.value;
                    }
                    // pre nerf available options
                    opt = document.createElement("option");
                    demolition.add(opt);
                    opt.text = "4 (pre nerf)";
                    opt.value = "80";
                    opt.linkId = opt.value + "N";
                    opt = document.createElement("option");
                    demolition.add(opt);
                    opt.text = "5 (pre nerf)";
                    opt.value = "100";
                    opt.linkId = opt.value + "N";

                    demolition.selectedIndex = 0;
                    demolition.onchange = function() {
                        recalculate(tbl, index, type);
                    };

                    if (weap.category === "Rifle" || weap.category === "Pistol") {
                        row = tbl.insertRow(tbl.rows.length);
                        cell1 = row.insertCell(0);
                        cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Tank killer" + info("tankkiller");
                        cell2 = row.insertCell(1);
                        cell2.innerHTML = "<select id='tankkiller" + index + "'></select> (rank)"

                        var tankkiller = document.getElementById("tankkiller" + index);
                        opt = document.createElement("option");
                        tankkiller.add(opt);
                        opt.text = "None";
                        opt.value = "0";
                        tankkiller.linkId = "TankAP";

                        for (var i = 1; i < 4; i++) {
                            opt = document.createElement("option");
                            tankkiller.add(opt);
                            opt.text = "" + i;
                            opt.value = "" + (i * 12);
                            opt.linkId = opt.value;
                        }
                        tankkiller.selectedIndex = 0;
                        tankkiller.onchange = function() {
                            recalculate(tbl, index, type);
                        };
                    }
                    if (weap.category === "Bow") {
                        row = tbl.insertRow(tbl.rows.length);
                        cell1 = row.insertCell(0);
                        cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Bow before me" + info("bowbeforeme");
                        cell2 = row.insertCell(1);
                        cell2.innerHTML = "<select id='bowbeforeme" + index + "'></select> (rank)"

                        var bowbeforeme = document.getElementById("bowbeforeme" + index);
                        opt = document.createElement("option");
                        bowbeforeme.add(opt);
                        opt.text = "None";
                        opt.value = "0";
                        bowbeforeme.linkId = "BowAP";

                        for (var i = 1; i < 4; i++) {
                            opt = document.createElement("option");
                            bowbeforeme.add(opt);
                            opt.text = "" + i;
                            opt.value = "" + (i * 12);
                            opt.linkId = opt.value;
                        }
                        bowbeforeme.selectedIndex = 0;
                        bowbeforeme.onchange = function() {
                            recalculate(tbl, index, type);
                        };
                    }
                    if (weap.category.includes("Heavy")) {
                        row = tbl.insertRow(tbl.rows.length);
                        cell1 = row.insertCell(0);
                        cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Stabilized" + info("stabilized");
                        cell2 = row.insertCell(1);
                        cell2.innerHTML = "<select id='stabilized" + index + "'></select> (rank)"

                        var stabilized = document.getElementById("stabilized" + index);
                        opt = document.createElement("option");
                        stabilized.add(opt);
                        opt.text = "None";
                        opt.value = "0";
                        stabilized.linkId = "HeavyAP";

                        for (var i = 1; i < 4; i++) {
                            opt = document.createElement("option");
                            stabilized.add(opt);
                            opt.text = "" + i;
                            opt.value = "" + (i * 15);
                            opt.linkId = opt.value;
                        }
                        stabilized.selectedIndex = 0;
                        stabilized.onchange = function() {
                            recalculate(tbl, index, type);
                        };
                    }

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Covert operative" + info("covertoperative");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='covertop" + index + "'></select> (rank)"

                    var covertop = document.getElementById("covertop" + index);
                    opt = document.createElement("option");
                    covertop.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    covertop.linkId = "Covert";

                    opt = document.createElement("option");
                    covertop.add(opt);
                    opt.text = "1";
                    opt.value = "" + 15;
                    opt.linkId = opt.value;

                    opt = document.createElement("option");
                    covertop.add(opt);
                    opt.text = "2";
                    opt.value = "" + 30;
                    opt.linkId = opt.value;
                    
                    opt = document.createElement("option");
                    covertop.add(opt);
                    opt.text = "3";
                    opt.value = "" + 50;
                    opt.linkId = opt.value;

                    covertop.selectedIndex = 0;
                    covertop.onchange = function() {
                        recalculate(tbl, index, type);
                    };
                    
                }

                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Exterminator" + info("exterminator");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='exterminator" + index + "'></select> (rank)"

                    var exterminator = document.getElementById("exterminator" + index);
                    opt = document.createElement("option");
                    exterminator.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    exterminator.linkId = "Exterm";

                    for (var i = 1; i < 4; i++) {
                        opt = document.createElement("option");
                        exterminator.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + (25 * i);
                        opt.linkId = opt.value;
                    }
                    exterminator.selectedIndex = 0;
                    exterminator.onchange = function() {
                        recalculate(tbl, index, type);
                    };

                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Glow sight" + info("glowsight");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='glowsight" + index + "'></select> (rank)"

                    var glowsight = document.getElementById("glowsight" + index);
                    opt = document.createElement("option");
                    glowsight.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    glowsight.linkId = "Glow";

                    for (var i = 1; i < 4; i++) {
                        opt = document.createElement("option");
                        glowsight.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + (20 * i);
                        opt.linkId = opt.value;
                    }
                    glowsight.selectedIndex = 0;
                    glowsight.onchange = function() {
                        recalculate(tbl, index, type);
                    };

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Nerd Rage" + info("nerdrage");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='nerdrage" + index + "'></select> (rank)"

                var nerdragesel = document.getElementById("nerdrage" + index);
                opt = document.createElement("option");
                nerdragesel.add(opt);
                opt.text = "None";
                opt.value = "0";
                nerdragesel.linkId = "Nerd";

                for (var i = 1; i < 4; i++) {
                    opt = document.createElement("option");
                    nerdragesel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + (5 + i * 5);
                    opt.linkId = opt.value;
                }
                nerdragesel.selectedIndex = 0;
                nerdragesel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Revenant" + info("revenant");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='revenant" + index + "'></select> (rank)"
                
                var revenantsel = document.getElementById("revenant" + index);
                opt = document.createElement("option");
                revenantsel.add(opt);
                opt.text = "None";
                opt.value = "0";
                revenantsel.linkId = "Rev";

                for (var i = 1; i < 3; i++) {
                    opt = document.createElement("option");
                    revenantsel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + (i * 25);
                    opt.linkId = opt.value;
                }
                revenantsel.selectedIndex = 0;
                revenantsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                if (weap.silencer) {
                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Mister Sandman" + info("sandman");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='sandman" + index + "'></select> (rank)"
                    var sandmansel = document.getElementById("sandman" + index);
                    opt = document.createElement("option");
                    sandmansel.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    sandmansel.linkId = "Sandman";

                    for (var i = 1; i < 3; i++) {
                        opt = document.createElement("option");
                        sandmansel.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + (i * 25);
                        opt.linkId = opt.value;
                    }
                    sandmansel.selectedIndex = 0;
                    sandmansel.onchange = function() {
                        recalculate(tbl, index, type);
                    };
                }

                createYesNo(tbl, index, type, "Strange in numbers", "strangeinnumbers", "strangeinnumbers", "Strange");

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Party boy/girl" + info("partyperson");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='partyperson" + index + "'></select> (rank)"
                
                var partypersonsel = document.getElementById("partyperson" + index);
                opt = document.createElement("option");
                partypersonsel.add(opt);
                opt.text = "None";
                opt.value = "0";
                partypersonsel.linkId = "Party";

                for (var i = 1; i < 3; i++) {
                    opt = document.createElement("option");
                    partypersonsel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + i; // calculated with (1 + value)
                    opt.linkId = opt.value;
                }
                partypersonsel.selectedIndex = 0;
                partypersonsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                if (type === "Melee") {
                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Cola nut" + info("colanut");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='colanut" + index + "'></select> (rank)"
                    
                    var colanutsel = document.getElementById("colanut" + index);
                    opt = document.createElement("option");
                    colanutsel.add(opt);
                    opt.text = "None";
                    opt.value = "0";
                    colanutsel.linkId = "Cola";

                    for (var i = 1; i < 3; i++) {
                        opt = document.createElement("option");
                        colanutsel.add(opt);
                        opt.text = "" + i;
                        opt.value = "" + i; // calculated with (1 + value)
                        opt.linkId = opt.value;
                    }
                    colanutsel.selectedIndex = 0;
                    colanutsel.onchange = function() {
                        recalculate(tbl, index, type);
                    };
                }

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Class freak" + info("classfreak");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='classfreak" + index + "'></select> (rank)"
                
                var classfreaksel = document.getElementById("classfreak" + index);
                opt = document.createElement("option");
                classfreaksel.add(opt);
                opt.text = "None";
                opt.value = "0";
                classfreaksel.linkId = "ClassFreak";

                for (var i = 1; i < 4; i++) {
                    opt = document.createElement("option");
                    classfreaksel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + i; // calculated with (1 + value)
                    opt.linkId = opt.value;
                }
                classfreaksel.selectedIndex = 0;
                classfreaksel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                createPerk(tbl, index, type, "Tenderizer", "tenderizer", "tenderizer", "Tenderizer", [5, 7, 10]);
                createPerk(tbl, index, type, "Better Criticals", "bettercrits", "bettercrits", "BetterCrits", [20, 30, 40]);

                if (type === "Ranged") {
                    createPerk(tbl, index, type, "Quick Hands", "quickhands", "quickhands", "QuickHands", [6, 12, 18]);
                    if (weap.category === "Rifle") {
                        createPerk(tbl, index, type, "Ground Pounder", "groundpounder", "groundpounder", "GroundPounder", [10, 20, 30]);
                    }
                    if (weap.category.includes("Heavy")) {
                        createPerk(tbl, index, type, "Lock and Load", "lockandload", "lockandload", "LockAndLoad", [ 10, 20, 30]);
                        if (weap.kind === "laser") {
                            createPerk(tbl, index, type, "Power User", "poweruser", "poweruser", "PowerUser", [ 30, 60, 100]);
                        }
                    }
                    if (weap.category.includes("Shotgun")) {
                        createPerk(tbl, index, type, "Scattershot", "scattershot", "scattershot", "ScatterShot", [ 10, 20, 30]);
                    }
                }
            }

            function createPerk(tbl, index, type, title, infoId, id, linkId, values) {
                var row = tbl.insertRow(tbl.rows.length);
                var cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;" + title + info(infoId);
                var cell2 = row.insertCell(1);

                cell2.innerHTML = "<select id='" + id + index + "'></select> (rank)"

                var sel = document.getElementById(id + index);
                opt = document.createElement("option");
                sel.add(opt);
                opt.text = "None";
                opt.value = "0";
                sel.linkId = linkId;

                for (var i = 1; i < 4; i++) {
                    opt = document.createElement("option");
                    sel.add(opt);
                    opt.text = "" + i;
                    opt.value = "" + values[i - 1];
                    opt.linkId = opt.value;
                }
                sel.selectedIndex = 0;
                sel.onchange = function() {
                    recalculate(tbl, index, type);
                };
            }

            function createYesNo(tbl, index, type, title, infoId, id, linkId) {
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                if (info !== undefined) {
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;" + title + info(infoId);
                } else {
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;" + title;
                }
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<input type='radio' id='" + id + index + "_yes' name='" + id + index + "' value='1'><label for='" + id + index + "_yes'> Yes</label>&nbsp;&nbsp;&nbsp;"
                    + "<input type='radio' id='" + id + index + "_no' name='" + id + index + "' value='0' checked='checked'><label for='" + id + index + "_no'> No</label>";

                document.getElementById(id + index + "_yes").onchange = function() {
                    recalculate(tbl, index, type);
                };
                document.getElementById(id + index + "_yes").linkId = linkId;
                document.getElementById(id + index + "_no").onchange = function() {
                    recalculate(tbl, index, type);
                };

            }

            function createMutations(tbl, index, type) {
                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                var weap = allWeapons.get(type)[weapIdx];

                var row = tbl.insertRow(tbl.rows.length);
                var cell1 = row.insertCell(0);
                cell1.innerText = "Mutations";
                var cell2 = row.insertCell(1);

                createYesNo(tbl, index, type, "Adrenal reaction", "adrenalreaction", "adrenalreaction", "Adrenal");

                if (type === "Melee") {
                    createYesNo(tbl, index, type, "Twisted Muscles", "twistedmuscles", "twistedmuscles", "Twisted");

                    if (weap.category === "Unarmed") {
                        createYesNo(tbl, index, type, "Talons", "talons", "talons", "Talons");
                    }
                }

                createYesNo(tbl, index, type, "Grounded", "grounded", "grounded", "Grounded");
                createYesNo(tbl, index, type, "Eagle Eyes", "eagleeyes", "eagleeyes", "EagleEyes");

                if (type === "Ranged") {
                    createYesNo(tbl, index, type, "Speed Demon", "speeddemon", "speeddemon", "SpeedDemon");
                }
                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Food-related" + info("foodmutation");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<select id='foodmutation" + index + "'></select>"

                    var sel = document.getElementById("foodmutation" + index);
                    sel.linkId = "FoodMutation";
                    opt = document.createElement("option");
                    sel.add(opt);
                    opt.text = "None";
                    opt = document.createElement("option");
                    sel.add(opt);
                    opt.text = "Carnivore";
                    opt.value = "carnivore";
                    opt.linkId = "C";
                    opt = document.createElement("option");
                    sel.add(opt);
                    opt.text = "Herbivore";
                    opt.value = "herbivore";
                    opt.linkId = "H";

                    sel.selectedIndex = 0;
                    sel.onchange = function() {
                        recalculate(tbl, index, type);
                    };


                createYesNo(tbl, index, type, "Any other mutation", "mutation", "mutation", "Mutation");
                row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mutation count" + info("mutationcount");
                    cell2 = row.insertCell(1);
                    cell2.innerHTML = "<input type='number' id='mutationcount" + index + "' value='0' maxlength='3' style='width: 3em;' min='0' max='22'>";
                    var mutationcountsel = document.getElementById("mutationcount" + index );
                    mutationcountsel.oninput = function() {
                        recalculate(tbl, index, type);
                    };
                    mutationcountsel.linkId = "Mutationcount";
                    mutationcountsel.linkDefault = "0";
            }

            function includesAny(a, b) {
                var list = b.split(",");
                for (var c of list) {
                    if (a.includes(c)) {
                        return true;
                    }
                }
                return false;
            }

            function buffFilter(buff, weap, type) {
                if (buff.mode.includes(type)) {
                    if (buff.except !== undefined && includesAny(buff.except, weap.category)) {
                        return false;
                    }
                    if (buff.only !== undefined && !includesAny(buff.only, weap.category)) {
                        return false;
                    }
                    if (buff.weapon !== undefined && !buff.weapon.includes(weap.name)) {
                        return false;
                    }
                    if (buff.kind !== undefined && weap.kind !== undefined && !buff.kind.includes(weap.kind)) {
                        return false;
                    }
                    if (buff.excludeWeapon !== undefined && buff.excludeWeapon.includes(weap.name)) {
                        return false;
                    }
                    return true;
                }
                return false;
            }

            function foodExclusion(foodCb, foodEntry, allFood) {
                if (foodCb.checked) {
                    for (var af of allFood) {
                        if (af.checkbox != foodCb) {
                            if (af.foodEntry.exclude === foodEntry.exclude) {
                                af.checkbox.checked = false;
                            }
                        }
                    }
                }
            }

            function createOther(tbl, index, type) {
                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                var weap = allWeapons.get(type)[weapIdx];

                var row = tbl.insertRow(tbl.rows.length);
                var cell1 = row.insertCell(0);
                cell1.innerText = "Consumables";
                var cell2 = row.insertCell(1);

                // food
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Food" + info("food");
                cell2 = row.insertCell(1);
                var foodDiv = document.createElement("div");
                cell2.appendChild(foodDiv);
                foodDiv.style.width = "100%";
                foodDiv.style.height = "60px";
                foodDiv.style.overflowY = "auto";
                foodDiv.style.border = "1px solid #E0E0E0";
                foodDiv.style.resize = "vertical";

                var fidx = 0;
                let foodList = [];
                for (let f of food) {
                    if (!f.mode.includes(type)) {
                        continue;
                    }
                    if (fidx > 0) {
                        foodDiv.appendChild(document.createElement("br"));
                    }
                    let fcheck = document.createElement("input");
                    foodDiv.appendChild(fcheck);
                    fcheck.type = "checkbox";
                    fcheck.id = "Food_" + index + "_" + f.id;
                    fcheck.linkId = f.id;

                    var ftxt = document.createElement("label");
                    foodDiv.appendChild(ftxt);
                    ftxt.htmlFor = fcheck.id;
                    ftxt.innerText = f.desc;
                    ftxt.dataRef = f;
                    ftxt.id = "Label_" + fcheck.id;
                    fidx++;

                    foodList.push({ checkbox: fcheck, foodEntry: f });

                    fcheck.onchange = evt => {
                        foodExclusion(fcheck, f, foodList);
                        recalculate(tbl, index, type);
                    };
                }

                // chems
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Chem" + info("chems");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='chem" + index + "'></select>"
                var chemsel = document.getElementById("chem" + index);
                opt = document.createElement("option");
                chemsel.add(opt);
                opt.text = "None";
                opt.value = "";
                chemsel.linkId = "Chem";

                for (var chm of chems) {
                    if (chm.mode.includes(type)) {
                        opt = document.createElement("option");
                        chemsel.add(opt);
                        opt.text = chm.desc;
                        opt.value = chm.id;
                        opt.linkId = linkIdFor(chm, chm.id);
                        opt.dataRef = chm;
                    }
                }
                chemsel.selectedIndex = 0;
                chemsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                // alcohol
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Alcohol" + info("alcohols");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='alcohol" + index + "'></select>"
                var alcoholsel = document.getElementById("alcohol" + index);
                opt = document.createElement("option");
                alcoholsel.add(opt);
                opt.text = "None";
                opt.value = "";
                alcoholsel.linkId = "Alcohol";

                for (var alc of alcohols) {
                    if (buffFilter(alc, weap, type)) {
                        opt = document.createElement("option");
                        alcoholsel.add(opt);
                        opt.text = alc.desc;
                        opt.value = alc.id;
                        opt.linkId = linkIdFor(alc, alc.id);
                        opt.dataRef = alc;
                    }
                }
                alcoholsel.selectedIndex = 0;
                alcoholsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                // bobbleheads
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Bobblehead" + info("bobblehead");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='bobblehead" + index + "'></select>"
                var bobbleheadsel = document.getElementById("bobblehead" + index);
                opt = document.createElement("option");
                bobbleheadsel.add(opt);
                opt.text = "None";
                opt.value = "";
                bobbleheadsel.linkId = "Bobble";

                for (var bh of bobbleheads) {
                    if (buffFilter(bh, weap, type)) {
                        opt = document.createElement("option");
                        bobbleheadsel.add(opt);
                        opt.text = bh.desc;
                        opt.value = bh.id;
                        opt.linkId = linkIdFor(bh, bh.id);
                        opt.dataRef = bh;
                    }
                }
                bobbleheadsel.selectedIndex = 0;
                bobbleheadsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                // magazines
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Magazine" + info("magazine");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='magazine" + index + "'></select>"
                var magazinesel = document.getElementById("magazine" + index);
                opt = document.createElement("option");
                magazinesel.add(opt);
                opt.text = "None";
                opt.value = "";
                magazinesel.linkId = "Magazine";

                for (var mag of magazines) {
                    if (buffFilter(mag, weap, type)) {
                        opt = document.createElement("option");
                        magazinesel.add(opt);
                        opt.text = mag.desc;
                        opt.value = mag.id;
                        opt.linkId = linkIdFor(mag, mag.id);
                        opt.dataRef = mag;
                    }
                }
                magazinesel.selectedIndex = 0;
                magazinesel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                // queen of the hunt bonus
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Queen of the hunt" + info("queenhunt");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='queenhunt" + index + "'></select>"
                var queenhuntsel = document.getElementById("queenhunt" + index);
                opt = document.createElement("option");
                queenhuntsel.add(opt);
                opt.text = "None";
                opt.value = "";
                queenhuntsel.linkId = "Queenhunt";

                for (var qh of queenhunt) {
                    if (qh.mode.includes(type)) {
                        opt = document.createElement("option");
                        queenhuntsel.add(opt);
                        opt.text = qh.desc;
                        opt.value = qh.id;
                        opt.linkId = linkIdFor(qh, qh.id);
                    }
                }
                queenhuntsel.selectedIndex = 0;
                queenhuntsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                // big game hunter bonus
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Big game hunter" + info("biggamehunt");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='biggamehunt" + index + "'></select>"
                var biggamehuntsel = document.getElementById("biggamehunt" + index);
                opt = document.createElement("option");
                biggamehuntsel.add(opt);
                opt.text = "None";
                opt.value = "";
                biggamehuntsel.linkId = "Biggamehunt";

                for (var qh of biggamehunter) {
                    if (qh.mode.includes(type)) {
                        opt = document.createElement("option");
                        biggamehuntsel.add(opt);
                        opt.text = qh.desc;
                        opt.value = qh.id;
                        opt.linkId = linkIdFor(qh, qh.id);
                    }
                }
                biggamehuntsel.selectedIndex = 0;
                biggamehuntsel.onchange = function() {
                    recalculate(tbl, index, type);
                };

                var row = tbl.insertRow(tbl.rows.length);
                var cell1 = row.insertCell(0);
                cell1.innerText = "Boosts";
                var cell2 = row.insertCell(1);

                // other damage boost
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Damage" + info("buff");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<input type='number' id='otherboost" + index + "' value='0' maxlength='6' style='width: 5em;' min='-1000' max='1000'> %";
                var otherboostsel = document.getElementById("otherboost" + index );
                otherboostsel.oninput = function() {
                    recalculate(tbl, index, type);
                };
                otherboostsel.linkId = "Other";
                otherboostsel.linkDefault = "0";

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Hit speed" + info("hitspeed");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<input type='number' id='speedboost" + index + "' value='0' maxlength='6' style='width: 5em;' min='-1000' max='1000'> %";
                var speedboostsel = document.getElementById("speedboost" + index );
                speedboostsel.oninput = function() {
                    recalculate(tbl, index, type);
                };
                speedboostsel.linkId = "Speed";
                speedboostsel.linkDefault = "0";

                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;Criticals" + info("critboost");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<input type='number' id='critboost" + index + "' value='0' maxlength='6' style='width: 5em;' min='-1000' max='1000'> %&nbsp;&nbsp;&nbsp;&nbsp;<span id='critrate" + index + "'></span>";
                var critboostsel = document.getElementById("critboost" + index );
                critboostsel.oninput = function() {
                    recalculate(tbl, index, type);
                };
                critboostsel.linkId = "CritBoost";
                critboostsel.linkDefault = "0";

                // calculation mode
                row = tbl.insertRow(tbl.rows.length);
                cell1 = row.insertCell(0);
                cell1.innerHTML = "Calculation mode" + info("buffcalcmode");
                cell2 = row.insertCell(1);
                cell2.innerHTML = "<select id='calcmode" + index + "'></select>"
                var calcmodesel = document.getElementById("calcmode" + index);
                calcmodesel.linkId = "CalcMode";
                calcmodesel.linkDefault = "P22";

                opt = document.createElement("option");
                opt.text = "Original";
                opt.value = "P21";
                opt.linkId = "P21";
                calcmodesel.add(opt);

                opt = document.createElement("option");
                opt.text = "One Wasteland";
                opt.value = "P22";
                opt.linkId = "P22";
                calcmodesel.add(opt);

                opt = document.createElement("option");
                opt.text = "Patch 27";
                opt.value = "P27A";
                opt.linkId = "P27A";
                calcmodesel.add(opt);

                opt = document.createElement("option");
                opt.text = "Patch 28";
                opt.value = "P27"; // I know, the patch ids are messed up
                opt.linkId = "P27";
                calcmodesel.add(opt);

                opt = document.createElement("option");
                opt.text = "Patch 33";
                opt.value = "P33";
                opt.linkId = "P33";
                calcmodesel.add(opt);

                opt = document.createElement("option");
                opt.text = "Patch 34";
                opt.value = "P34";
                opt.linkId = "P34";
                opt.selected = true;
                calcmodesel.add(opt);

                opt = document.createElement("option");
                opt.text = "Future";
                opt.value = "P23";
                opt.linkId = "P23";
                calcmodesel.add(opt);

                calcmodesel.onchange = function() {
                    updateWithPatchOverrides(calcmodesel, index);
                    recalculate(tbl, index, type);
                };
                updateWithPatchOverrides(calcmodesel, index);
            }

            function updateWithPatchOverrides(modeSel, index) {
                var calcMode = valueOf(modeSel);
                var sels = document.getElementsByTagName("select");
                for (let sel of sels) {
                    if (sel.id.endsWith("" + index)) {
                        for (let opt of sel.options) {
                            if (opt.dataRef != null) {
                                opt.text = withOverride(opt.dataRef, calcMode).desc;
                            }
                        }
                    }
                }
                var inps = document.getElementsByTagName("label")
                for (let inp of inps) {
                    if (inp.id.includes("_" + index)) {
                        if (inp.dataRef != null) {
                            inp.innerText = withOverride(inp.dataRef, calcMode).desc;
                        }
                    }
                }

                var betterCritsSel = document.getElementById("bettercrits" + index);
                if (calcMode >= "P34") {
                    betterCritsSel.options[1].value = "50";
                    betterCritsSel.options[2].value = "75";
                    betterCritsSel.options[3].value = "100";
                } else {
                    betterCritsSel.options[1].value = "20";
                    betterCritsSel.options[2].value = "30";
                    betterCritsSel.options[3].value = "40";
                }
            }

            function getAlcoholAndColaBuff(partyMultiplier, colanutMultiplier, buff) {
                if (buff.type === "alcohol" && !buff.nopartyboy) {
                    if (partyMultiplier != 0 && (colanutMultiplier == 0 || !buff.cola)) {
                        return partyMultiplier + 1;
                    } else
                    if (partyMultiplier == 0 && buff.cola && colanutMultiplier != 0) {
                        return colanutMultiplier + 1;
                    } else
                    if (partyMultiplier != 0 && buff.cola && colanutMultiplier != 0) {
                        return 2 + partyMultiplier + colanutMultiplier;
                    }
                }
                return 1;
            }

            function getJuggernautPercent(hp) {
                var perc = 0;
                if (hp >= 5 && hp <= 10) {
                    perc = 1;
                } else if (hp > 10 && hp <= 15) {
                    perc = 3;
                } else if (hp > 15 && hp <= 20) {
                    perc = 4;
                } else if (hp > 20 && hp <= 25) {
                    perc = 6;
                } else if (hp > 25 && hp <= 30) {
                    perc = 7;
                } else if (hp > 30 && hp <= 35) {
                    perc = 8;
                } else if (hp > 35 && hp <= 40) {
                    perc = 9;
                } else if (hp > 40 && hp <= 45) {
                    perc = 10;
                } else if (hp > 45 && hp <= 50) {
                    perc = 12;
                } else if (hp > 50 && hp <= 55) {
                    perc = 13;
                } else if (hp > 55 && hp <= 60) {
                    perc = 15;
                } else if (hp > 60 && hp <= 65) {
                    perc = 16;
                } else if (hp > 65 && hp <= 70) {
                    perc = 17;
                } else if (hp > 70 && hp <= 75) {
                    perc = 18;
                } else if (hp > 75 && hp <= 80) {
                    perc = 19;
                } else if (hp > 80 && hp <= 85) {
                    perc = 21;
                } else if (hp > 85 && hp <= 90) {
                    perc = 22;
                } else if (hp > 90 && hp <= 95) {
                    perc = 23;
                } else if (hp > 95) {
                    perc = 25;
                }
                return perc;
            }

            function withOverride(entry, patch) {
                if (entry.patchOverride) {
                    var newEntry = JSON.parse(JSON.stringify(entry));

                    var patches = [];

                    var chain = patchChain[patch];
                    if (chain !== undefined) {
                        chain.forEach(v => patches.push(v));
                    }
                    patches.push(patch);

                    for (var pv of patches) {
                        var po = entry.patchOverride[pv];
                        if (po !== undefined) {
                            for (var i in po) {
                                newEntry[i] = po[i];
                            }
                        }
                    }
                    return newEntry;
                }
                return entry;
            }

            function recalculate(tbl, index, type) {
                var weapIdx = document.getElementById("weapon" + index).selectedIndex;
                if (weapIdx < 0) {
                    return;
                }
                var weap = allWeapons.get(type)[weapIdx];

                var cell2 = document.getElementById("totaldamage" + index);
                var cell4 = document.getElementById("totalarmorignore" + index);
                var cell6 = document.getElementById("totalspeed" + index);
                var cell8 = document.getElementById("totaldps" + index);
                var cell10 = document.getElementById("clipsizereloadtime" + index);
                var cell12 = document.getElementById("reloaddps" + index);

                var isReload = type === "Ranged" && weap.clipSize && weap.reloadTime;

                if (cell2 == null) {
                    var row = tbl.insertRow(tbl.rows.length);

                    var cell1 = row.insertCell(0);
                    cell1.innerText = "Total damage";
                    cell1.style = "border-top: 1px solid black;";

                    cell2 = row.insertCell(1);
                    cell2.id = "totaldamage" + index;
                    cell2.style = "border-top: 1px solid black; font-weight: bold; font-size: 26px;";

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerText = "Total armor ignore";
                    //cell1.style = "border-top: 1px solid black;";

                    cell4 = row.insertCell(1);
                    cell4.id = "totalarmorignore" + index;
                    cell4.style = "font-weight: bold; font-size: 26px;";

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerText = "Speed (hits per second)";
                    //cell1.style = "border-top: 1px solid black;";

                    cell6 = row.insertCell(1);
                    cell6.id = "totalspeed" + index;
                    cell6.style = "font-weight: bold; font-size: 26px;";

                    row = tbl.insertRow(tbl.rows.length);
                    cell1 = row.insertCell(0);
                    cell1.innerText = "Total damage per second";
                    //cell1.style = "border-top: 1px solid black;";

                    cell8 = row.insertCell(1);
                    cell8.id = "totaldps" + index;
                    cell8.style = "font-weight: bold; font-size: 26px;";

                    if (isReload) {
                        row = tbl.insertRow(tbl.rows.length);
                        cell1 = row.insertCell(0);
                        cell1.innerText = "Clip Size & Reload Time";

                        cell10 = row.insertCell(1);
                        cell10.id = "clipsizereloadtime" + index;
                        cell10.style = "font-weight: bold; font-size: 26px;";

                        row = tbl.insertRow(tbl.rows.length);
                        cell1 = row.insertCell(0);
                        cell1.innerText = "DPS with reload";

                        cell12 = row.insertCell(1);
                        cell12.id = "reloaddps" + index;
                        cell12.style = "font-weight: bold; font-size: 26px;";
                    }
                }

                cell2.innerText = "";
                cell4.innerText = "";
                cell6.innerText = "";
                cell8.innerText = "";
                if (isReload) {
                    cell10.innerText = "";
                    cell12.innerText = "";
                }

                var levelIdx = document.getElementById("level" + index).selectedIndex;
                if (levelIdx < 0) {
                    return;
                }

                var baseDamage = weap.damage[levelIdx];
                var baseDamageEnergy = weap.damageEnergy !== undefined ? weap.damageEnergy[levelIdx] : 0;
                var baseDamageRadiation = weap.damageRadiation !== undefined ? weap.damageRadiation[levelIdx] : 0;
                var baseDamageFire = weap.damageFire !== undefined ? weap.damageFire[levelIdx] : 0;
                var baseDamageCold = weap.damageCold !== undefined ? weap.damageCold[levelIdx] : 0;
                var baseDamagePoison = weap.damagePosion !== undefined ? weap.damagePoison[levelIdx] : 0;

                var weaponBaseDamageBallistic = baseDamage;
                var weaponBaseDamageEnergy = baseDamageEnergy;
                var weaponBaseDamageRadiation = baseDamageRadiation;
                var weaponBaseDamageCold = baseDamageCold;
                var weaponBaseDamageFire = baseDamageFire;
                var weaponBaseDamagePoison = baseDamagePoison;

                var strengthFactor = 0.05;
                var repairFactor = 1;
                var speed = 1;

                var totalDamageAdditive = [];
                var totalDamageMultiply = [];

                var totalDamageEnergyAdditive = [];
                var totalDamageEnergyMultiply = [];

                var totalDamageFireAdditive = [];
                var totalDamageColdAdditive = [];
                var totalDamagePoisonAdditive = [];
                var deferredDamagePoisonAdditive = [];

                var totalDamageRadiationAdditive = [];
                var totalDamageRadiationMultiply = [];

                var totalArmorIgnoreArray = [];
                var totalArmorAddDR = [];
                var totalSpeedMultiply = [];
                var totalSpeedAdditive = [];

                var totalDamageDebuff = [];
                var totalDamageEnergyDebuff = [];

                var enemyDamageResistanceBuff = 0;

                var effects = allEffects.get(type);

                if (weap.speed !== undefined) {
                    speed = weap.speed;
                }

                var clipSizeMult = 0;
                var clipSizeAdd = 0;
                var clipSizeSet = 0;
                var reloadTime = weap.reloadTime ? weap.reloadTime : 0;
                var reloadTimeMult = [];
                var reloadTimeAdd = [];

                var meleeFactor = 0;
                if (weap.category == "Unarmed") {
                    strengthFactor = 0.1;
                    meleeFactor = 0.05;
                }
                if (weap.strengthFactor !== undefined) {
                    strengthFactor = weap.strengthFactor;
                }
                if (weap.meleeFactor !== undefined) {
                    meleeFactor = weap.meleeFactor;
                }

                var calcMode = valueOf(document.getElementById("calcmode" + index));
                calcModes[index] = calcMode;
                var isCalcAdd = calcMode !== "P21";

                // prepare selectable buffs
                var buffOpts = [];
                for (var f of food) {
                    var foodsel = document.getElementById("Food_" + index + "_" + f.id);
                    if (foodsel != null && foodsel.checked) {
                        buffOpts.push(f);
                    }
                }
                var chemsel = document.getElementById("chem" + index);
                if (chemsel.selectedIndex > 0) {
                    buffOpts.push(buffMap.get(valueOf(chemsel)));
                }
                var alcsel = document.getElementById("alcohol" + index);
                if (alcsel.selectedIndex > 0) {
                    buffOpts.push(buffMap.get(valueOf(alcsel)));
                }
                var explosiveBobbleheadPercent = 0;
                var bhsel = document.getElementById("bobblehead" + index);
                if (bhsel.selectedIndex > 0) {
                    var bhItem = buffMap.get(valueOf(bhsel));
                    buffOpts.push(bhItem);
                    if (bhItem.explosiveDamage !== undefined) {
                        explosiveBobbleheadPercent = bhItem.explosiveDamage;
                    }
                }
                var magsel = document.getElementById("magazine" + index);
                if (magsel.selectedIndex > 0) {
                    buffOpts.push(buffMap.get(valueOf(magsel)));
                }
                var qhsel = document.getElementById("queenhunt" + index);
                if (qhsel.selectedIndex > 0) {
                    buffOpts.push(buffMap.get(valueOf(qhsel)));
                }
                var bghsel = document.getElementById("biggamehunt" + index);
                if (bghsel.selectedIndex > 0) {
                    buffOpts.push(buffMap.get(valueOf(bghsel)));
                }

                // party boy/girl multiplier for alcohols
                var partyMultiplier = 0;
                var partypersonsel = document.getElementById("partyperson" + index);
                if (partypersonsel.selectedIndex > 0) {
                    partyMultiplier = parseInt(valueOf(partypersonsel));
                }

                // cola nut
                var colanutMultiplier = 0;
                var colanutsel = document.getElementById("colanut" + index);
                if (colanutsel != null && colanutsel.selectedIndex > 0) {
                    colanutMultiplier = parseInt(valueOf(colanutsel));
                }

                // enemy type selected
                var enemyTypeSel = document.getElementById("enemytype" + index);
                var enemytypes = valueOf(enemyTypeSel).split(",");
                
                enemySelection[index] = null;
                enemySelectionName[index] = null;
                enemySelectionLevel[index] = null;
                if (enemyTypeSel.selectedIndex > 0) {
                    var opt = enemyTypeSel.options[enemyTypeSel.selectedIndex];
                    if (opt.resistances !== undefined) {
                        enemySelection[index] = opt.resistances;
                        enemySelectionName[index] = opt.text;
                        enemySelectionLevel[index] = parseInt(document.getElementById("enemylevel" + index).value);
                    }
                }


                // team mode
                var isTeam = document.getElementById("team" + index + "_yes").checked;
                var isStrangeInNumbers = isTeam && document.getElementById("strangeinnumbers" + index + "_yes").checked;
                
                // gauss weapon is charged
                var charged = document.getElementById("charge" + index + "_yes");
                var isCharged = charged != null && charged.checked;

                if (isCharged && weap.chargetime != undefined) {
                    speed = weap.chargetime;
                }

                var classFreak = valueOf(document.getElementById("classfreak" + index));
                var critMultiplier = 200;
                // some crit modulations are multiplicative
                var critMultiplierMultiply = [];
                var isCrit = document.getElementById("crit" + index + "_yes").checked;

                var isEagleEyes = document.getElementById("eagleeyes" + index + "_yes").checked;
                var foodMutation = valueOf(document.getElementById("foodmutation" + index));

                // adjust for melee strength
                // ~~~~~~~~~~~~~~~~~~~~~~~~~
                if (type === "Melee") {
                    var strength = document.getElementById("strength" + index);
                    var strengthPoints = 0;
                    var strengthPointsBase = 0;
                    if (strength != null) {
                        var sp = parseFloat(strength.value);
                        strengthPoints += sp;
                        strengthPointsBase += sp;
                    }
                    // chem adjust
                    for (var buff of buffOpts) {
                        buff = withOverride(buff, calcMode);

                        if (buff.strength !== undefined) {

                            var buffMultiply = getAlcoholAndColaBuff(partyMultiplier, colanutMultiplier, buff);

                            strengthPoints += buff.strength * buffMultiply;
                        }
                    }

                    effects.forEach(function(effect, idx) {
                        var effectSel = document.getElementById("effs_" + index + "_" + idx);
                        if (effectSel != null && effectSel.selectedIndex > 0) {
                            var effInfo = effects[idx][effectSel.selectedIndex - 1];
                            if (effInfo.name === "Strength") {
                                strengthPoints++;
                            }
                        }
                    });

                    if (isEagleEyes) {
                        if (classFreak == "1") {
                            strengthPoints -= 3;
                        } else 
                        if (classFreak == "2") {
                            strengthPoints -= 2;
                        } else
                        if (classFreak == "3") {
                            strengthPoints -= 1;
                        } else {
                            strengthPoints -= 4;
                        }
                    }

                    strengthPoints = Math.max(1, strengthPoints);

                    var strLabel = document.getElementById("strengthactual" + index);
                    if (strengthPoints != strengthPointsBase) {
                        strLabel.innerHTML = "<b>(" + strengthPoints + ")</b>";
                    } else {
                        strLabel.innerHTML = "";
                    }

                    if (isCalcAdd) {
                        var strBonus = 100 * (strengthPoints * strengthFactor + meleeFactor);
                        totalDamageMultiply.push(strBonus);
                        //totalDamageEnergyMultiply.push(strBonus);
                    } else {
                        baseDamage *= (1 + strengthPoints * strengthFactor) * repairFactor;
                    }
                }

                if (isEagleEyes) {
                    var eagleEyesCritBase = 25;
                    if (calcMode >= "P34") {
                        eagleEyesCritBase = 60
                    }
                    if (isStrangeInNumbers && isTeam) {
                        critMultiplier += eagleEyesCritBase * 1.25;
                    } else {
                        critMultiplier += eagleEyesCritBase;
                    }
                }

                // add damage types from mods
                weap.mods.forEach(function(mod, idx) {
                    var modTypeIdx = document.getElementById("mods_" + index + "_" + idx).selectedIndex;
                    
                    if (modTypeIdx >= 0) {
                        var modInfo = mod.options[modTypeIdx];

                        modInfo = withOverride(modInfo, calcMode);

                        if (modInfo.addDamageBallisticLeveled !== undefined) {
                            var amount = modInfo.addDamageBallisticLeveled[levelIdx];
                            weaponBaseDamageBallistic += amount;
                            baseDamage += amount;
                        }
                        if (modInfo.removeBallisticDamage) {
                            baseDamage = 0;
                        }
                        if (modInfo.addDamageEnergyLeveled !== undefined) {
                            var amount = modInfo.addDamageEnergyLeveled[levelIdx];
                            
                            baseDamageEnergy += amount;
                            weaponBaseDamageEnergy += amount;
                        }
                        if (modInfo.addDamageEnergyPercentLeveled !== undefined) {
                            var amount = (1 + modInfo.addDamageEnergyPercentLeveled[levelIdx] / 100.0) * baseDamage;
                            baseDamageEnergy += amount;
                            weaponBaseDamageEnergy += amount;
                        }
                        if (modInfo.addDamageRadiationLeveled !== undefined) {
                            var amount = modInfo.addDamageRadiationLeveled[levelIdx];
                            baseDamageRadiation += amount;
                            weaponBaseDamageRadiation += amount;
                        }
                        if (modInfo.addDamageFireLeveled !== undefined) {
                            var amount = modInfo.addDamageFireLeveled[levelIdx];
                            baseDamageFire += amount;
                            weaponBaseDamageFire += amount;
                        }
                        if (modInfo.addDamageColdLeveled !== undefined) {
                            var amount = modInfo.addDamageColdLeveled[levelIdx];
                            baseDamageCold += amount;
                            weaponBaseDamageCold += amount;
                        }
                        if (modInfo.addDamagePoisonLeveled !== undefined) {
                            var amount = modInfo.addDamagePoisonLeveled[levelIdx];
                            baseDamagePoison += amount;
                            weaponBaseDamagePoison += amount;
                        }
                        if (modInfo.versus) {
                            for (var i = 0; i < enemytypes.length; i++) {
                                if (modInfo.versus.indexOf(enemytypes[i]) >= 0) {
                                    if (modInfo.versusAddDamageEnergyLeveled) {
                                        var amount = modInfo.versusAddDamageEnergyLeveled[levelIdx];
                                        baseDamageEnergy += amount;
                                        weaponBaseDamageEnergy += amount;
                                        break;
                                    }
                                }
                            }
                        }
                   }
                });

                // uncharged shots have default speed but 50% less damage
                if (weap.chargetime !== undefined) {
                    if (!isCharged) {
                        baseDamage *= 0.5;
                        baseDamageEnergy *= 0.5;
                        baseDamageRadiation *= 0.5;
                    }
                }

                // apply bloody mess, adrenaline and adrenal reaction
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

                var additiveBoosts = 0;
                var additiveEnergyBoosts = 0;
                var additiveFireBoosts = 0;
                var additiveColdBoosts = 0;
                var additivePoisonBoosts = 0;
                var bloodyBoost = 1.0;

                var bloodymess = document.getElementById("bloodymess" + index);
                if (bloodymess != null && bloodymess.selectedIndex > 0) {
                    var vbloodyMess = parseFloat(valueOf(bloodymess)) / 100;
                    bloodyBoost += vbloodyMess;
                    additiveBoosts += baseDamage * vbloodyMess;
                    additiveEnergyBoosts += baseDamageEnergy * vbloodyMess;
                    additiveFireBoosts += baseDamageFire * vbloodyMess;
                    additiveColdBoosts += baseDamageCold * vbloodyMess;
                    additivePoisonBoosts += baseDamagePoison * vbloodyMess;
                }

                var adrenaline = document.getElementById("adrenaline" + index);
                if (adrenaline != null && adrenaline.selectedIndex > 0) {
                    var kills = document.getElementById("kills" + index);
                    var v = Math.min(6, parseFloat(kills.value));
                    if (v > 0) {
                        var vadrenaline = parseFloat(valueOf(adrenaline) * v / 6.0) / 100.0;
                        additiveBoosts += baseDamage * vadrenaline;
                        additiveEnergyBoosts += baseDamageEnergy * vadrenaline;
                        additiveFireBoosts += baseDamageFire * vadrenaline;
                        additiveColdBoosts += baseDamageCold * vadrenaline;
                        additivePoisonBoosts += baseDamagePoison * vadrenaline;

                        bloodyBoost += vadrenaline;
                    }
                }

                if (document.getElementById("adrenalreaction" + index + "_yes").checked) {
                    var health = parseFloat(document.getElementById("playerhealth" + index).value);
                    if (health <= 90) {
                        var perc = 0;
                        var superVersion = isStrangeInNumbers;
                        if (health <= 20) {
                            perc = superVersion ? 63 : 50;
                        } else 
                        if (health <= 30) {
                            perc = superVersion ? 55 : 44;
                        } else 
                        if (health <= 40) {
                            perc = superVersion ? 48 : 38;
                        } else 
                        if (health <= 50) {
                            perc = superVersion ? 39 : 31;
                        } else 
                        if (health <= 60) {
                            perc = superVersion ? 31 : 25;
                        } else 
                        if (health <= 70) {
                            perc = superVersion ? 24 : 19;
                        } else 
                        if (health <= 80) {
                            perc = superVersion ? 16 : 13;
                        } else {
                            perc = superVersion ? 8 : 6;
                        }
                        
                        additiveBoosts += baseDamage * perc / 100.0;
                        additiveEnergyBoosts += baseDamageEnergy * perc / 100.0;
                        additiveFireBoosts += baseDamageFire * perc / 100.0;
                        additiveColdBoosts += baseDamageCold * perc / 100.0;
                        additivePoisonBoosts += baseDamagePoison * perc / 100.0;
                    }
                }
                baseDamage += additiveBoosts;
                baseDamageEnergy += additiveEnergyBoosts;
                baseDamageFire += additiveFireBoosts;
                baseDamageCold += additiveColdBoosts;
                baseDamagePoison += additivePoisonBoosts;

                var isSilenced = weap.silencer;
                var isScoped = false;

                var versusMultiplier = 0;
                var isAutomatic = weap.automatic !== undefined && weap.automatic;

                // apply mod effects
                // ~~~~~~~~~~~~~~~~~
                weap.mods.forEach(function(mod, idx) {
                    var modTypeIdx = document.getElementById("mods_" + index + "_" + idx).selectedIndex;
                    
                    if (modTypeIdx >= 0) {
                        var modInfo = mod.options[modTypeIdx];

                        modInfo = withOverride(modInfo, calcMode);

                        if (modInfo.damageMultPercent !== undefined) {
                            if (modInfo.debuffViaMultiply) {
                                totalDamageDebuff.push(modInfo.damageMultPercent);
                                totalDamageEnergyDebuff.push(modInfo.damageMultPercent);
                            } else {
                                totalDamageMultiply.push(modInfo.damageMultPercent);
                                totalDamageEnergyMultiply.push(modInfo.damageMultPercent);
                            }
                        }
                        if (modInfo.damageBallisticMultPercent !== undefined) {
                            if (modInfo.debuffViaMultiply) {
                                totalDamageDebuff.push(modInfo.damageBallisticMultPercent);
                            } else {
                                totalDamageMultiply.push(modInfo.damageBallisticMultPercent);
                            }
                        }

                        if (modInfo.ignoreDRPercent !== undefined) {
                            totalArmorIgnoreArray.push(modInfo.ignoreDRPercent);
                        }
                        if (modInfo.silencer !== undefined && modInfo.silencer) {
                            isSilenced = true;
                        }
                        if (modInfo.scope !== undefined && modInfo.scope) {
                            isScoped = true;
                        }
                        if (modInfo.speedMultPercent !== undefined) {
                            totalSpeedMultiply.push(modInfo.speedMultPercent);
                        }
                        if (modInfo.speedAddPercent !== undefined) {
                            totalSpeedAdditive.push(modInfo.speedAddPercent);
                        }
                        if (modInfo.speedSet !== undefined) {
                            speed = modInfo.speedSet;
                        }
                        if (modInfo.versus !== undefined) {
                            for (var i = 0; i < enemytypes.length; i++) {
                                if (modInfo.versus.indexOf(enemytypes[i]) >= 0) {
                                    if (modInfo.versusAddPercent !== undefined) {
                                        versusMultiplier += modInfo.versusAddPercent;
                                        break;
                                    } else 
                                    if (modInfo.versusMultPercent !== undefined) {
                                        totalDamageMultiply.push(modInfo.versusMultPercent);
                                        totalDamageEnergyMultiply.push(modInfo.versusMultPercent);
                                        break;
                                    }
                                }
                            }
                        }
                        if (modInfo.addDamageExplosiveLeveled) {
                            var perc = 1;
                            var demolitionsel = document.getElementById("demolition" + index);
                            if (demolitionsel.selectedIndex > 0) {
                                perc *= 1 + parseFloat(valueOf(demolitionsel)) / 100.0
                            }
                            perc *= 1 + (explosiveBobbleheadPercent / 100.0);
                            var dmg = modInfo.addDamageExplosiveLeveled[levelIdx];
                            totalDamageAdditive.push(dmg * perc * bloodyBoost);
                        }
                        if (modInfo.criticalDamage !== undefined) {
                            critMultiplier += modInfo.criticalDamage;
                        }
                        if (modInfo.criticalDamageMultiply !== undefined) {
                            critMultiplierMultiply.push(modInfo.criticalDamageMultiply);
                        }
                        if (modInfo.reloadTimeMult) {
                            reloadTimeMult.push(modInfo.reloadTimeMult);
                        }
                        if (modInfo.clipSizeAdd) {
                            clipSizeAdd += modInfo.clipSizeAdd;
                        }
                        if (modInfo.clipSizeSet) {
                            clipSizeSet = modInfo.clipSizeSet;
                        }
                        if (modInfo.automatic || modInfo.name.toLowerCase().includes("automatic")) {
                            isAutomatic = true;
                        }
                        if (modInfo.addDamageBallisticLeveledAfter) {
                            totalDamageAdditive.push(modInfo.addDamageBallisticLeveledAfter[levelIdx]);
                        }
                    }
                });

                var legendaryTwoShot = false;
                var legendaryExplosive = 0;
                var legacyExplosive = false;
                var powerAttackBonus = 0;
                var pa = document.getElementById("powerattack" + index + "_yes");
                var isPowerAttack = pa && pa.checked;
                if (isPowerAttack) {
                    powerAttackBonus = 100;
                    totalSpeedMultiply.push(-50);
                }

                var lastShot = 0;

                // Apply unconditional effects
                // ~~~~~~~~~~~~~~~~~~~~~~~~~~~
                effects.forEach(function(effect, idx) {
                    var effectSel = document.getElementById("effs_" + index + "_" + idx);
                    if (effectSel != null && effectSel.selectedIndex > 0) {
                        let ename = effectSel.options[effectSel.selectedIndex].value;
                        let effectOfType = effects[idx];
                        var effInfoRaw = undefined;
                        effectOfType.forEach(e => {
                            if (e.name === ename) {
                                effInfoRaw = e;
                            }
                        });
                        var effInfo = withOverride(effInfoRaw, calcMode);
                        
                        if (effInfo.damageMultPercent !== undefined) {
                            var perc = effInfo.damageMultPercent;
                            if (type === "Ranged") {
                                if (effInfo.name.includes("Explosive")) {
                                    var demolitionsel = document.getElementById("demolition" + index);
                                    if (demolitionsel.selectedIndex > 0) {
                                        perc *= 1 + parseFloat(valueOf(demolitionsel)) / 100.0
                                    }
                                    perc *= 1 + (explosiveBobbleheadPercent / 100.0);
                                    // Explosive appears to be still multiplicative
                                    legendaryExplosive = perc;
                                    perc = 0;
                                    legacyExplosive = effInfo.name.includes("ExplosiveOld");
                                }
                                if (effInfo.name === "Aiming") {
                                    if (!document.getElementById("aiming" + index + "_yes").checked) {
                                        perc = 0;
                                    }
                                }
                                if (effInfo.name.includes("Two shot")) {
                                    // two shot appears to ignore the receiver modification
                                    totalDamageAdditive.push(Math.floor(baseDamage * perc / 100.0));
                                    totalDamageEnergyAdditive.push(Math.floor(baseDamageEnergy * perc / 100.0));
                                    totalDamageRadiationAdditive.push(Math.floor(baseDamageRadiation * perc / 100.0));
                                    totalDamageFireAdditive.push(Math.floor(baseDamageFire * perc / 100.0));
                                    totalDamageColdAdditive.push(Math.floor(baseDamageCold * perc / 100.0));
                                    totalDamagePoisonAdditive.push(Math.floor(baseDamagePoison * perc / 100.0));
                                    // do not add it as a flat boost
                                    perc = 0;
                                    legendaryTwoShot = true;
                                }
                            }
                            if (effInfo.name === "Nocturnal") {
                                if (!document.getElementById("nighttime" + index + "_yes").checked) {
                                    perc = 0;
                                }
                            }
                            if (effInfo.name === "Instigating") {
                                if (parseFloat(document.getElementById("enemyhealth" + index).value) < 100) {
                                    perc = 0;
                                }
                            }
                            if (effInfo.name === "Executioner's") {
                                if (parseFloat(document.getElementById("enemyhealth" + index).value) <= 40) {
                                    // Still multiplicative: https://nukacrypt.com/database/json/004F6AA6
                                    totalDamageDebuff.push(effInfo.damageMultPercent);
                                    totalDamageEnergyDebuff.push(effInfo.damageMultPercent);
                                }
                                perc = 0;
                            }
                            if (effInfo.name === "Bloodied") {
                                var health = parseFloat(document.getElementById("playerhealth" + index).value);
                                perc = Math.min(95, Math.floor((100 - health) / 5) * 5);
                            }
                            if (effInfo.name === "Mutant's") {
                                var muts = hasMutation(index);
                                if (muts == 0) {
                                    perc = 0;
                                } else {
                                    perc = Math.min(muts, effInfo.maxMutations) * effInfo.damageMultPercent;
                                }
                            }
                            // totalDamageAdditive.push(baseDamage * (perc / 100.0))
                            // effect damage does consider mods
                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                            //totalDamageAdditive.push(Math.floor(baseDamage * (perc / 100.0)));
                        }
                        if (effInfo.name === "Furious") {
                            var furioushits = document.getElementById("furioushits" + index);
                            var perc = 5 * Math.min(9, parseFloat(furioushits.value));
                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                        }
                        if (effInfo.name === "Junkie's") {
                            var junkiescount = document.getElementById("junkiescount" + index);
                            var perc = 10 * Math.min(5, parseFloat(junkiescount.value));
                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                        }
                        // Versus enemy effect
                        if (effInfo.versus !== undefined) {
                            for (var i = 0; i < enemytypes.length; i++) {
                                if (effInfo.versus.indexOf(enemytypes[i]) >= 0) {
                                    if (effInfo.versusAddPercent !== undefined) {
                                        versusMultiplier += effInfo.versusAddPercent;
                                        break;
                                    } else 
                                    if (effInfo.versusMultPercent !== undefined) {
                                        totalDamageMultiply.push(effInfo.versusMultPercent);
                                        totalDamageEnergyMultiply.push(effInfo.versusMultPercent);
                                        break;
                                    }
                                }
                            }
                        }

                        if (effInfo.ignoreDRPercent !== undefined) {
                            totalArmorIgnoreArray.push(effInfo.ignoreDRPercent);
                        }
                        if (effInfo.silencer !== undefined && effInfo.silencer) {
                            isSilenced = true;
                        }
                        if (effInfo.speedMultPercent !== undefined) {
                            totalSpeedMultiply.push(effInfo.speedMultPercent);
                        }
                        if (effInfo.speedAddPercent !== undefined) {
                            totalSpeedAdditive.push(effInfo.speedAddPercent);
                        }
                        if (effInfo.criticalDamage !== undefined) {
                            critMultiplier += effInfo.criticalDamage;
                        }                       
                        if (effInfo.reloadTimeMult) {
                            reloadTimeMult.push(effInfo.reloadTimeMult);
                        }
                        if (effInfo.clipSizeMult) {
                            clipSizeMult = effInfo.clipSizeMult;
                        }
                        if (effInfo.damageMultPercentPowerAttack) {
                            if (isPowerAttack) {
                                powerAttackBonus += effInfo.damageMultPercentPowerAttack;
                            }
                        }
                        if (effInfo.capsDamageMultPercent) {
                            var caps = parseInt(document.getElementById("caps" + index).value);
                            perc = Math.min(29000, caps) * effInfo.capsDamageMultPercent / 29000;
                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                        }
                        if (effInfo.feedDamageMultPercent) {
                            var feed = parseInt(document.getElementById("feed" + index).value);
                            perc = effInfo.feedDamageMultPercent * feed / 100;
                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                        }
                        if (effInfo.healthDamageMultPercent) {
                            var hp = parseInt(document.getElementById("playerhealth" + index).value);
                            
                            perc = getJuggernautPercent(hp);

                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                        }
                        if (effInfo.carryDamageMultPercent) {
                            var hp = parseInt(document.getElementById("carryweight" + index).value);
                            perc = effInfo.carryDamageMultPercent * Math.min(hp, 350) / 350;
                            totalDamageMultiply.push(perc);
                            totalDamageEnergyMultiply.push(perc);
                        }
                        if (effInfo.steadyDamageMultPercent) {
                            if (document.getElementById("steady" + index + "_yes").checked) {
                                perc = effInfo.steadyDamageMultPercent;
                                totalDamageMultiply.push(perc);
                                totalDamageEnergyMultiply.push(perc);
                            }
                        }
                        if (effInfo.lastDamageMultPercent) {
                            lastShot = effInfo.lastDamageMultPercent * effInfo.lastChance / 100;
                        }
                    }
                });

                // TSE duplicates the explosive effect
                if (legendaryExplosive > 0) {
                    var explosiveBonus = legendaryExplosive;
                    if (legendaryTwoShot) {
                        explosiveBonus *= 2;
                    }
                    totalDamageDebuff.push(explosiveBonus);
                    if (legacyExplosive) {
                        totalDamageEnergyDebuff.push(explosiveBonus);
                    }
                }

                var tankkiller = document.getElementById("tankkiller" + index);
                if (tankkiller != null && tankkiller.selectedIndex > 0) {
                    totalArmorIgnoreArray.push(parseFloat(valueOf(tankkiller)));
                }
                var bowbeforeme = document.getElementById("bowbeforeme" + index);
                if (bowbeforeme != null && bowbeforeme.selectedIndex > 0) {
                    totalArmorIgnoreArray.push(parseFloat(valueOf(bowbeforeme)));
                }

                var incisor = document.getElementById("incisor" + index);
                if (incisor != null && incisor.selectedIndex > 0) {
                    totalArmorIgnoreArray.push(parseFloat(valueOf(incisor)));
                }
                var weighted = document.getElementById("weighted" + index);
                if (weighted != null && weighted.selectedIndex > 0) {
                    var v = parseFloat(valueOf(weighted));
                    totalArmorIgnoreArray.push(v * 10);
                    totalArmorAddDR.push(-v * 5)
                }

                var martialartist = document.getElementById("martialartist" + index);
                if (martialartist != null && martialartist.selectedIndex > 0) {
                    totalSpeedMultiply.push(parseFloat(valueOf(martialartist)));
                }

                var stabilized = document.getElementById("stabilized" + index);
                if (stabilized != null && stabilized.selectedIndex > 0) {
                    totalArmorIgnoreArray.push(parseFloat(valueOf(stabilized)));
                }

                if (versusMultiplier > 0) {
                    totalDamageMultiply.push(versusMultiplier);
                    totalDamageEnergyMultiply.push(versusMultiplier);
                }

                var exterminator = document.getElementById("exterminator" + index);
                if (exterminator != null && exterminator.selectedIndex > 0) {
                    if (enemytypes.indexOf("Bug") >= 0 || enemytypes.indexOf("Mirelurk") >= 0) {
                        totalArmorIgnoreArray.push(parseFloat(valueOf(exterminator)));
                    }
                }

                var glowsight = document.getElementById("glowsight" + index);
                if (glowsight != null && glowsight.selectedIndex > 0) {
                    if (enemytypes.indexOf("Glowing") >= 0) {
                        totalDamageMultiply.push(parseFloat(valueOf(glowsight)));
                        totalDamageEnergyMultiply.push(parseFloat(valueOf(glowsight)));
                    }
                }

                var boost = document.getElementById("boost" + index);
                if (boost != null && boost.selectedIndex > 0) {
                    totalDamageMultiply.push(parseFloat(valueOf(boost)));
                    totalDamageEnergyMultiply.push(parseFloat(valueOf(boost)));
                }

                var nerdrage = document.getElementById("nerdrage" + index);
                if (nerdrage.selectedIndex > 0) {
                    var health = parseFloat(document.getElementById("playerhealth" + index).value);
                    if (health <= 20) {
                        var applyNerdrage = valueOf(nerdrage);
                        totalDamageMultiply.push(applyNerdrage);
                        totalDamageEnergyMultiply.push(applyNerdrage);
                    }
                }

                var twistedMuscles = document.getElementById("twistedmuscles" + index + "_yes");
                if (twistedMuscles != null && twistedMuscles.checked) {
                    if (isStrangeInNumbers) {
                        totalDamageMultiply.push(31.25);
                        totalDamageEnergyMultiply.push(31.25);
                    } else {
                        totalDamageMultiply.push(25);
                        totalDamageEnergyMultiply.push(25);
                    }
                }

                var talons = document.getElementById("talons" + index + "_yes");
                if (talons != null && talons.checked) {
                    if (isStrangeInNumbers) {
                        totalDamageMultiply.push(31.25);
                        totalDamageEnergyMultiply.push(31.25);
                    } else {
                        totalDamageMultiply.push(25);
                        totalDamageEnergyMultiply.push(25);
                    }
                }

                var sneakBonusMultiply = 1;
                var isSneaking = document.getElementById("sneaking" + index + "_yes").checked;

                var isLiveAndLove3 = false;
                // preselect certain buffs
                for (var buff of buffOpts) {
                    if (buff.id === "LiveAndLove3") {
                        isLiveAndLove3 = true;
                    }
                }
                // apply selectable buffs
                for (var buff of buffOpts) {
                    buff = withOverride(buff, calcMode);

                    var pmult = 1 + partyMultiplier;
                    if (buff.type !== "alcohol" || buff.nopartyboy) {
                        pmult = 1;
                    }
                    if (buff.mutation && buff.mutation === foodMutation) {
                        pmult += 1;
                        if (isStrangeInNumbers) {
                            pmult += 0.5;
                        }
                    }

                    if (buff.damage !== undefined) {
                        totalDamageMultiply.push(buff.damage * pmult);
                        totalDamageEnergyMultiply.push(buff.damage * pmult);
                    }

                    if (buff.ballisticDamage !== undefined) {
                        totalDamageMultiply.push(buff.ballisticDamage * pmult);
                    }

                    if (buff.energyDamage !== undefined) {
                        totalDamageEnergyMultiply.push(buff.energyDamage * pmult);
                    }

                    if (buff.scopedDamage !== undefined && isScoped) {
                        totalDamageMultiply.push(buff.scopedDamage * pmult);
                        totalDamageEnergyMultiply.push(buff.scopedDamage * pmult);
                    }

                    if (buff.noscopeDamage !== undefined && !isScoped && type === "Ranged") {
                        totalDamageMultiply.push(buff.noscopeDamage * pmult);
                        totalDamageEnergyMultiply.push(buff.noscopeDamage * pmult);
                    }

                    if (buff.teamDamage && isTeam) {
                        totalDamageMultiply.push(buff.teamDamage * pmult);
                        totalDamageEnergyMultiply.push(buff.teamDamage * pmult);
                    }

                    if (isSneaking && buff.sneakDamage !== undefined) {
                        sneakBonusMultiply += buff.sneakDamage * pmult / 100;
                    }

                    if (buff.versusDamage !== undefined) {
                        for (var vs of buff.versus) {
                            if (enemytypes.indexOf(vs) >= 0) {
                                totalDamageMultiply.push(buff.versusDamage * pmult);
                                totalDamageEnergyMultiply.push(buff.versusDamage * pmult);
                                break;
                            }
                        }
                    }

                    if (buff.unarmedDamage !== undefined &&  weap.category === "Unarmed") {

                        var buffMultiply = getAlcoholAndColaBuff(partyMultiplier, colanutMultiplier, buff);
                        var udmg = buff.unarmedDamage;

                        totalDamageMultiply.push(udmg * buffMultiply);
                        totalDamageEnergyMultiply.push(udmg * buffMultiply);
                    }
                    if (buff.criticalDamage !== undefined) {
                        if (buff.mutation === "herbivore" && isLiveAndLove3) {
                            pmult *= 1.5;
                        }
                        critMultiplier += buff.criticalDamage * pmult;
                    }
                    if (buff.damagePoison) {
                        deferredDamagePoisonAdditive.push(buff.damagePoison);
                    }
                    if (buff.enemyDr) {
                        enemyDamageResistanceBuff += buff.enemyDr;
                    }
                }

                // apply other boost
                var otherboost = document.getElementById("otherboost" + index);
                if (otherboost != null) {
                    var v = parseFloat(otherboost.value);
                    if (v > 0 || v < 0) {
                        totalDamageMultiply.push(v);
                        totalDamageEnergyMultiply.push(v);
                    }
                }

                if (weap.explosive) {
                    totalDamageMultiply.push(explosiveBobbleheadPercent);

                    var demolitionsel = document.getElementById("demolition" + index);
                    if (demolitionsel != null && demolitionsel.selectedIndex > 0) {
                        totalDamageMultiply.push(parseFloat(valueOf(demolitionsel)));
                    }
                }

                if (weap.explosiveDamageMult !== undefined) {

                    var xpl = weap.explosiveDamageMult / 100.0;
                    xpl *= 1 + (explosiveBobbleheadPercent / 100.0);

                    var demolitionsel = document.getElementById("demolition" + index);
                    if (demolitionsel != null && demolitionsel.selectedIndex > 0) {
                        xpl *= 1.0 + parseFloat(valueOf(demolitionsel)) / 100.0;
                    }
                    totalDamageMultiply.push(xpl * 100);
                }

                var revenantsel = document.getElementById("revenant" + index);
                if (revenantsel != null && revenantsel.selectedIndex > 0) {
                    totalDamageMultiply.push(parseFloat(valueOf(revenantsel)));
                    totalDamageEnergyMultiply.push(parseFloat(valueOf(revenantsel)));
                }

                if (isSneaking) {
                    var mult = 100;

                    var ninja = document.getElementById("ninja" + index);
                    if (ninja != null && ninja.selectedIndex > 0) {
                        mult += parseFloat(valueOf(ninja));
                    }

                    var covertop = document.getElementById("covertop" + index);
                    if (covertop != null && covertop.selectedIndex > 0) {
                        mult += parseFloat(valueOf(covertop));
                    }
                    sneakBonusMultiply += mult / 100;

                    if (document.getElementById("nighttime" + index + "_yes").checked) {
                        var sandman = document.getElementById("sandman" + index);
                        if (sandman != null && sandman.selectedIndex > 0) {
                            if (isSilenced) {
                                sneakBonusMultiply += parseFloat(valueOf(sandman)) / (isCalcAdd ? 100 : 50);
                            }
                        }
                    }
                }

                var tenderizersel = document.getElementById("tenderizer" + index);
                if (tenderizersel.selectedIndex > 0) {
                    totalDamageDebuff.push(parseFloat(valueOf(tenderizersel)));
                    totalDamageEnergyDebuff.push(parseFloat(valueOf(tenderizersel)));
                }

                var bettercritssel = document.getElementById("bettercrits" + index);
                if (bettercritssel.selectedIndex > 0) {
                    critMultiplier += parseFloat(valueOf(bettercritssel));
                }

                if (powerAttackBonus > 0) {
                    totalDamageMultiply.push(powerAttackBonus);
                    totalDamageEnergyMultiply.push(powerAttackBonus);
                    totalDamageRadiationMultiply.push(powerAttackBonus);
                }

                var clipSize = 0;
                if (isReload) {
                    if (clipSizeSet > 0) {
                        clipSize = clipSizeSet;
                    } else {
                        clipSize = weap.clipSize + clipSizeAdd;
                    }
                    if (clipSizeMult > 0) {
                        clipSize += weap.clipSize * clipSizeMult;
                    }

                    if (weap.category.includes("Heavy") && weap.kind === "laser") {
                        var powerusersel = document.getElementById("poweruser" + index);
                        if (powerusersel.selectedIndex > 0) {
                            clipSize += weap.clipSize * powerusersel.options[powerusersel.selectedIndex].value / 100.0;
                        }
                    }
                }

                if (clipSize > 1 && lastShot > 0) {
                    totalDamageMultiply.push(lastShot / clipSize);
                    totalDamageEnergyMultiply.push(lastShot / clipSize);
                }

                var totalDamage = baseDamage;
                var totalDamageEnergy = baseDamageEnergy;
                var totalDamageRadiation = baseDamageRadiation;
                var totalDamageFire = baseDamageFire;
                var totalDamageCold = baseDamageCold;
                var totalDamagePoison = baseDamagePoison;

                totalDamageAdditive.forEach(function(v) {
                    totalDamage += v;
                });
                totalDamageEnergyAdditive.forEach(function(v) {
                    totalDamageEnergy += v;
                });
                totalDamageFireAdditive.forEach(function(v) {
                    totalDamageFire += v;
                });
                totalDamageColdAdditive.forEach(function(v) {
                    totalDamageCold += v;
                });
                totalDamagePoisonAdditive.forEach(function(v) {
                    totalDamagePoison += v;
                });
                totalDamageRadiationAdditive.forEach(function(v) {
                    totalDamageRadiation += v;
                });
                
                if (isCalcAdd) {
                    var dmg = baseDamage - additiveBoosts;
                    var dmgEnergy = baseDamageEnergy - additiveEnergyBoosts;
                    var dmgFire = baseDamageFire - additiveFireBoosts;
                    var dmgCold = baseDamageCold - additiveColdBoosts;
                    var dmgPoison = baseDamagePoison - additivePoisonBoosts;

                    totalDamageMultiply.forEach(v => {
                        totalDamage += dmg * v / 100.0;
                    });
                    totalDamageEnergyMultiply.forEach(function(v) {
                        totalDamageEnergy += dmgEnergy * v / 100.0;
                        totalDamageFire += dmgFire * v / 100.0;
                        totalDamageCold += dmgCold * v / 100.0;
                        totalDamagePoison += dmgPoison * v / 100.0;
                    });
                    totalDamageRadiationMultiply.forEach(function(v) {
                        totalDamageRadiation += baseDamageRadiation * v / 100.0;
                    });

                    var sneakBonusAdditive = sneakBonusMultiply - 1;
                    totalDamage += dmg * sneakBonusAdditive;
                    totalDamageEnergy += dmgEnergy * sneakBonusAdditive;
                    totalDamageFire += dmgFire * sneakBonusAdditive;
                    totalDamageCold += dmgCold * sneakBonusAdditive;
                    totalDamagePoison += dmgPoison * sneakBonusAdditive;
                } else {
                    totalDamageMultiply.forEach(function(v) {
                        totalDamage *= 1.0 + v / 100.0;
                    });
                    totalDamageEnergyMultiply.forEach(function(v) {
                        totalDamageEnergy *= 1.0 + v / 100.0;
                        totalDamageFire *= 1.0 + v / 100.0;
                        totalDamageCold *= 1.0 + v / 100.0;
                        totalDamagePoison *= 1.0 + v / 100.0;
                    });
                    totalDamageRadiationMultiply.forEach(function(v) {
                        totalDamageRadiation *= 1.0 + v / 100.0;
                    });

                    totalDamage *= sneakBonusMultiply;
                    totalDamageEnergy *= sneakBonusMultiply;
                    totalDamageFire *= sneakBonusMultiply;
                    totalDamageCold *= sneakBonusMultiply;
                    totalDamagePoison *= sneakBonusMultiply;
                }

                totalDamageDebuff.forEach(v => {
                    totalDamage *= 1.0 + v / 100.0;
                });
                totalDamageEnergyDebuff.forEach(v => {
                    totalDamageEnergy *= 1.0 + v / 100.0;
                    totalDamageFire *= 1.0 + v / 100.0;
                    totalDamageCold *= 1.0 + v / 100.0;
                    totalDamagePoison *= 1.0 + v / 100.0;
                });

                var critboost = parseFloat(document.getElementById("critboost" + index).value);
                critMultiplier += critboost;

                if (calcMode >= "P34") {
                    for (var critm of critMultiplierMultiply) {
                        critMultiplier += critm;
                    }
                } else {
                    for (var critm of critMultiplierMultiply) {
                        critMultiplier *= 1.0 + critm / 100.0
                    }
                }
                document.getElementById("critrate" + index).innerHTML = "<b>(" + (critMultiplier).toFixed(2) + " %)</b>";

                if (isCrit) {
                    var dmg = baseDamage - additiveBoosts;
                    var dmgEnergy = baseDamageEnergy - additiveEnergyBoosts;
                    var dmgFire = baseDamageFire - additiveFireBoosts;
                    var dmgCold = baseDamageCold - additiveColdBoosts;
                    var dmgPoison = baseDamagePoison - additivePoisonBoosts;

                    var critBonusAdditive = (critMultiplier - 100) / 100;
                    totalDamage += dmg * critBonusAdditive;
                    totalDamageEnergy += dmgEnergy * critBonusAdditive;
                    totalDamageFire += dmgFire * critBonusAdditive;
                    totalDamageCold += dmgCold * critBonusAdditive;
                    totalDamagePoison += dmgPoison * critBonusAdditive;
                }


                if (document.getElementById("grounded" + index + "_yes").checked) {
                    if (classFreak == "1") {
                        totalDamageEnergy *= 1 - 0.5 * 0.75;
                        totalDamageFire *= 1 - 0.5 * 0.75;
                        totalDamageCold *= 1 - 0.5 * 0.75;
                        totalDamagePoison *= 1 - 0.5 * 0.75;
                    } else
                    if (classFreak == "2") {
                        totalDamageEnergy *= 1 - 0.5 * 0.5;
                        totalDamageFire *= 1 - 0.5 * 0.5;
                        totalDamageCold *= 1 - 0.5 * 0.5;
                        totalDamagePoison *= 1 - 0.5 * 0.5;
                    } else
                    if (classFreak == "3") {
                        totalDamageEnergy *= 1 - 0.5 * 0.25;
                        totalDamageFire *= 1 - 0.5 * 0.25;
                        totalDamageCold *= 1 - 0.5 * 0.25;
                        totalDamagePoison *= 1 - 0.5 * 0.25;
                    } else {
                        totalDamageEnergy *= 1 - 0.5;
                        totalDamageFire *= 1 - 0.5;
                        totalDamageCold *= 1 - 0.5;
                        totalDamagePoison *= 1 - 0.5;
                    }
                }

                var baseSpeed = speed;

                totalSpeedAdditive.forEach(function(v) {
                    speed += baseSpeed * (v / 100.0);
                });

                totalSpeedMultiply.forEach(function(v) {
                    speed *= 1.0 + v / 100.0;
                });

                var speedboostsel = document.getElementById("speedboost" + index);
                var speedboostval = parseFloat(speedboostsel.value);
                if (speedboostval < 0 || speedboostval > 0) {
                    speed *= Math.max(0.000001, 1.0 + speedboostval / 100.0);
                }

                // enemy immunities
                var enemyTypeSel = document.getElementById("enemytype" + index);
                if (enemyTypeSel.selectedIndex > 0) {
                    var enemyType = enemyCategories[enemyTypeSel.selectedIndex - 1];

                    var enemyEffect = enemyRadiationEffect.get(enemyType.name);
                    if (enemyEffect != null) {
                        totalDamageRadiation *= enemyEffect / 100.0;
                    }
                }

                for (var pd of deferredDamagePoisonAdditive) {
                    totalDamagePoison += pd;
                }

                var totalArmorIgnore = 0;
                if (totalArmorIgnoreArray.length != 0) {
                    totalArmorIgnore = 1.0;
                    totalArmorIgnoreArray.forEach(function(v) {
                        totalArmorIgnore *= (1.0 - v / 100.0);
                    });
                    totalArmorIgnore = Math.min(95, 100 * (1 - totalArmorIgnore));
                }
                var totalArmorAddDRSum = 0;
                totalArmorAddDR.forEach(v => totalArmorAddDRSum += v);

                cell2.innerHTML = createDamageDisplayHTML(totalDamage, totalDamageEnergy, totalDamageRadiation,
                        totalDamageFire, totalDamageCold, totalDamagePoison);

                cell4.innerText = totalArmorIgnore.toFixed(2) + " %";

                if (totalArmorAddDRSum != 0) {
                    cell4.innerText += " & " + totalArmorAddDRSum + " DR";
                }

                cell6.innerText = speed.toFixed(2);
                cell8.innerHTML = createDamageDisplayHTML(totalDamage * speed, totalDamageEnergy * speed, totalDamageRadiation * speed,
                        totalDamageFire * speed, totalDamageCold * speed, totalDamagePoison * speed);

                if (isReload) {
                    if (document.getElementById("speeddemon" + index + "_yes").checked) {
                        if (isStrangeInNumbers) {
                            reloadTimeAdd.push(-40);
                        } else {
                            reloadTimeAdd.push(-30);
                        }
                    }

                    pushSelectedValue("quickhands" + index, reloadTimeMult, -1.0);
                    if (isAutomatic && weap.category === "Rifle") {
                        pushSelectedValue("groundpounder" + index, reloadTimeAdd, -1.0);
                    }
                    if (weap.category.includes("Heavy")) {
                        pushSelectedValue("lockandload" + index, reloadTimeAdd, -1.0);
                    }
                    if (weap.category.includes("Shotgun")) {
                        pushSelectedValue("scattershot" + index, reloadTimeAdd, -1.0);
                    }
                    var reloadAdd = 0;
                    for (var e of reloadTimeAdd) {
                        reloadAdd += e;
                    }
                    reloadTimeMult.push(reloadAdd);

                    var reloadSpeed = 1.0 / weap.reloadTime;
                    for (var e of reloadTimeMult) {
                        reloadSpeed *= (1 - e / 100.0);
                    }
                    var reloadTime = 1.0 / reloadSpeed;

                    if (weap.reloadOneByOne) {
                        reloadTime = reloadTime * clipSize + weap.reloadOneByOne;
                    }


                    cell10.innerHTML = "/&#8801;/&nbsp;" + (clipSize).toFixed(0)
                    +  "&nbsp;&nbsp;&nbsp;&#x267B;&nbsp;" + reloadTime.toFixed(2) + " s"; 

                    var speedRL = clipSize / (clipSize / speed + reloadTime);

                    cell12.innerHTML = createDamageDisplayHTML(totalDamage * speedRL, totalDamageEnergy * speedRL, totalDamageRadiation * speedRL,
                        totalDamageFire * speedRL, totalDamageCold * speedRL, totalDamagePoison * speedRL);

                    speedsWithReload[index] = speedRL;
                } else {
                    speedsWithReload[index] = speed;
                }

                damages[index] = totalDamage;
                damagesEnergy[index] = totalDamageEnergy;
                damagesRadiation[index] = totalDamageRadiation;
                damagesFire[index] = totalDamageFire;
                damagesCold[index] = totalDamageCold;
                damagesPoison[index] = totalDamagePoison;

                ignores[index] = totalArmorIgnore;
                armorDr[index] = totalArmorAddDRSum;
                speeds[index] = speed;

                baseDamagesBallistic[index] = weaponBaseDamageBallistic;
                baseDamagesEnergy[index] = weaponBaseDamageEnergy;
                baseDamagesRadiation[index] = weaponBaseDamageRadiation;
                baseDamagesFire[index] = weaponBaseDamageFire;
                baseDamagesCold[index] = weaponBaseDamageCold;
                baseDamagesPoison[index] = weaponBaseDamagePoison;

                enemyDamageResistances[index] = enemyDamageResistanceBuff;

                recalculateDiff();

                recalculateLinks();
            }

            function createDamageDisplayHTML(ballistic, energy, radiation, fire, cold, poison) {
                var result = "";
                if (ballistic < 0.01) {
                    result += "<span class='halfopaque'>\u2316&nbsp;" + ballistic.toFixed(2) + "</span>";
                } else {
                    result += "\u2316&nbsp;" + ballistic.toFixed(2);
                }
                if (energy < 0.01) {
                    result += "<span class='halfopaque'>&nbsp;&nbsp;&nbsp;\u21AF&nbsp;" + energy.toFixed(2) + "</span>";
                } else {
                    result += "&nbsp;&nbsp;&nbsp;\u21AF&nbsp;" + energy.toFixed(2);
                }
                if (radiation < 0.01) {
                    result += "<span class='halfopaque'>&nbsp;&nbsp;&nbsp;\u2622&nbsp;" + radiation.toFixed(2) + "</span>";
                } else {
                    result += "&nbsp;&nbsp;&nbsp;\u2622&nbsp;" + radiation.toFixed(2);
                }

                if (fire < 0.01) {
                    result += "<br><span class='halfopaque'>&#x1F525;&nbsp;" + fire.toFixed(2) + "</span>";
                } else {
                    result += "<br>&#x1F525;&nbsp;" + fire.toFixed(2);
                }
                if (cold < 0.01) {
                    result += "<span class='halfopaque'>&nbsp;&nbsp;&nbsp;&#x2744;&nbsp;" + cold.toFixed(2) + "</span>";
                } else {
                    result += "&nbsp;&nbsp;&nbsp;&#x2744;&nbsp;" + cold.toFixed(2);
                }
                if (poison < 0.01) {
                    result += "<span class='halfopaque'>&nbsp;&nbsp;&nbsp;&#x1F4A7;&nbsp;" + poison.toFixed(2) + "</span>";
                } else {
                    result += "&nbsp;&nbsp;&nbsp;&#x1F4A7;&nbsp;" + poison.toFixed(2);
                }
                return result;
            }

            function scaleWithSelect(value, selectName, scale) {
                var sel = document.getElementById(selectName);
                if (sel != null && sel.selectedIndex > 0) {
                    return value * (1 + scale * sel.options[sel.selectedIndex].value);
                }
                return value;
            }
            function pushSelectedValue(selectName, out, scale) {
                var sel = document.getElementById(selectName);
                if (sel != null && sel.selectedIndex > 0) {
                    out.push(sel.options[sel.selectedIndex].value * scale);
                }
            }

            function hasMutation(index) {
                var adrenalreaction = document.getElementById("adrenalreaction" + index + "_yes").checked;
                var anymutation = document.getElementById("mutation" + index + "_yes").checked;
                var anymutationCount = parseInt(document.getElementById("mutationcount" + index).value);
                var grounded = document.getElementById("grounded" + index + "_yes").checked;
                var tw = document.getElementById("twistedmuscles" + index + "_yes");
                var twistedmuscles = tw != null && tw.checked;
                var tal = document.getElementById("talons" + index + "_yes");
                var talons = tal != null && tal.checked;
                var eae = document.getElementById("eagleeyes" + index + "_yes").checked;
                var food = document.getElementById("foodmutation" + index).selectedIndex > 0;
                
                var spd = document.getElementById("speeddemon" + index + "_yes");
                var sde = spd != null && spd.checked;

                var mutationCount = 
                    (adrenalreaction ? 1 : 0)
                    + (anymutation ? anymutationCount : 0)
                    + (twistedmuscles ? 1 : 0)
                    + (grounded ? 1 : 0)
                    + (talons ? 1 : 0)
                    + (eae ? 1 : 0)
                    + (sde ? 1 : 0)
                    + (food ? 1 : 0);
                return mutationCount;
            }

            function resistanceKey(e) {
                return [e.dr, e.er, e.rr, e.cr, e.fr, e.pr].join(",");
            }

            function actualResist(resistance, ignorePercent) {
                if (resistance === undefined) {
                    return 0;
                }
                return resistance * (1 - Math.min(0.95, (ignorePercent / 100.0)))
            }

            function undefinedIsZero(v) {
                return v === undefined ? 0 : v;
            }

            function linearScale(prev, next, delta) {
                if (prev === undefined || next === undefined) {
                    return undefined;
                }
                return prev + delta * (next - prev);
            }

            function interpolateCurve(table, level) {
                var first = table[0];
                if (level <= first.level) {
                    return {
                        level: first.level,
                        dr: first.dr,
                        er: first.er,
                        rr: first.rr,
                        fr: first.fr,
                        cr: first.cr,
                        pr: first.pr,
                        tip: first.tip,
                        mitigation: first.mitigation
                    };
                }
                var last = table[table.length - 1];
                if (last.level <= level) {
                    return {
                        level: last.level,
                        dr: last.dr,
                        er: last.er,
                        rr: last.rr,
                        fr: last.fr,
                        cr: last.cr,
                        pr: last.pr,
                        tip: last.tip,
                        mitigation: last.mitigation
                    };
                }
                for (var i = 0; i < table.length - 1; i++) {
                    var curr = table[i];
                    var next = table[i + 1];
                    if (curr.level <= level && level <= next.level) {
                        var dx = (level - curr.level) / (1.0 * (next.level - curr.level));

                        return {
                            level: level,
                            dr: linearScale(curr.dr, next.dr, dx),
                            er: linearScale(curr.er, next.er, dx),
                            rr: linearScale(curr.rr, next.rr, dx),
                            fr: linearScale(curr.fr, next.fr, dx),
                            cr: linearScale(curr.cr, next.cr, dx),
                            pr: linearScale(curr.pr, next.pr, dx),
                            tip: curr.tip,
                            mitigation: curr.mitigation
                        };
                    }
                }
                return undefined;
            }

            function recalculateDiff() {
                var tbl = document.getElementById("table3");
                for (var i = tbl.rows.length - 1; i > 2; i--) {
                    tbl.deleteRow(i);
                }

                var speedFactorLeft = 1;
                var speedFactorRight = 1;

                if (document.getElementById("dpsmode").checked) {
                    speedFactorLeft = speeds[1]; 
                    speedFactorRight = speeds[2]; 
                }
                if (document.getElementById("dpsreloadmode").checked) {
                    speedFactorLeft = speedsWithReload[1]; 
                    speedFactorRight = speedsWithReload[2]; 
                }

                var evenOdd = false;
                var lastDr = null;
                var aaEnergy = true;


                var resistanceList = [];
                var resistanceDedup = new Map();
                var customKey = undefined;
                for (var enemyIdx = 1; enemyIdx < 3; enemyIdx++) {
                    if (enemySelection[enemyIdx] != null) {
                        for (var e of enemySelection[enemyIdx]) {
                            var key = resistanceKey(e);
                            var lvls = resistanceDedup.get(key);
                            if (lvls == null) {
                                lvls = [ e.level ];
                                resistanceDedup.set(key, lvls);
                                resistanceList.push(e);
                                e.name = enemySelectionName[enemyIdx];
                                e.key = key;
                            } else {
                                lvls.push(e.level);
                            }
                        }
                        if (enemySelection[enemyIdx].length > 0) {
                            var customLvl = enemySelectionLevel[enemyIdx];
                            var customRes = interpolateCurve(enemySelection[enemyIdx], customLvl);
                            if (customRes !== undefined) {
                                var key = resistanceKey(customRes);
                                if (customKey === undefined || customKey !== key) {
                                    customKey = key;
                                    resistanceList.push(customRes);
                                    customRes.name = "&#x1F440; <b>" + enemySelectionName[enemyIdx] + " " + customLvl + "</b>";
                                    customRes.isCustom = true;
                                }
                            }
                        }
                    }
                }

                for (var re of resistanceList) {
                    if (re.key !== undefined) {
                        var lvls = resistanceDedup.get(re.key);
                        var first = lvls[0];
                        var last = lvls[lvls.length - 1];
                        if (first !== last) {
                            re.name = "<b>" + re.name + " {" + first + ".." + last + "}</b>";
                        } else {
                            re.name = "<b>" + re.name + " " + first + "</b>";
                        }
                    }
                }

                if (document.getElementById("comparesortdesc").checked) {
                    resistanceList.sort(resistancesSortReverse);
                    enemyResistances.sort(resistancesSortReverse);
                } else {
                    resistanceList.sort(resistancesSortDefault);
                    enemyResistances.sort(resistancesSortDefault);

                }
                for (var e of enemyResistances) {
                    resistanceList.push(e);
                }

                resistanceList.forEach(function(res) {
                    var row = tbl.insertRow(tbl.rows.length);

                    if (lastDr == null || lastDr != res.dr) {
                        evenOdd = !evenOdd;
                        lastDr = res.dr
                    }
                    if (evenOdd) {
                        row.style.backgroundColor = "#C0FFC0";
                    }
                    if (res.isCustom) {
                        row.style.backgroundColor = "#FFCC00";
                    }

                    var damageMitigation = 1;
                    if (res.mitigation !== undefined) {
                        damageMitigation = res.mitigation;
                    }

                    var index = 1;
                    var calcMode = calcModes[index];
                    var leftIsP23 = calcMode === "P23";
                    var leftEnergyFormulaBug = calcMode < "P33";

                    var leftDr = Math.max(0, actualResist(res.dr, ignores[index]) + enemyDamageResistances[index] + armorDr[index]);
                    var leftEr = aaEnergy ? actualResist(res.er, ignores[index]) : res.er;
                    var leftRr = res.rr;
                    var leftFr = actualResist(res.fr, ignores[index]); 
                    var leftCr = actualResist(res.cr, ignores[index]); 
                    var leftPr = actualResist(res.pr, ignores[index]);
                    
                    var leftDmg = (leftIsP23 ? damageFormulaP23(damages[index], res.dr, ignores[index]) 
                                             : damageFormula(damages[index], leftDr))
                         * speedFactorLeft * damageMitigation;
                    var leftDmgEnergy = (leftIsP23 ? damageFormulaP23(damagesEnergy[index], res.er, ignores[index]) 
                                             : damageFormula(damagesEnergy[index], leftEr, leftEnergyFormulaBug ? baseDamagesEnergy[index] : undefined))
                         * speedFactorLeft * damageMitigation;
                    var leftDmgRadiation = (leftIsP23 ? damageFormulaP23(damagesRadiation[index], res.rr, ignores[index]) 
                                             : damageFormula(damagesRadiation[index], leftRr))
                         * speedFactorLeft * damageMitigation;
                    var leftDmgFire = (leftIsP23 ? damageFormulaP23(damagesFire[index], res.fr, ignores[index]) 
                                             : damageFormula(damagesFire[index], leftFr, leftEnergyFormulaBug ? baseDamagesFire[index] : undefined))
                         * speedFactorLeft * damageMitigation;
                    var leftDmgCold = (leftIsP23 ? damageFormulaP23(damagesCold[index], res.cr, ignores[index]) 
                                             : damageFormula(damagesCold[index], leftCr, leftEnergyFormulaBug ? baseDamagesCold[index] : undefined))
                         * speedFactorLeft * damageMitigation;
                    var leftDmgPoison = (leftIsP23 ? damageFormulaP23(damagesPoison[index], res.pr, ignores[index]) 
                                             : damageFormula(damagesPoison[index], leftPr, leftEnergyFormulaBug ? baseDamagesPoison[index] : undefined))
                         * speedFactorLeft * damageMitigation;

                    var leftDmgSum = leftDmg + leftDmgEnergy + leftDmgRadiation + leftDmgFire + leftDmgCold + leftDmgPoison;

                    index = 2;
                    calcMode = calcModes[index]
                    var rightIsP23 = calcMode === "P23";
                    var rightEnergyFormulaBug = calcMode < "P33";

                    var rightDr = Math.max(0, actualResist(res.dr, ignores[index]) + enemyDamageResistances[index] + armorDr[index]);
                    var rightEr = aaEnergy ? actualResist(res.er, ignores[index]) : res.er;
                    var rightRr = res.rr;
                    var rightFr = actualResist(res.fr, ignores[index]); 
                    var rightCr = actualResist(res.cr, ignores[index]); 
                    var rightPr = actualResist(res.pr, ignores[index]);

                    var rightDmg = (rightIsP23 ? damageFormulaP23(damages[index], res.dr, ignores[index]) 
                                             : damageFormula(damages[index], rightDr))
                         * speedFactorRight * damageMitigation;
                    var rightDmgEnergy = (rightIsP23 ? damageFormulaP23(damagesEnergy[index], res.er, ignores[index]) 
                                             : damageFormula(damagesEnergy[index], rightEr, rightEnergyFormulaBug ? baseDamagesEnergy[index] : undefined))
                         * speedFactorRight * damageMitigation;
                    var rightDmgRadiation = (rightIsP23 ? damageFormulaP23(damagesRadiation[index], res.rr, ignores[index]) 
                                             : damageFormula(damagesRadiation[index], rightRr))
                         * speedFactorRight * damageMitigation;
                    var rightDmgFire = (rightIsP23 ? damageFormulaP23(damagesFire[index], res.fr, ignores[index]) 
                                             : damageFormula(damagesFire[index], rightFr, rightEnergyFormulaBug ? baseDamagesFire[index] : undefined))
                         * speedFactorRight * damageMitigation;
                    var rightDmgCold = (rightIsP23 ? damageFormulaP23(damagesCold[index], res.cr, ignores[index]) 
                                             : damageFormula(damagesCold[index], rightCr, rightEnergyFormulaBug ? baseDamagesCold[index] : undefined))
                         * speedFactorRight * damageMitigation;
                    var rightDmgPoison = (rightIsP23 ? damageFormulaP23(damagesPoison[index], res.pr, ignores[index]) 
                                             : damageFormula(damagesPoison[index], rightPr, rightEnergyFormulaBug ? baseDamagesPoison[index] : undefined))
                         * speedFactorRight * damageMitigation;

                    var rightDmgSum = rightDmg + rightDmgEnergy + rightDmgRadiation + rightDmgFire + rightDmgCold + rightDmgPoison;

                    var cidx = 0;

                    var cell = row.insertCell(cidx++);
                    if (res.name !== undefined) {
                        cell.innerHTML = res.name;
                        if (res.tip !== undefined) {
                            cell.innerHTML += info(res.tip);
                        }
                        cell.style = "border: 1px solid black;";
                        cell.colSpan = 6;
                        if (res.cr !== undefined) {
                            cell.title = "DR: " + res.dr + ", ER: " + res.er + ", RR: " + res.rr + ", CR: " + res.cr + ", FR: " + res.fr + ", PR: " + res.pr; 
                        } else {
                            cell.title = "DR: " + res.dr + ", ER: " + res.er + ", RR: " + res.rr;
                        }
                        if (res.mitigation !== undefined) {
                            cell.title += "\r\n" + ((1 - res.mitigation) * 100).toFixed(0) + "% of all damage ignored";
                        }
                    } else {
                        cell.innerText = "" + res.dr;
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = "" + res.er;
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = "" + res.rr;
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = "" + undefinedIsZero(res.fr);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = "" + undefinedIsZero(res.cr);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = "" + undefinedIsZero(res.pr);
                        cell.style = "border: 1px solid black; text-align: right;";
                    }

                    var hasLeft = damages[1] > 0 || damagesEnergy[1] > 0 || damagesRadiation[1] > 0
                        || damagesFire[1] > 0 || damagesCold[1] > 0 || damagesPoison[1] > 0;

                    var hasRight = damages[2] > 0 || damagesEnergy[2] > 0 || damagesRadiation[2] > 0
                        || damagesFire[2] > 0 || damagesCold[2] > 0 || damagesPoison[2] > 0;

                    if (hasLeft) {
                        cell = row.insertCell(cidx++);
                        cell.innerText = leftDr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = leftEr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = leftRr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = leftFr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = leftCr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = leftPr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = (leftDmgSum).toFixed(2);

                        cell.title = "Ballistic: " + leftDmg.toFixed(2) 
                            + "    Energy: " + leftDmgEnergy.toFixed(2) 
                            + "    Radiation: " + leftDmgRadiation.toFixed(2)
                            + "    Fire: " + leftDmgFire.toFixed(2)
                            + "    Cold: " + leftDmgCold.toFixed(2)
                            + "    Poison: " + leftDmgPoison.toFixed(2)
                            ;
                        cell.style = "border: 1px solid black; text-align: right;";
                    } else {
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                    }

                    if (hasLeft && hasRight) {
                        cell = row.insertCell(cidx++);
                        cell.innerText = (100 * (leftDmgSum / rightDmgSum - 1)).toFixed(2) + " %";
                        cell.style = "border: 1px solid black; text-align: right;";
                    } else {
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                    }

                    if (hasRight) {
                        cell = row.insertCell(cidx++);
                        cell.innerText = rightDr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = rightEr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = rightRr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = rightFr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = rightCr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = rightPr.toFixed(1);
                        cell.style = "border: 1px solid black; text-align: right;";

                        cell = row.insertCell(cidx++);
                        cell.innerText = (rightDmgSum).toFixed(2);
                        cell.title = "Ballistic: " + rightDmg.toFixed(2) 
                            + "    Energy: " + rightDmgEnergy.toFixed(2) 
                            + "    Radiation: " + rightDmgRadiation.toFixed(2)
                            + "    Fire: " + rightDmgFire.toFixed(2)
                            + "    Cold: " + rightDmgCold.toFixed(2)
                            + "    Poison: " + rightDmgPoison.toFixed(2)
                        cell.style = "border: 1px solid black; text-align: right;";
                    } else {
                        cell = row.insertCell(cidx++);
                        cell.style= "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style= "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                    }

                    if (hasLeft && hasRight) {
                        cell = row.insertCell(cidx++);
                        cell.innerText = (100 * (rightDmgSum / leftDmgSum - 1)).toFixed(2) + " %";
                        cell.style = "border: 1px solid black; text-align: right;";
                    } else {
                        cell = row.insertCell(cidx++);
                        cell.style = "border: 1px solid black; text-align: right;";
                    }

                });
            }

            function damageFormula(damage, dr, baseDamage) {
                if (damage <= 0 || dr === undefined || dr < 1) {
                    return damage;
                }
                if (baseDamage === undefined) {
                    baseDamage = damage;
                }
                return damage * Math.min(0.99, 0.5 * Math.pow(baseDamage / dr, 0.365));
            }

            function damageFormulaP23(damage, baseResistance, ignore) {
                if (damage <= 0) {
                    return damage;
                }
                var resistAdjust = Math.pow((baseResistance + 51) * (1 - 0.01 * ignore), 0.6377);
                return damage * (1 - Math.max(0.01, Math.min(0.8, 0.01 * resistAdjust)));
            }

            function valueOf(select) {
                return select.options[select.selectedIndex].value;
            }

            document.getElementById("copyright").onclick = function() {
                copyPanels(1, 2);
            };
            document.getElementById("copyleft").onclick = function() {
                copyPanels(2, 1);
            };

            function copyPanels(fromIdx, toIdx) {
                var wtype = "";
                if (document.getElementById("wtMelee" + fromIdx).checked) {
                    document.getElementById("wtMelee" + toIdx).click();
                    wtype = "Melee";
                } else 
                if (document.getElementById("wtRanged" + fromIdx).checked) {
                    document.getElementById("wtRanged" + toIdx).click();
                    wtype = "Ranged";
                } else {
                    return;
                }
                var selOther = document.getElementById("weapon" + toIdx);
                var selIdx = document.getElementById("weapon" + fromIdx).selectedIndex;
                selOther.selectedIndex = selIdx;
                if (selIdx < 0) {
                    return;
                }
                selOther.dispatchEvent(new Event('change'));

                var srcTable = document.getElementById("table" + fromIdx);
                var list = srcTable.querySelectorAll("input,select");
                list.forEach(function(node) {
                    var i = node.id.indexOf("" + fromIdx);
                    if (i >= 0) {
                        var newId = node.id.substring(0, i) + toIdx + node.id.substring(i + 1);
                        var nodeOther = document.getElementById(newId);

                        if (nodeOther.selectedIndex !== undefined) {
                            nodeOther.selectedIndex = node.selectedIndex;
                        } else
                        if (nodeOther.type === "radio" || nodeOther.type === "checkbox") {
                            nodeOther.checked = node.checked;
                        } else
                        if (nodeOther.value !== undefined) {
                            nodeOther.value = node.value;
                        }
                    }
                });

                recalculate(document.getElementById("table" + toIdx), toIdx, wtype);
            }

            document.getElementById("wtMelee1").linkId = "M";
            document.getElementById("wtMelee2").linkId = "M";
            document.getElementById("wtRanged1").linkId = "R";
            document.getElementById("wtRanged2").linkId = "R";

            function createLinkURL(sideIndex) {
                var srcTable = document.getElementById("table" + sideIndex);
                var list = srcTable.querySelectorAll("input,select");

                var linkStr = (sideIndex == 1 ? "left=" : "right=");

                list.forEach(function(node) {
                    var i = node.id.indexOf("" + sideIndex);
                    if (i >= 0) {
                        if (node.linkId !== undefined) {
                            if (node.selectedIndex !== undefined) {
                                var opt = node.options[node.selectedIndex];
                                if (opt.linkId !== undefined) {
                                    linkStr += node.linkId + "-" + opt.linkId + "_";
                                }
                            } else
                            if (node.type === "radio" || node.type === "checkbox") {
                                if (node.checked) {
                                    linkStr += node.linkId + "_"
                                }
                            } else
                            if (node.value !== undefined) {
                                if (node.linkDefault === undefined || node.linkDefault !== node.value) {
                                    linkStr += node.linkId + "-" + node.value + "_";
                                }
                            }
                        }
                    }
                });

                if (linkStr.endsWith("_")) {
                    linkStr = linkStr.substring(0, linkStr.length - 1);
                }

                return linkStr;
            }

            function recalculateLinks() {
                var leftleftlink = document.getElementById("linkleftleft");
                var leftlinkStr = createLinkURL(1);
                leftleftlink.href = "?" + leftlinkStr;

                var rightrightlink = document.getElementById("linkrightright");
                var rightlinkStr = createLinkURL(2);
                rightrightlink.href = "?" + rightlinkStr;

                var bothlink = document.getElementById("linkboth");
                bothlink.href = "?" + leftlinkStr + "&" + rightlinkStr;
            }

            function paramsApply(side, entries) {
                // select the weapon type
                var wtype = "";
                if (entries.indexOf("M") >= 0) {
                    wtype = "Melee";
                    document.getElementById("wtMelee" + side).checked = true;
                    document.getElementById("wtMelee" + side).click()
                } else
                if (entries.indexOf("R") >= 0) {
                    wtype = "Ranged";
                    document.getElementById("wtRanged" + side).checked = true;
                    document.getElementById("wtRanged" + side).click();
                }

                if (wtype === "") {
                    return;
                }

                var paramMap = new Map();

                // select the weapon
                outer:
                for (var e of entries) {
                    if (e === "M" || e === "R") {
                        continue;
                    }
                    if (e.startsWith("W-")) {
                        var linkId = e.substring(2);
                        var weaponSel = document.getElementById("weapon" + side);
                        weaponSel.selectedIndex = -1;

                        for (var opt of weaponSel.options) {
                            if (opt.linkId == linkId) {
                                opt.selected = true;
                                weaponSel.dispatchEvent(new Event('change'));
                                break;
                            }
                        }
                    }

                    var kv = e.split("-");
                    if (kv.length == 1) {
                        paramMap.set(kv[0], "true");
                    } else 
                    if (kv.length == 2) {
                        paramMap.set(kv[0], kv[1]);
                    } else
                    if (kv.length == 3) { // negative
                        paramMap.set(kv[0], "-" + kv[2]);
                    }
                }

                // scan the options and match the linkIds with the parameters
                var tbl = document.getElementById("table" + side);
                var list = tbl.querySelectorAll("input,select");

                list.forEach(function(node) {
                    if (node.linkId !== undefined) {

                        var paramVal = paramMap.get(node.linkId);

                        if (paramVal != null) {
                            if (node.type === "radio" || node.type === "checkbox") {
                                if (!node.id.startsWith("wt")) {
                                    node.checked = "true" === paramVal;
                                }
                            }
                            else if (node.options !== undefined) {
                                for (var opt of node.options) {
                                    if (opt.linkId === paramVal) {
                                        opt.selected = true;
                                    }
                                }
                            } else if (node.value !== undefined) {
                                node.value = paramVal;
                            }
                        }
                    }
                });

                recalculate(tbl, side, wtype);
            }

            var params = document.location.search;
            if (params.startsWith("?")) {
                var panels = params.substring(1).split("&");
                for (var panel of panels) {
                    if (panel.startsWith("right=")) {
                        var entries = panel.substring(6).split("_");
                        paramsApply(2, entries);
                    } else
                    if (panel.startsWith("left=")) {
                        var entries = panel.substring(5).split("_");
                        paramsApply(1, entries);
                    }
                }
            }

        </script>
    </body>
</html>